schema_version: '0.3'
buildstock_directory: ../ # Relative to this file or absolute
project_directory: project_national # Relative to buildstock_directory
output_directory: /scratch/jrobert1/test001
# weather_files_url: https://data.nrel.gov/system/files/156/BuildStock_TMY3_FIPS.zip
# weather_files_path: c:/OpenStudio/BuildStock_TMY3_FIPS.zip
weather_files_path: /shared-projects/buildstock/weather/BuildStock_TMY3_FIPS.zip

sampler:
  type: residential_quota_downselect
  args:
    n_datapoints: 100
    resample: false
    logic:
      and:
        - or:
          - Geometry Building Type RECS|Single-Family Attached
          - Geometry Building Type RECS|Multi-Family with 2 - 4 Units
          - Geometry Building Type RECS|Multi-Family with 5+ Units
        - or:
          - ASHRAE IECC Climate Zone 2004|4A
          - ASHRAE IECC Climate Zone 2004|4B
          - ASHRAE IECC Climate Zone 2004|4C
          - ASHRAE IECC Climate Zone 2004|5A
          - ASHRAE IECC Climate Zone 2004|5B
          - ASHRAE IECC Climate Zone 2004|6A
          - ASHRAE IECC Climate Zone 2004|6B

workflow_generator:
  type: residential_hpxml
  args:
    build_existing_model:
      simulation_control_timestep: 60
      simulation_control_run_period_begin_month: 1
      simulation_control_run_period_begin_day_of_month: 1
      simulation_control_run_period_end_month: 12
      simulation_control_run_period_end_day_of_month: 31
      simulation_control_run_period_calendar_year: 2007

    emissions:
      - scenario_name: LRMER_MidCase_15
        type: CO2e
        elec_folder: data/cambium/LRMER_MidCase_15

    simulation_output_report:
      timeseries_frequency: none

    reporting_measures:
      - measure_dir_name: AdditionalProperties

baseline:
  n_buildings_represented: 136569411 # American Community Survey 2019 5-year, B25001, does not include AK, HI, and territories

upgrades:
  - upgrade_name: Envelope Only
    options:
      - option: Insulation Sheathing|R-30
        costs:
          - value: 2.01
            multiplier: Wall Area, Above-Grade, Conditioned (ft^2)
        lifetime: 999
      - option: Windows|Triple, Low-E, Insulated, Argon, H-Gain
      - option: Insulation Ceiling|R-60
        apply_logic: Geometry Attic Type|Vented Attic
      - option: Insulation Roof|Finished, R-60
        apply_logic: 
          or:
            - Geometry Attic Type|None
            - Geometry Attic Type|Finished Attic or Cathedral Ceilings
      - option: Infiltration|1.5 ACH50

  - upgrade_name: Envelope And MSHP, No Insulation Reduction
    options:
      - option: HVAC Heating Efficiency|MSHP, SEER 33, 13.3 HSPF
        costs:
          - value: 50.0
            multiplier: Size, Heating System Primary (kBtu/h)
        lifetime: 30
      - option: HVAC Cooling Efficiency|None
      - option: HVAC Heating Type|Non-Ducted Heat Pump
      - option: Insulation Sheathing|R-30
        costs:
          - value: 2.01
            multiplier: Wall Area, Above-Grade, Conditioned (ft^2)
        lifetime: 999
      - option: Insulation Wall Heat Pump|R-30
      - option: Windows|Triple, Low-E, Insulated, Argon, H-Gain
      - option: Insulation Ceiling|R-60
        apply_logic: Geometry Attic Type|Vented Attic
      - option: Insulation Roof|Finished, R-60
        apply_logic: 
          or:
            - Geometry Attic Type|None
            - Geometry Attic Type|Finished Attic or Cathedral Ceilings
      - option: Infiltration|1.5 ACH50

  - upgrade_name: Envelope And MSHP, Minimal Insulation
    options:
      - option: HVAC Heating Efficiency|MSHP, SEER 33, 13.3 HSPF
        costs:
          - value: 50.0
            multiplier: Size, Heating System Primary (kBtu/h)
        lifetime: 30
      - option: HVAC Cooling Efficiency|None
      - option: HVAC Heating Type|Non-Ducted Heat Pump
      - option: Insulation Sheathing|R-30
        costs:
          - value: 2.01
            multiplier: Wall Area, Above-Grade, Conditioned (ft^2)
        lifetime: 999
      - option: Insulation Wall Heat Pump|R-5
      - option: Windows|Triple, Low-E, Insulated, Argon, H-Gain
      - option: Insulation Ceiling|R-60
        apply_logic: Geometry Attic Type|Vented Attic
      - option: Insulation Roof|Finished, R-60
        apply_logic: 
          or:
            - Geometry Attic Type|None
            - Geometry Attic Type|Finished Attic or Cathedral Ceilings
      - option: Infiltration|1.5 ACH50

  - upgrade_name: Envelope And MSHP, Medium Insulation
    options:
      - option: HVAC Heating Efficiency|MSHP, SEER 33, 13.3 HSPF
        costs:
          - value: 50.0
            multiplier: Size, Heating System Primary (kBtu/h)
        lifetime: 30
      - option: HVAC Cooling Efficiency|None
      - option: HVAC Heating Type|Non-Ducted Heat Pump
      - option: Insulation Sheathing|R-30
        costs:
          - value: 2.01
            multiplier: Wall Area, Above-Grade, Conditioned (ft^2)
        lifetime: 999
      - option: Insulation Wall Heat Pump|R-15
      - option: Windows|Triple, Low-E, Insulated, Argon, H-Gain
      - option: Insulation Ceiling|R-60
        apply_logic: Geometry Attic Type|Vented Attic
      - option: Insulation Roof|Finished, R-60
        apply_logic: 
          or:
            - Geometry Attic Type|None
            - Geometry Attic Type|Finished Attic or Cathedral Ceilings
      - option: Infiltration|1.5 ACH50

eagle:
  n_jobs: 5
  minutes_per_sim: 10
  account: enduse
  postprocessing:
    time: 20
    n_workers: 1
  sampling:
    time: 5

postprocessing:
  aws:
    region_name: 'us-west-2'
    s3:
      bucket: zonal-hp
      prefix: bsb_results
    athena:
      glue_service_role: service-role/AWSGlueServiceRole-default
      database_name: zonal-hp
      max_crawling_time: 300 # time to wait for the crawler to complete before aborting it
