schema_version: '0.3'
buildstock_directory: /projects/enduse/euss/repos/resstock  # Relative to this file or absolute
project_directory: project_national  # Relative to buildstock_directory
output_directory: /projects/enduse/euss/resstock_runs/test1
# weather_files_url: https://s3.amazonaws.com/epwweatherfiles/project_resstock_national.zip
# weather_files_url: https://data.nrel.gov/system/files/156/BuildStock_TMY3_FIPS.zip
weather_files_path: /shared-projects/buildstock/weather/BuildStock_2018_FIPS.zip

baseline:
  n_buildings_represented: 133172057

sampler: 
  type: residential_quota
  args: 
    n_datapoints: 100

workflow_generator: 
  type: residential_hpxml
  args:
    build_existing_model:
      simulation_control_timestep: 15 # minutes
      simulation_control_run_period_begin_month: 1
      simulation_control_run_period_begin_day_of_month: 1
      simulation_control_run_period_end_month: 12
      simulation_control_run_period_end_day_of_month: 31
      simulation_control_run_period_calendar_year: 2018

eagle:
  account: enduse
  n_jobs: 20 #CHECK for full run, probably want hundreds
  minutes_per_sim: 10
  sampling:
    time: 20 #CHECK for full run, probably want higher (e.g. 60)
  postprocessing:
    time: 800
    n_workers: 2 #CHECK for full run, probably want like 32
    # node_memory_mb: 751616

postprocessing:
  aws:
    region_name: 'us-west-2'
    s3:
      bucket: euss
      prefix: tests/test1 #the folder within whatever bucket, should be specific to the run, can be in heirarchy (like GMLC/APS) in which case only the last part will be used by the athena database namer
    athena:
      glue_service_role: service-role/AWSGlueServiceRole-default
      database_name: euss-results #collection of Athena tables (post-crawling), can be constant for the entire analysis
      max_crawling_time: 1200 #time to wait for the crawler to complete before aborting it

upgrades:
  - upgrade_name: Basic Enclosure
    #Up01
    options:
      #Attic floor insulation up to IECC 2021 levels for homes with vented attics and less than R-30 existing insulation
      - &attic_insulation_IECC_CZ1A
        option: Insulation Ceiling|R-30
        apply_logic:
          - and:
            - ASHRAE IECC Climate Zone 2004|1A
            - Geometry Attic Type|Vented Attic
            - or:
              - Insulation Ceiling|Uninsulated
              - Insulation Ceiling|R-7
              - Insulation Ceiling|R-13
              - Insulation Ceiling|R-19
        costs:
          - value: #CHECK
            multiplier: 
        lifetime: 999 #Note we are explicitly doing nothing to unvented attics, they are excluded everywhere
      - &attic_insulation_IECC_CZ2A-2B-3A-3B-3C
        option: Insulation Ceiling|R-49
        apply_logic:
          - and:
            - or:
              - ASHRAE IECC Climate Zone 2004|2A
              - ASHRAE IECC Climate Zone 2004|2B
              - ASHRAE IECC Climate Zone 2004|3A
              - ASHRAE IECC Climate Zone 2004|3B
              - ASHRAE IECC Climate Zone 2004|3C
            - Geometry Attic Type|Vented Attic
            - or:
              - Insulation Ceiling|Uninsulated
              - Insulation Ceiling|R-7
              - Insulation Ceiling|R-13
              - Insulation Ceiling|R-19
              - Insulation Ceiling|R-30
              - Insulation Ceiling|R-38
        costs:
          - value: #CHECK
            multiplier: 
        lifetime: 999
      - &attic_insulation_IECC_CZ4A-4B-4C-5A-5B-6A-6B-7A-7B
        option: Insulation Ceiling|R-60
        apply_logic:
          - and:
            - or:
              - ASHRAE IECC Climate Zone 2004|4A
              - ASHRAE IECC Climate Zone 2004|4B
              - ASHRAE IECC Climate Zone 2004|4C
              - ASHRAE IECC Climate Zone 2004|5A
              - ASHRAE IECC Climate Zone 2004|5B
              - ASHRAE IECC Climate Zone 2004|6A
              - ASHRAE IECC Climate Zone 2004|6B
              - ASHRAE IECC Climate Zone 2004|7A
              - ASHRAE IECC Climate Zone 2004|7B
            - Geometry Attic Type|Vented Attic
            - or:
              - Insulation Ceiling|Uninsulated
              - Insulation Ceiling|R-7
              - Insulation Ceiling|R-13
              - Insulation Ceiling|R-19
              - Insulation Ceiling|R-30
              - Insulation Ceiling|R-38
              - Insulation Ceiling|R-49
        costs:
          - value: #CHECK
            multiplier: 
        lifetime: 999
      #General air sealing - 30% total reduction in ACH50 for homes with greater than 10 ACH50
      #30% is consistent with median reduction documented in https://doi.org/10.20357/B7FP4D 
      - &infiltration_30pct_reduction
        option: Infiltration Reduction|30%
        apply_logic:
          - or:
            - Infiltration|50 ACH50
            - Infiltration|40 ACH50
            - Infiltration|30 ACH50
            - Infiltration|25 ACH50
            - Infiltration|20 ACH50
            - Infiltration|15 ACH50
        costs:
          - value: 0.50 # $0.50/ft2 is from LBNL data for general air sealing (https://doi.org/10.20357/B7FP4D).
                        # Interpolated between 20% and 40% reductions to get $0.44/ft2,
                        # then used 1.14 multiplier to inflate from Jan 2019 to Mar 2022
            multiplier: Floor Area, Conditioned (ft^2)
        lifetime: 30
      #Duct sealing to 10% leakage, R-8 insulation for all ducts in unconditioned space
      # Costs are mid-values from REMDB, inflated from 2010 to 2022 dollars using 1.289 factor
      - &ducts_category1 #improving leakage a lot, and insulation
        option: Ducts|10% Leakage, R-8
        apply_logic:
          or: 
            - Ducts|85% Leakage, Uninsulated
            - Ducts|53% Leakage, Uninsulated
            - Ducts|34% Leakage, Uninsulated
            - Ducts|30% Leakage, Uninsulated
            - Ducts|85% Leakage, R-4
            - Ducts|85% Leakage, R-6
            - Ducts|53% Leakage, R-4
            - Ducts|53% Leakage, R-6
            - Ducts|34% Leakage, R-4
            - Ducts|34% Leakage, R-6
            - Ducts|30% Leakage, R-4
            - Ducts|30% Leakage, R-6
        costs:
          - value: 2.84 # Mid-value from REMDB, inflated from 2010 to 2022 dollars using 1.289 factor
            multiplier: Duct Unconditioned Surface Area (ft^2)
        lifetime: 30
      - &ducts_category2 #improving leakage a lot only
        option: Ducts|10% Leakage, R-8
        apply_logic:
          or: 
            - Ducts|85% Leakage, R-8
            - Ducts|53% Leakage, R-8
            - Ducts|34% Leakage, R-8
            - Ducts|30% Leakage, R-8
        costs:
          - value: 1.04 # Mid-value from REMDB, inflated from 2010 to 2022 dollars using 1.289 factor
            multiplier: Duct Unconditioned Surface Area (ft^2)
        lifetime: 30
      - &ducts_category3 #improving leakage some, and insulation
        option: Ducts|10% Leakage, R-8
        apply_logic:
          or: 
            - Ducts|24% Leakage, Uninsulated
            - Ducts|24% Leakage, R-4
            - Ducts|24% Leakage, R-6
            - Ducts|20% Leakage, Uninsulated
            - Ducts|20% Leakage, R-4
            - Ducts|20% Leakage, R-6 
        costs:
          - value: 2.32 # Mid-value from REMDB, inflated from 2010 to 2022 dollars using 1.289 factor
            multiplier: Duct Unconditioned Surface Area (ft^2)
        lifetime: 30
      - &ducts_category4 #improving leakage some only
        option: Ducts|10% Leakage, R-8
        apply_logic:
          or: 
            - Ducts|24% Leakage, R-8
            - Ducts|20% Leakage, R-8
        costs:
          - value: 0.52 # Mid-value from REMDB, inflated from 2010 to 2022 dollars using 1.289 factor
            multiplier: Duct Unconditioned Surface Area (ft^2)
        lifetime: 30
      - &ducts_category5 #improving leakage a little, and insulation
        option: Ducts|10% Leakage, R-8
        apply_logic:
          or: 
            - Ducts|15% Leakage, Uninsulated
            - Ducts|15% Leakage, R-4
            - Ducts|15% Leakage, R-6
            - Ducts|14% Leakage, Uninsulated
            - Ducts|14% Leakage, R-4
            - Ducts|14% Leakage, R-6
            - Ducts|15% Leakage, R-6, 50% Surface Area, 1 return
        costs:
          - value: 2.06 # Mid-value from REMDB, inflated from 2010 to 2022 dollars using 1.289 factor
            multiplier: Duct Unconditioned Surface Area (ft^2)
        lifetime: 30
      - &ducts_category6 #improving leakage a little only
        option: Ducts|10% Leakage, R-8
        apply_logic:
          or: 
            - Ducts|15% Leakage, R-8
            - Ducts|14% Leakage, R-8
        costs:
          - value: 0.26 # Mid-value from REMDB, inflated from 2010 to 2022 dollars using 1.289 factor
            multiplier: Duct Unconditioned Surface Area (ft^2)
        lifetime: 30
      - &ducts_category7 #improving insulation only
        option: Ducts|10% Leakage, R-8
        apply_logic:
          or: 
            - Ducts|10% Leakage, Uninsulated
            - Ducts|10% Leakage, R-4
            - Ducts|10% Leakage, R-6
        costs:
          - value: 1.80 # Mid-value from REMDB, inflated from 2010 to 2022 dollars using 1.289 factor
            multiplier: Duct Unconditioned Surface Area (ft^2)
        lifetime: 30
      #Drill-and-fill insulation (R-13) for homes with no insulation and wood stud walls
      - &Drill-and-fill
        option: Insulation Wall|Wood Stud, R-13
        apply_logic:
          - Insulation Wall|Wood Stud, Uninsulated
        costs: 
          - value: 2.24 # from LBNL data (https://doi.org/10.20357/B7FP4D); consistent with NREL REMDB
                        # (https://remdb.nrel.gov/measures.php?gId=12&ctId=184&scId=2015&acId=2028)
            multiplier: Wall Area, Above-Grade, Conditioned (ft^2)
        lifetime: 999
  - upgrade_name: Enhanced Enclosure
    #Up02
    options:
      #Basic Enclosure Measures
      - *attic_insulation_IECC_CZ1A
      - *attic_insulation_IECC_CZ2A-2B-3A-3B-3C
      - *attic_insulation_IECC_CZ4A-4B-4C-5A-5B-6A-6B-7A-7B
      - *infiltration_30pct_reduction
      - *ducts_category1
      - *ducts_category2
      - *ducts_category3
      - *ducts_category4
      - *ducts_category5
      - *ducts_category6
      - *ducts_category7
      - *Drill-and-fill
      #Add R-10 interior insulation to foundation walls and rim joists in conditioned basements and crawlspace
      - &foundation_wall_insulation #adding even if there is already exterior foundation wall insulation - is that what's wanted?
        option: Insulation Foundation Wall|Wall R-10, Interior
        apply_logic: #including vented crawlspaces since they will be sealed and become unvented crawlspaces in the same package. 
          - and:
            - or:
              - Geometry Foundation Type|Unvented Crawlspace
              - Geometry Foundation Type|Vented Crawlspace
              - Geometry Foundation Type|Heated Basement
            - Insulation Foundation Wall|Uninsulated
        costs:
          - value:
            multiplier:
        lifetime:
      #seal crawlspace vents
      - &seal_vented_crawlspaces #Is sealing vented crawlspaces controversial/does it cause moisture issues? Are there complimentary upgrades that would be needed to deal with the moisture issue?
        option: Geometry Foundation Type|Unvented Crawlspace
        apply_logic:
          and:
            - Geometry Foundation Type|Vented Crawlspace
            - or: # Ensure that the dwelling unit being modeled is either (1) not in a multifamily building, or (2) on the bottom floor of a multifamily building and therefore above the crawlspace.
                - Geometry Building Level MF|None
                - Geometry Building Level MF|Bottom
        costs:
          - value: 0.84
            multiplier: Floor Area, Foundation (ft^2)
        lifetime: 999
      #insulate finished attics and cathedral ceilings to R-30
      - &roof_insulation_to_R30
        option: Insulation Roof|Finished, R-30
        apply_logic: 
          - or:
            - Geometry Attic Type|Finished Attic or Cathedral Ceiling
            - Geometry Building Level MF|Top
        costs:
          - value:
            multiplier:
        lifetime:
  - upgrade_name: Minimum-efficiency heat pumps #also provides SEER 15 cooling measure profile
    #Up03
    options:
      #ASHP SEER 15, 9.0 HSPF for homes with ducts
        #these need to be sized for cooling and I'm not sure I did that right?
      - &ASHP_SEER15_9HSPF
        option: HVAC Heating Efficiency|ASHP, SEER 15, 9.0 HSPF
        apply_logic: 
          - and:
            - HVAC Has Ducts|Yes
            - not: HVAC Heating Efficiency|MSHP, SEER 29.3, 14 HSPF
        costs:
          - value:
            multiplier:
        lifetime:
      #MSHP SEER 15, 9.0 HSPF for homes without ducts
      - &MSHP_SEER15_9HSPF
        option: HVAC Heating Efficiency|MSHP, SEER 15, 9.0 HSPF
        apply_logic: 
          - and:
            - HVAC Has Ducts|No
            - not: HVAC Heating Efficiency|MSHP, SEER 29.3, 14 HSPF
        costs:
          - value:
            multiplier:
        lifetime:
  - upgrade_name: High-efficiency heat pumps #also provides SEER 24-29 cooling measure profile
    options:
      #ASHP SEER 24, 13 HSPF, 50% capacity retention at -15*F for homes with ducts
      - &ASHP_SEER24_13HSPF
        option: HVAC Heating Efficiency|ASHP SEER 24, 13 HSPF
        apply_logic:
        - and:
            - HVAC Has Ducts|Yes
            - not: HVAC Heating Efficiency|MSHP, SEER 29.3, 14 HSPF
          costs:
          - value:
            multiplier:
        lifetime:
      #MSHP SEER 29.3, 14.0 HSPF for homes without ducts
      - &MSHP_SEER29_14HSPF
        option: HVAC Heating Efficiency|MSHP 29.3, 14 HSPF
        apply_logic: 
          - and:
            - HVAC Has Ducts|No
            - not: HVAC Heating Efficiency|MSHP, SEER 29.3, 14 HSPF
        costs:
          - value:
            multiplier:
        lifetime:
  - upgrade_name: Heat pump with other supplemental heating
      #homes keep their exising heating system as backup, heat pump is sized for cooling
      #assumes a control strategy where the electric heat pump is the primary heating source and the pre-existing heating system is only used as auxiliary below a pre-defined switchover temperature (41F)
    options:
      #ASHP SEER 15, 9.0 HSPF (30*F switchover temperature) for homes with ducts and existing central AC or HP
      - &ASHP_SEER15_9HSPF_df_for_elec_baseboard #note that while elec baseboard heating is non-ducted, a home can have elec baseboard and a ducted cooling system, so this option is included
        option:
        apply_logic:
          - HVAC Has Ducts|Yes
          - HVAC Heating Efficiency|Electric Baseboard, 100% Efficiency
        costs:
          - value:
            multiplier:
        lifetime:
      - &ASHP_SEER15_9HSPF_df_for_elec_boiler
        option: 
        apply_logic:
          - HVAC Has Ducts|Yes
          - HVAC Heating Efficiency|Electric Boiler, 100% AFUE
        costs:
          - value:
            multiplier:
        lifetime:
      - &ASHP_SEER15_9HSPF_df_for_elec_furnace
        option:
        apply_logic:
          - HVAC Has Ducts|Yes
          - HVAC Heating Efficiency|Electric Baseboard, 100% Efficiency
        costs:
          - value:
            multiplier:
        lifetime:
      - &ASHP_SEER15_9HSPF_df_for_elec_wall_furnace
        option:
        apply_logic:
          - HVAC Has Ducts|Yes
          - HVAC Heating Efficiency|Electric Wall Furnace, 100% AFUE
        costs:
          - value:
            multiplier:
        lifetime:
      - &ASHP_SEER15_9HSPF_df_for_ng_boiler_76AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|Yes
          - HVAC Heating Efficiency|Fuel Boiler, 76% AFUE
          - Heating Fuel|Natural Gas
        costs:
          - value:
            multiplier:
        lifetime:
      - &ASHP_SEER15_9HSPF_df_for_ng_boiler_80AFU
        option:
        apply_logic:
          - HVAC Has Ducts|Yes
          - HVAC Heating Efficiency|Fuel Boiler, 80% AFUE
          - Heating Fuel|Natural Gas
        costs:
          - value:
            multiplier:
        lifetime:
      - &ASHP_SEER15_9HSPF_df_for_ng_boiler_90AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|Yes
          - HVAC Heating Efficiency|Fuel Boiler, 90% AFUE
          - Heating Fuel|Natural Gas
        costs:
          - value:
            multiplier:
        lifetime:
      - &ASHP_SEER15_9HSPF_df_for_ng_furnace_60AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|Yes
          - HVAC Heating Efficiency|Fuel Furnace, 60% AFUE
          - Heating Fuel|Natural Gas
        costs:
          - value:
            multiplier:
        lifetime:
      - &ASHP_SEER15_9HSPF_df_for_ng_furnace_76AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|Yes
          - HVAC Heating Efficiency|Fuel Furnace, 76% AFUE
          - Heating Fuel|Natural Gas
        costs:
          - value:
            multiplier:
        lifetime:
      - &ASHP_SEER15_9HSPF_df_for_ng_furnace_80AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|Yes
          - HVAC Heating Efficiency|Fuel Furnace, 80% AFUE
          - Heating Fuel|Natural Gas
        costs:
          - value:
            multiplier:
        lifetime:
      - &ASHP_SEER15_9HSPF_df_for_ng_furnace_92AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|Yes
          - HVAC Heating Efficiency|Fuel Furnace, 92.5% AFUE
          - Heating Fuel|Natural Gas
        costs:
          - value:
            multiplier:
        lifetime:
      - &ASHP_SEER15_9HSPF_df_for_ng_wffurnace_60AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|Yes
          - HVAC Heating Efficiency|Fuel Wall/Floor Furnace, 60% AFUE
          - Heating Fuel|Natural Gas
        costs:
          - value:
            multiplier:
        lifetime:
      - &ASHP_SEER15_9HSPF_df_for_ng_wffurnace_68AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|Yes
          - HVAC Heating Efficiency|Fuel Wall/Floor Furnace, 68% AFUE
          - Heating Fuel|Natural Gas
        costs:
          - value:
            multiplier:
        lifetime:
      - &ASHP_SEER15_9HSPF_df_for_propane_boiler_76AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|Yes
          - HVAC Heating Efficiency|Fuel Boiler, 76% AFUE
          - Heating Fuel|Propane
        costs:
          - value:
            multiplier:
        lifetime:
      - &ASHP_SEER15_9HSPF_df_for_propane_boiler_80AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|Yes
          - HVAC Heating Efficiency|Fuel Boiler, 80% AFUE
          - Heating Fuel|Propane
        costs:
          - value:
            multiplier:
        lifetime:
      - &ASHP_SEER15_9HSPF_df_for_propane_boiler_90AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|Yes
          - HVAC Heating Efficiency|Fuel Boiler, 90% AFUE
          - Heating Fuel|Propane
        costs:
          - value:
            multiplier:
        lifetime:
      - &ASHP_SEER15_9HSPF_df_for_propane_furnace_60AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|Yes
          - HVAC Heating Efficiency|Fuel Furnace, 60% AFUE
          - Heating Fuel|Propane
        costs:
          - value:
            multiplier:
        lifetime:
      - &ASHP_SEER15_9HSPF_df_for_propane_furnace_76AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|Yes
          - HVAC Heating Efficiency|Fuel Furnace, 76% AFUE
          - Heating Fuel|Propane
        costs:
          - value:
            multiplier:
        lifetime:
      - &ASHP_SEER15_9HSPF_df_for_propane_furnace_80AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|Yes
          - HVAC Heating Efficiency|Fuel Furnace, 80% AFUE
          - Heating Fuel|Propane
        costs:
          - value:
            multiplier:
        lifetime:
      - &ASHP_SEER15_9HSPF_df_for_propane_furnace_92AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|Yes
          - HVAC Heating Efficiency|Fuel Furnace, 92.5% AFUE
          - Heating Fuel|Propane
        costs:
          - value:
            multiplier:
        lifetime:
      - &ASHP_SEER15_9HSPF_df_for_propane_wffurnace_60AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|Yes
          - HVAC Heating Efficiency|Fuel Wall/Floor Furnace, 60% AFUE
          - Heating Fuel|Propane
        costs:
          - value:
            multiplier:
        lifetime:
      - &ASHP_SEER15_9HSPF_df_for_propane_wffurnace_68AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|Yes
          - HVAC Heating Efficiency|Fuel Wall/Floor Furnace, 68% AFUE
          - Heating Fuel|Propane
        costs:
          - value:
            multiplier:
        lifetime:
      - &ASHP_SEER15_9HSPF_df_for_fueloil_boiler_76AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|Yes
          - HVAC Heating Efficiency|Fuel Boiler, 76% AFUE
          - Heating Fuel|Fuel Oil
        costs:
          - value:
            multiplier:
        lifetime:
      - &ASHP_SEER15_9HSPF_df_for_fueloil_boiler_80AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|Yes
          - HVAC Heating Efficiency|Fuel Boiler, 80% AFUE
          - Heating Fuel|Fuel Oil
        costs:
          - value:
            multiplier:
        lifetime:
      - &ASHP_SEER15_9HSPF_df_for_fueloil_boiler_90AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|Yes
          - HVAC Heating Efficiency|Fuel Boiler, 90% AFUE
          - Heating Fuel|Fuel Oil
        costs:
          - value:
            multiplier:
        lifetime:
      - &ASHP_SEER15_9HSPF_df_for_fueloil_furnace_60AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|Yes
          - HVAC Heating Efficiency|Fuel Furnace, 60% AFUE
          - Heating Fuel|Fuel Oil
        costs:
          - value:
            multiplier:
        lifetime:
      - &ASHP_SEER15_9HSPF_df_for_fueloil_furnace_76AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|Yes
          - HVAC Heating Efficiency|Fuel Furnace, 76% AFUE
          - Heating Fuel|Fuel Oil
        costs:
          - value:
            multiplier:
        lifetime:
      - &ASHP_SEER15_9HSPF_df_for_fueloil_furnace_80AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|Yes
          - HVAC Heating Efficiency|Fuel Furnace, 80% AFUE
          - Heating Fuel|Fuel Oil
        costs:
          - value:
            multiplier:
        lifetime:
      - &ASHP_SEER15_9HSPF_df_for_fueloil_furnace_92AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|Yes
          - HVAC Heating Efficiency|Fuel Furnace, 92.5% AFUE
          - Heating Fuel|Fuel Oil
        costs:
          - value:
            multiplier:
        lifetime:
      - &ASHP_SEER15_9HSPF_df_for_fueloil_wffurnace_60AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|Yes
          - HVAC Heating Efficiency|Fuel Wall/Floor Furnace, 60% AFUE
          - Heating Fuel|Fuel Oil
        costs:
          - value:
            multiplier:
        lifetime:
      - &ASHP_SEER15_9HSPF_df_for_fueloil_wffurnace_68AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|Yes
          - HVAC Heating Efficiency|Fuel Wall/Floor Furnace, 68% AFUE
          - Heating Fuel|Fuel Oil
        costs:
          - value:
            multiplier:
        lifetime:
      #MSHP SEER 15, 9.0 HSPF for homes without ducts (80% of load served by MSHP) and existing room AC
      - &MSHP_SEER15_9HSPF_df_for_elec_baseboard #not including any inherently-ducted heating types (ie fuel furnaces)
        option:
        apply_logic:
          - HVAC Has Ducts|No
          - HVAC Heating Efficiency|Electric Baseboard, 100% Efficiency
        costs:
          - value:
            multiplier:
        lifetime:
      - &MSHP_SEER15_9HSPF_df_for_elec_boiler
        option: 
        apply_logic:
          - HVAC Has Ducts|No
          - HVAC Heating Efficiency|Electric Boiler, 100% AFUE
        costs:
          - value:
            multiplier:
        lifetime:
      - &MSHP_SEER15_9HSPF_df_for_elec_furnace
        option:
        apply_logic:
          - HVAC Has Ducts|No
          - HVAC Heating Efficiency|Electric Baseboard, 100% Efficiency
        costs:
          - value:
            multiplier:
        lifetime:
      - &MSHP_SEER15_9HSPF_df_for_elec_wall_furnace
        option:
        apply_logic:
          - HVAC Has Ducts|No
          - HVAC Heating Efficiency|Electric Wall Furnace, 100% AFUE
        costs:
          - value:
            multiplier:
        lifetime:
      - &MSHP_SEER15_9HSPF_df_for_ng_boiler_76AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|No
          - HVAC Heating Efficiency|Fuel Boiler, 76% AFUE
          - Heating Fuel|Natural Gas
        costs:
          - value:
            multiplier:
        lifetime:
      - &MSHP_SEER15_9HSPF_df_for_ng_boiler_80AFU
        option:
        apply_logic:
          - HVAC Has Ducts|No
          - HVAC Heating Efficiency|Fuel Boiler, 80% AFUE
          - Heating Fuel|Natural Gas
        costs:
          - value:
            multiplier:
        lifetime:
      - &MSHP_SEER15_9HSPF_df_for_ng_boiler_90AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|No
          - HVAC Heating Efficiency|Fuel Boiler, 90% AFUE
          - Heating Fuel|Natural Gas
        costs:
          - value:
            multiplier:
        lifetime:
      - &MSHP_SEER15_9HSPF_df_for_ng_furnace_60AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|No
          - HVAC Heating Efficiency|Fuel Furnace, 60% AFUE
          - Heating Fuel|Natural Gas
        costs:
          - value:
            multiplier:
        lifetime:
      - &MSHP_SEER15_9HSPF_df_for_ng_furnace_76AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|No
          - HVAC Heating Efficiency|Fuel Furnace, 76% AFUE
          - Heating Fuel|Natural Gas
        costs:
          - value:
            multiplier:
        lifetime:
      - &MSHP_SEER15_9HSPF_df_for_ng_furnace_80AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|No
          - HVAC Heating Efficiency|Fuel Furnace, 80% AFUE
          - Heating Fuel|Natural Gas
        costs:
          - value:
            multiplier:
        lifetime:
      - &MSHP_SEER15_9HSPF_df_for_ng_furnace_92AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|No
          - HVAC Heating Efficiency|Fuel Furnace, 92.5% AFUE
          - Heating Fuel|Natural Gas
        costs:
          - value:
            multiplier:
        lifetime:
      - &MSHP_SEER15_9HSPF_df_for_ng_wffurnace_60AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|No
          - HVAC Heating Efficiency|Fuel Wall/Floor Furnace, 60% AFUE
          - Heating Fuel|Natural Gas
        costs:
          - value:
            multiplier:
        lifetime:
      - &MSHP_SEER15_9HSPF_df_for_ng_wffurnace_68AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|No
          - HVAC Heating Efficiency|Fuel Wall/Floor Furnace, 68% AFUE
          - Heating Fuel|Natural Gas
        costs:
          - value:
            multiplier:
        lifetime:
      - &MSHP_SEER15_9HSPF_df_for_propane_boiler_76AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|No
          - HVAC Heating Efficiency|Fuel Boiler, 76% AFUE
          - Heating Fuel|Propane
        costs:
          - value:
            multiplier:
        lifetime:
      - &MSHP_SEER15_9HSPF_df_for_propane_boiler_80AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|No
          - HVAC Heating Efficiency|Fuel Boiler, 80% AFUE
          - Heating Fuel|Propane
        costs:
          - value:
            multiplier:
        lifetime:
      - &MSHP_SEER15_9HSPF_df_for_propane_boiler_90AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|No
          - HVAC Heating Efficiency|Fuel Boiler, 90% AFUE
          - Heating Fuel|Propane
        costs:
          - value:
            multiplier:
        lifetime:
      - &MSHP_SEER15_9HSPF_df_for_propane_furnace_60AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|No
          - HVAC Heating Efficiency|Fuel Furnace, 60% AFUE
          - Heating Fuel|Propane
        costs:
          - value:
            multiplier:
        lifetime:
      - &MSHP_SEER15_9HSPF_df_for_propane_furnace_76AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|No
          - HVAC Heating Efficiency|Fuel Furnace, 76% AFUE
          - Heating Fuel|Propane
        costs:
          - value:
            multiplier:
        lifetime:
      - &MSHP_SEER15_9HSPF_df_for_propane_furnace_80AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|No
          - HVAC Heating Efficiency|Fuel Furnace, 80% AFUE
          - Heating Fuel|Propane
        costs:
          - value:
            multiplier:
        lifetime:
      - &MSHP_SEER15_9HSPF_df_for_propane_furnace_92AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|No
          - HVAC Heating Efficiency|Fuel Furnace, 92.5% AFUE
          - Heating Fuel|Propane
        costs:
          - value:
            multiplier:
        lifetime:
      - &MSHP_SEER15_9HSPF_df_for_propane_wffurnace_60AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|No
          - HVAC Heating Efficiency|Fuel Wall/Floor Furnace, 60% AFUE
          - Heating Fuel|Propane
        costs:
          - value:
            multiplier:
        lifetime:
      - &MSHP_SEER15_9HSPF_df_for_propane_wffurnace_68AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|No
          - HVAC Heating Efficiency|Fuel Wall/Floor Furnace, 68% AFUE
          - Heating Fuel|Propane
        costs:
          - value:
            multiplier:
        lifetime:
      - &MSHP_SEER15_9HSPF_df_for_fueloil_boiler_76AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|No
          - HVAC Heating Efficiency|Fuel Boiler, 76% AFUE
          - Heating Fuel|Fuel Oil
        costs:
          - value:
            multiplier:
        lifetime:
      - &MSHP_SEER15_9HSPF_df_for_fueloil_boiler_80AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|No
          - HVAC Heating Efficiency|Fuel Boiler, 80% AFUE
          - Heating Fuel|Fuel Oil
        costs:
          - value:
            multiplier:
        lifetime:
      - &MSHP_SEER15_9HSPF_df_for_fueloil_boiler_90AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|No
          - HVAC Heating Efficiency|Fuel Boiler, 90% AFUE
          - Heating Fuel|Fuel Oil
        costs:
          - value:
            multiplier:
        lifetime:
      - &MSHP_SEER15_9HSPF_df_for_fueloil_furnace_60AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|No
          - HVAC Heating Efficiency|Fuel Furnace, 60% AFUE
          - Heating Fuel|Fuel Oil
        costs:
          - value:
            multiplier:
        lifetime:
      - &MSHP_SEER15_9HSPF_df_for_fueloil_furnace_76AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|No
          - HVAC Heating Efficiency|Fuel Furnace, 76% AFUE
          - Heating Fuel|Fuel Oil
        costs:
          - value:
            multiplier:
        lifetime:
      - &MSHP_SEER15_9HSPF_df_for_fueloil_furnace_80AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|No
          - HVAC Heating Efficiency|Fuel Furnace, 80% AFUE
          - Heating Fuel|Fuel Oil
        costs:
          - value:
            multiplier:
        lifetime:
      - &MSHP_SEER15_9HSPF_df_for_fueloil_furnace_92AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|No
          - HVAC Heating Efficiency|Fuel Furnace, 92.5% AFUE
          - Heating Fuel|Fuel Oil
        costs:
          - value:
            multiplier:
        lifetime:
      - &MSHP_SEER15_9HSPF_df_for_fueloil_wffurnace_60AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|No
          - HVAC Heating Efficiency|Fuel Wall/Floor Furnace, 60% AFUE
          - Heating Fuel|Fuel Oil
        costs:
          - value:
            multiplier:
        lifetime:
      - &MSHP_SEER15_9HSPF_df_for_fueloil_wffurnace_68AFUE
        option:
        apply_logic:
          - HVAC Has Ducts|No
          - HVAC Heating Efficiency|Fuel Wall/Floor Furnace, 68% AFUE
          - Heating Fuel|Fuel Oil
        costs:
          - value:
            multiplier:
        lifetime:
  - upgrade_name: Universal HPWHs
    options:
      #All homes get either a 50 gal 3.45 UEF water heater, a 66 gal 3.35 UEF water heater, or a 80 gal 3.45 UEF water heater, depending on occupants or bedrooms
      - &HPWH_50gal_all
        option: Water Heater Efficiency|Electric Heat Pump, 50 gal, 3.45 UEF #Will this also change any necessary other things, like water heater fuel?
        apply_logic: 
          and:
            - or:
              - Water Heater Efficiency|Electric Heat Pump, 80 gal
              - Water Heater Efficiency|Electric Premium
              - Water Heater Efficiency|Electric Standard #note: not upgrading electric tankless as they are generally due to space constraints
              - Water Heater Efficiency|FIXME Fuel Oil Indirect
              - Water Heater Efficiency|Fuel Oil Premium
              - Water Heater Efficiency|Fuel Oil Standard
              - Water Heater Efficiency|Natural Gas Premium
              - Water Heater Efficiency|Natural Gas Standard
              - Water Heater Efficiency|Natural Gas Tankless
              - Water Heater Efficiency|Other Fuel
              - Water Heater Efficiency|Propane Premium
              - Water Heater Efficiency|Propane Standard
              - Water Heater Efficiency|Propane Tankless
            - or:
              - Bedrooms|1
              - Bedrooms|2
              - Bedrooms|3
        costs:
          - value: 
            multiplier: Fixed (1)
        lifetime: 12
      - &HPWH_66gal_all
        option: Water Heater Efficiency|Electric Heat Pump, 66 gal, 3.35 UEF
        apply_logic: 
          and:
            - or:
              - Water Heater Efficiency|Electric Heat Pump, 80 gal
              - Water Heater Efficiency|Electric Premium
              - Water Heater Efficiency|Electric Standard
              - Water Heater Efficiency|FIXME Fuel Oil Indirect
              - Water Heater Efficiency|Fuel Oil Premium
              - Water Heater Efficiency|Fuel Oil Standard
              - Water Heater Efficiency|Natural Gas Premium
              - Water Heater Efficiency|Natural Gas Standard
              - Water Heater Efficiency|Natural Gas Tankless
              - Water Heater Efficiency|Other Fuel
              - Water Heater Efficiency|Propane Premium
              - Water Heater Efficiency|Propane Standard
              - Water Heater Efficiency|Propane Tankless
            - Bedrooms|4
        costs:
          - value: 
            multiplier: Fixed (1)
        lifetime: 12
      - &HPWH_80gal_all
        option: Water Heater Efficiency|Electric Heat Pump, 80 gal, 3.45 UEF
        apply_logic: 
          and:
            - or:
              - Water Heater Efficiency|Electric Heat Pump, 80 gal
              - Water Heater Efficiency|Electric Premium
              - Water Heater Efficiency|Electric Standard
              - Water Heater Efficiency|FIXME Fuel Oil Indirect
              - Water Heater Efficiency|Fuel Oil Premium
              - Water Heater Efficiency|Fuel Oil Standard
              - Water Heater Efficiency|Natural Gas Premium
              - Water Heater Efficiency|Natural Gas Standard
              - Water Heater Efficiency|Natural Gas Tankless
              - Water Heater Efficiency|Other Fuel
              - Water Heater Efficiency|Propane Premium
              - Water Heater Efficiency|Propane Standard
              - Water Heater Efficiency|Propane Tankless
            - Bedrooms|5
        costs:
          - value: 3828
            multiplier: Fixed (1)
        lifetime: 12
  - upgrade_name: Minimum-efficiency all-electric homes
      #No enclosure measures
      #No upgrading of electric loads
    options:
      #Minimum-efficiency heat pump (from package 3) for homes with non-electric heating
      #HPWH for those that currently have non-electric water heating
      - &HPWH_50gal_fuelswitch
        option: Water Heater Efficiency|Electric Heat Pump, 50 gal, 3.45 UEF #Will this also change any necessary other things, like water heater fuel?
        apply_logic: 
          and:
            - or: &non-elec_WH
              - Water Heater Efficiency|FIXME Fuel Oil Indirect
              - Water Heater Efficiency|Fuel Oil Premium
              - Water Heater Efficiency|Fuel Oil Standard
              - Water Heater Efficiency|Natural Gas Premium
              - Water Heater Efficiency|Natural Gas Standard
              - Water Heater Efficiency|Natural Gas Tankless
              - Water Heater Efficiency|Other Fuel
              - Water Heater Efficiency|Propane Premium
              - Water Heater Efficiency|Propane Standard
              - Water Heater Efficiency|Propane Tankless
            - or:
              - Bedrooms|1
              - Bedrooms|2
              - Bedrooms|3
        costs:
          - value: 
            multiplier: Fixed (1)
        lifetime: 12
      - &HPWH_66gal_fuelswitch
        option: Water Heater Efficiency|Electric Heat Pump, 66 gal, 3.35 UEF
        apply_logic: 
          and:
            - or:
              - *non-elec_WH
            - Bedrooms|4
        costs:
          - value: 
            multiplier: Fixed (1)
        lifetime: 12
      - &HPWH_80gal_fuelswitch
        option: Water Heater Efficiency|Electric Heat Pump, 80 gal, 3.45 UEF
        apply_logic: 
          and:
            - or: non-elec_WH
            - Bedrooms|5
        costs:
          - value: 3828
            multiplier: Fixed (1)
        lifetime: 12
      #electric resistance dryer (CEF = 2.7) for those that currently have non-electric dryers
      - &clothes_dryer_electric_80pct
        option: Clothes Dryer|Electric, 80% Usage
        apply_logic:
          or: 
            - Clothes Dryer|Gas, 80% Usage
            - Clothes Dryer|Propane, 80% Usage
        costs:
          - value: 
            multiplier: Fixed (1)
        lifetime: 13
      - &clothes_dryer_electric_100pct
        option: Clothes Dryer|Electric, 100% Usage
        apply_logic:
          or: 
            - Clothes Dryer|Gas, 100% Usage
            - Clothes Dryer|Propane, 100% Usage
        costs:
          - value:
            multiplier: Fixed (1)
        lifetime: 13
      - &clothes_dryer_electric_120pct
        option: Clothes Dryer|Electric, 120% Usage
        apply_logic:
          or: 
            - Clothes Dryer|Gas, 120% Usage
            - Clothes Dryer|Propane, 120% Usage
        costs:
          - value:
            multiplier: Fixed (1)
        lifetime: 13
      #electric range (cooktop_eff = 0.74, oven_ef = 0.11) for homes that currently have non-electric
      - &elec_range_80pct
        option: Cooking Range|Electric, 80% Usage
        apply_logic:
          or:
            - Cooking Range|Gas, 80% Usage
            - Cooking Range|Propane, 80% Usage
        costs:
          - value:
            multiplier: Fixed (1)
        lifetime: 
      - &elec_range_100pct
        option: Cooking Range|Electric, 100% Usage
        apply_logic:
          or:
            - Cooking Range|Gas, 100% Usage
            - Cooking Range|Propane, 100% Usage
        costs:
          - value:
            multiplier: Fixed (1)
        lifetime: 
      - &elec_range_120pct
        option: Cooking Range|Electric, 120% Usage
        apply_logic:
          or:
            - Cooking Range|Gas, 120% Usage
            - Cooking Range|Propane, 120% Usage
        costs:
          - value:
            multiplier: Fixed (1)
        lifetime: 
  - upgrade_name: Highly-efficient all-electric homes
      #No enclosure measures
    options:
      #High efficiency heat pump (from package 4) for all homes with non-electric heating or less-efficient electric heating
      #HPWH for all homes with non-electric water heating or less-efficient electric water heating
      - *HPWH_50gal_all
      - *HPWH_66gal_all
      - *HPWH_80gal_all
      #Ventless heat pump dryer (CEF=5.2) for all homes with non-electric dryers or less-efficient electric dryers
      - &clothes_dryer_ductlesshp_80pct
        option: Clothes Dryer|Electric, Premium, Heat Pump, Ventless, 80% Usage
        apply_logic:
          or: 
            - Clothes Dryer|Electric, 80% Usage
            - Clothes Dryer|Gas, 80% Usage
            - Clothes Dryer|Propane, 80% Usage
        costs:
          - value: 1966
            multiplier: Fixed (1)
        lifetime: 13
      - &clothes_dryer_ductlesshp_100pct
        option: Clothes Dryer|Electric, Premium, Heat Pump, Ventless, 100% Usage
        apply_logic:
          or: 
            - Clothes Dryer|Electric, 100% Usage
            - Clothes Dryer|Gas, 100% Usage
            - Clothes Dryer|Propane, 100% Usage
        costs:
          - value: 1966
            multiplier: Fixed (1)
        lifetime: 13
      - &clothes_dryer_ductlesshp_120pct
        option: Clothes Dryer|Electric, Premium, Heat Pump, Ventless, 120% Usage
        apply_logic:
          or: 
            - Clothes Dryer|Electric, 120% Usage
            - Clothes Dryer|Gas, 120% Usage
            - Clothes Dryer|Propane, 120% Usage
        costs:
          - value: 1966
            multiplier: Fixed (1)
        lifetime: 13
      #Induction range (cooktop_ef = 0.84, oven_ef = 0.11) for all homes
      - &elec_induction_range_80pct
        option: Cooking Range|Electric, Induction, 80% Usage
        apply_logic:
          or:
            - Cooking Range|Gas, 80% Usage
            - Cooking Range|Propane, 80% Usage
            - Cooking Range|Electric, 80% Usage
        costs:
          - value: 1420.26
            multiplier: Fixed (1)
        lifetime: 999
      - &elec_induction_range_100pct
        option: Cooking Range|Electric, Induction, 100% Usage
        apply_logic:
          or:
            - Cooking Range|Gas, 100% Usage
            - Cooking Range|Propane, 100% Usage
            - Cooking Range|Electric, 100% Usage
        costs:
          - value: 1420.26
            multiplier: Fixed (1)
        lifetime: 999
      - &elec_induction_range_120pct
        option: Cooking Range|Electric, Induction, 120% Usage
        apply_logic:
          or:
            - Cooking Range|Gas, 120% Usage
            - Cooking Range|Propane, 120% Usage
            - Cooking Range|Electric, 120% Usage
        costs:
          - value: 1420.26
            multiplier: Fixed (1)
        lifetime: 999
  - upgrade_name: Highly-efficient all-electric homes + basic enclosure package (packages 1 & 8)
    options:
      #package 1
      - *attic_insulation_IECC_CZ1A
      - *attic_insulation_IECC_CZ2A-2B-3A-3B-3C
      - *attic_insulation_IECC_CZ4A-4B-4C-5A-5B-6A-6B-7A-7B
      - *infiltration_30pct_reduction
      - *ducts_category1
      - *ducts_category2
      - *ducts_category3
      - *ducts_category4
      - *ducts_category5
      - *ducts_category6
      - *ducts_category7
      - *Drill-and-fill
      #package 8
  - upgrade_name: Highly-efficient all-electric homes + enhanced enclosure package (packages 2 & 8)
    options:
      #package 2
      - *attic_insulation_IECC_CZ1A
      - *attic_insulation_IECC_CZ2A-2B-3A-3B-3C
      - *attic_insulation_IECC_CZ4A-4B-4C-5A-5B-6A-6B-7A-7B
      - *infiltration_30pct_reduction
      - *ducts_category1
      - *ducts_category2
      - *ducts_category3
      - *ducts_category4
      - *ducts_category5
      - *ducts_category6
      - *ducts_category7
      - *Drill-and-fill
      - *foundation_wall_insulation
      - *seal_vented_crawlspaces 
      - *roof_insulation_to_R30
      #package 8
