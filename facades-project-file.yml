schema_version: '0.3'
buildstock_directory: /home/epresent/resstock  # Relative to this file or absolute
project_directory: project_national  # Relative to buildstock_directory
output_directory: /projects/resilience/facades/test10No1
weather_files_path: /shared-projects/buildstock/weather/BuildStock_2012_FIPS.zip  # Relative to this file or absolute path to zipped weather files

sampler:
  type: residential_quota_downselect
  args:
    n_datapoints: 10
    logic:
      - Vacancy Status|Occupied
    resample: false

workflow_generator:
  type: residential_default
  args:
    timeseries_csv_export:
      reporting_frequency: Hourly
      include_enduse_subcategories: true
    residential_simulation_controls:
      calendar_year: 2012

baseline:
  n_buildings_represented: 133172057  # Total number of residential dwelling units in contiguous United States, including unoccupied units, resulting from a census tract level query of ACS 5-yr 2016 (i.e. 2012-2016), using this script: https://github.com/NREL/resstock-estimation/blob/master/sources/spatial/tsv_maker.py.

upgrades:
  - upgrade_name: Working list of all upgrades
    options:
      - &decrease_ACH50_19% #for 1" or 2" polyiso without window upgrade
      - &decrease_ACH50_30% #for low-E storms on single paane without insulation upgrade
      - &decrease_ACH50_10% #for low-E storms on double pane without insulation upgrade
      - &decrease_ACH50_19%_and_30% # for polyiso, + low-E storms on single pane
      - &decrease_ACH50_19%_and_10% # for polyiso, + low-E storms on double pane
      - &polyiso_1inch
        #1" polyiso continuous insulation, R-6.5, 19% whole home reduction in ACH50, $1.40 per sq ft exterior wall, for all homes older than 1990 with <R-19 wall insulation
        option: Insulation Wall| #add R-6.5 to all wall types. Will need to edit options lookup
        apply_logic:
          and:
            - not:
              - Insulation Wall|Wood Stud, R-19
              - Insulation Wall|CMU, 6-in Hollow, R-19
              - Vintage|1990s
              - Vintage|2000s
              - Vintage|2010s
        costs:
          - value: 1.4
            multiplier: #exterior wall area
        lifetime: 999 #should be unimportant because we are doing all the econ stuff with postprocessing?
      - &polyiso_2inch
        #1" polyiso continuous insulation, R-13, 19% whole home reduction in ACH50, $1.90 per sq ft exterior wall, for all homes older than 1990 with <R-19 wall insulation
        option: Insulation Wall| #add R-13 to all wall types. Will need to edit options lookup
        apply_logic:
          and:
            - not:
              - Insulation Wall|Wood Stud, R-19
              - Insulation Wall|CMU, 6-in Hollow, R-19
              - Vintage|1990s
              - Vintage|2000s
              - Vintage|2010s
        costs:
          - value: 1.9
            multiplier: #exterior wall area
        lifetime: 999 #should be unimportant because we are doing all the econ stuff with postprocessing?
      - &siding_upgrade #not including costs for these
        option: siding|Fiber-cement, light #update when actual option names are available
        apply_logic:
          or:
            - siding|aluminum, light
            - siding|fiber-cement, light
            - siding|wood, medium-dark
        option: siding|stucco, light
        apply_logic:
          or:
            - siding|brick, light
            - siding|brick, medium-dark
            - siding|concrete
            - siding|concrete, block
            - siding|stucco, light
        option: siding|vinyl, light
        apply_logic:
          or:
            - siding|shingle, asbestos
            - siding|shingle, composition
            - siding|vinyl, light
      - &low-e_storms
        option: Windows| #create appropriate options
        apply_logic: 
          or: # apply to all single pane, all double pane with aluminum frame, and single pane with clear storm windows
            - Windows|Clear, Single, Metal
            - Windows|Clear, Single, Non-metal
            - Windows|Clear, Double, Metal, Air
            - Windows| #whatever we come up with to represent single pane with clear storm
        costs:
          - value: 23
            multiplier: #sq ft window area
      - &triple_window
        option: Windows|Low-E, Triple, Non-metal, Air, L-Gain #do we want the high gain, low gain, or contingent?
        apply_logic:
          or:
            - Windows|Clear, Single, Metal
            - Windows|Clear, Single, Non-metal
            - Windows|Clear, Double, Metal, Air
            - Windows| #whatever we come up with to represent single pane with clear storm
        costs:
          - value: 62
            multiplier: #sq ft window area
      - &low-e_storms_w_low_SHGC_and_shading
        option: Windows| #create appropriate option
        apply_logic:
          or:
            - Windows|Clear, Single, Metal
            - Windows|Clear, Single, Non-metal
            - Windows|Clear, Double, Metal, Air
            - Windows| #whatever we come up with to represent single pane with clear storm
        costs:
          - value: 25 #23 for low-e, 2 for shgc, ? for shading
            multiplier: #sq ft window area

eagle:
  n_jobs: 8
  minutes_per_sim: 30
  account: resilience
  sampling:
    time: 60
  postprocessing:
    time: 180
    n_workers: 1

aws:
  # The job_identifier should be unique, start with alpha, not include dashes, and limited to 10 chars or data loss can occur
  job_identifier: fac_1
  s3:
    bucket: resbldg-datasets
    prefix: facades/test10No1
  emr:
    worker_instance_count: 1
  region: us-west-2
  use_spot: true
  batch_array_size: 1000
  # To receive email updates on job progress accept the request to receive emails that will be sent from Amazon
  notifications_email: noel.merket@nrel.gov

postprocessing:
  aws:
    region_name: 'us-west-2'
    s3:
      bucket: resbldg-datasets
      prefix: resstock-athena/facades-test10No1
    athena:
      glue_service_role: service-role/AWSGlueServiceRole-default
      database_name: resstock-test10No1
      max_crawling_time: 1200 #time to wait for the crawler to complete before aborting it