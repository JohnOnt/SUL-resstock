schema_version: '0.3'
buildstock_directory: ../resstock  # Relative to this file or absolute
project_directory: project_national  # Relative to buildstock_directory
output_directory: ./abc_typology_test
# weather_files_url: https://s3.amazonaws.com/epwweatherfiles/project_resstock_national.zip
# weather_files_path: /shared-projects/buildstock/weather/BuildStock_TMY3_FIPS.zip  # Relative to this file or absolute path to zipped weather files
# weather_files_path: ./resstock_national_weather_refactored.zip  # Relative to this file or absolute path to zipped weather files
weather_files_path: ./BuildStock_TMY3_FIPS.zip
baseline:
  n_buildings_represented: 14600

sampler: 
  type: residential_quota
  args: 
    n_datapoints: 10

workflow_generator: 
  type: residential_default
  args: 
    timeseries_csv_export: 
      reporting_frequency: Hourly
      include_enduse_subcategories: true
    # residential_simulation_controls: 
    #   timesteps_per_hr: 6
    #   begin_month: 1
    #   begin_day_of_month: 1
    #   end_month: 12
    #   end_day_of_month: 31
    #   calendar_year: 2007

eagle:
  account: abctypol
  n_jobs: 500
  minutes_per_sim: 5
  sampling:
    time: 20
  postprocessing:
    time: 60

upgrades:
  - upgrade_name: Package 1a
    options:

      # Clothes washer Upgrade
      - &clothes_washer_80pct
        option: Clothes Washer|EnergyStar Most Efficient, 80% Usage
        apply_logic: Clothes Washer|Standard, 80% Usage
        costs:
          - value: 72
            multiplier: Fixed (1)
        lifetime: 14
      - &clothes_washer_100pct
        option: Clothes Washer|EnergyStar Most Efficient, 100% Usage
        apply_logic: Clothes Washer|Standard, 100% Usage
        costs:
          - value: 72
            multiplier: Fixed (1)
        lifetime: 14
      - &clothes_washer_120pct
        option: Clothes Washer|EnergyStar Most Efficient, 120% Usage
        apply_logic: Clothes Washer|Standard, 120% Usage
        costs:
          - value: 72
            multiplier: Fixed (1)
        lifetime: 14
      
      # Dishwasher Upgrade
      - &dishwasher_80pct
        option: Dishwasher|144 Rated kWh, 80% Usage
        apply_logic:
          or: 
            - Dishwasher|290 Rated kWh, 80% Usage
            - Dishwasher|318 Rated kWh, 80% Usage
        costs:
          - value: 1000
            multiplier: Fixed (1)
        lifetime: 11
      - &dishwasher_100pct
        option: Dishwasher|144 Rated kWh, 100% Usage
        apply_logic:
          or: 
            - Dishwasher|290 Rated kWh, 100% Usage
            - Dishwasher|318 Rated kWh, 100% Usage
        costs:
          - value: 1000
            multiplier: Fixed (1)
        lifetime: 11
      - &dishwasher_120pct
        option: Dishwasher|144 Rated kWh, 120% Usage
        apply_logic:
          or: 
            - Dishwasher|290 Rated kWh, 120% Usage
            - Dishwasher|318 Rated kWh, 120% Usage
        costs:
          - value: 1000
            multiplier: Fixed (1) 
        lifetime: 11
      
      # Refrigerator Upgrade
      - &refrigerator
        option: Refrigerator|EF 21.9
        apply_logic:
          not: Refrigerator|EF 21.9
        costs:
          - value: 670
            multiplier: Fixed (1)
        lifetime: 17.4
      
      # Clothes Dryer Upgrade
      - &clothes_dryer_80pct
        option: Clothes Dryer|Electric, Premium, Heat Pump, Ventless, 80% Usage
        apply_logic:
          or: 
            - Clothes Dryer|Electric, 80% Usage
            - Clothes Dryer|Gas, 80% Usage
            - Clothes Dryer|Propane, 80% Usage
        costs:
          - value: 1200
            multiplier: Fixed (1)
        lifetime: 13
      - &clothes_dryer_100pct
        option: Clothes Dryer|Electric, Premium, Heat Pump, Ventless, 100% Usage
        apply_logic:
          or: 
            - Clothes Dryer|Electric, 100% Usage
            - Clothes Dryer|Gas, 100% Usage
            - Clothes Dryer|Propane, 100% Usage
        costs:
          - value: 1200
            multiplier: Fixed (1)
        lifetime: 13
      - &clothes_dryer_120pct
        option: Clothes Dryer|Electric, Premium, Heat Pump, Ventless, 120% Usage
        apply_logic:
          or: 
            - Clothes Dryer|Electric, 120% Usage
            - Clothes Dryer|Gas, 120% Usage
            - Clothes Dryer|Propane, 120% Usage
        costs:
          - value: 1200
            multiplier: Fixed (1)
        lifetime: 13
      
      # Lighting Upgrade
      - &lighting
        option: Lighting|100% LED, High Efficacy
        apply_logic:
          or:
            - Lighting|100% Incandescent
            - Lighting|60% CFL Hardwired, 34% CFL Plugin
            - Lighting|60% LED Hardwired, 34% CFL Plugin
            - Lighting|60% CFL
            - Lighting|100% CFL
            - Lighting|100% LED, Low Efficacy            
        costs:
          - value: 0.40
            multiplier: Floor Area, Lighting (ft^2)
        lifetime: 78.28
        
      # Cooking upgrade
      - &cooking_range
        option: Cooking Range|Electric, Induction
        apply_logic:
          or:
            - Cooking Range|Electric, 80% Usage
            - Cooking Range|Electric, 100% Usage
            - Cooking Range|Electric, 120% Usage
        costs:
          - value: 0 
            multiplier: Fixed (1)
        lifetime: 999

      # Ducts sealing and insulation Upgrade to R-8, 10% leakage
      - &ducts_category1
        option: Ducts|10% Leakage, R-8
        apply_logic:
          or: 
            - Ducts|85% Leakage, Uninsulated
            - Ducts|53% Leakage, Uninsulated
            - Ducts|34% Leakage, Uninsulated
            - Ducts|30% Leakage, Uninsulated
            - Ducts|85% Leakage, R-4
            - Ducts|85% Leakage, R-6
            - Ducts|53% Leakage, R-4
            - Ducts|53% Leakage, R-6
            - Ducts|34% Leakage, R-4
            - Ducts|34% Leakage, R-6
            - Ducts|30% Leakage, R-4
            - Ducts|30% Leakage, R-6            
        costs:
          - value: 2.2
            multiplier: Duct Surface Area (ft^2)
        lifetime: 30
      - &ducts_category2
        option: Ducts|10% Leakage, R-8
        apply_logic:
          or: 
            - Ducts|85% Leakage, R-8
            - Ducts|53% Leakage, R-8
            - Ducts|34% Leakage, R-8
            - Ducts|30% Leakage, R-8   
        costs:
          - value: 0.81
            multiplier: Duct Surface Area (ft^2)
        lifetime: 30
      - &ducts_category3
        option: Ducts|10% Leakage, R-8
        apply_logic:
          or: 
            - Ducts|24% Leakage, Uninsulated
            - Ducts|24% Leakage, R-4
            - Ducts|24% Leakage, R-6
            - Ducts|20% Leakage, Uninsulated
            - Ducts|20% Leakage, R-4
            - Ducts|20% Leakage, R-6 
        costs:
          - value: 0.4
            multiplier: Duct Surface Area (ft^2)
        lifetime: 30
      - &ducts_category4
        option: Ducts|10% Leakage, R-8
        apply_logic:
          or: 
            - Ducts|24% Leakage, R-8
            - Ducts|20% Leakage, R-8
        costs:
          - value: 0.4
            multiplier: Duct Surface Area (ft^2)
        lifetime: 30
      - &ducts_category5
        option: Ducts|10% Leakage, R-8
        apply_logic:
          or: 
            - Ducts|15% Leakage, Uninsulated
            - Ducts|15% Leakage, R-4
            - Ducts|15% Leakage, R-6
            - Ducts|14% Leakage, Uninsulated
            - Ducts|14% Leakage, R-4
            - Ducts|14% Leakage, R-6
            - Ducts|15% Leakage, R-6, 50% Surface Area, 1 return
        costs:
          - value: 1.6
            multiplier: Duct Surface Area (ft^2)
        lifetime: 30
      - &ducts_category6
        option: Ducts|10% Leakage, R-8
        apply_logic:
          or: 
            - Ducts|15% Leakage, R-8
            - Ducts|14% Leakage, R-8
        costs:
          - value: 0.2
            multiplier: Duct Surface Area (ft^2)
        lifetime: 30
      - &ducts_category7
        option: Ducts|10% Leakage, R-8
        apply_logic:
          or: 
            - Ducts|10% Leakage, Uninsulated
            - Ducts|10% Leakage, R-4
            - Ducts|10% Leakage, R-6
        costs:
          - value: 1.4
            multiplier: Duct Surface Area (ft^2)
        lifetime: 30

      # Heat Pump Water Heater Upgrade
      # - &water_heater_efficiency_50gal
      #   option: Water Heater Efficiency|Electric Heat Pump, 50 gal
      #   apply_logic:
      #     - not: 
      #       - Water Heater Efficiency|Electric Heat Pump, 50 gal
      #       - Water Heater Efficiency|Electric Heat Pump, 50 gal, 140F
      #       - Water Heater Efficiency|Electric Heat Pump, 50 gal, In Confined Space
      #       - Water Heater Efficiency|Electric Heat Pump, 80 gal
      #     - Water Heater In Unit|Yes
      #   costs:
      #     - value: 1700
      #       multiplier: Fixed (1)
      #   lifetime: 12
      - &water_heater_efficiency_80gal
        option: Water Heater Efficiency|Electric Heat Pump, 80 gal
        apply_logic:
          - not: 
            - Water Heater Efficiency|Electric Heat Pump, 50 gal
            - Water Heater Efficiency|Electric Heat Pump, 50 gal, 140F
            - Water Heater Efficiency|Electric Heat Pump, 50 gal, In Confined Space
            - Water Heater Efficiency|Electric Heat Pump, 80 gal
        costs:
          - value: 2000
            multiplier: Fixed (1)
        lifetime: 12
      
      # HVAC Upgrade
      - &HVAC_efficiency_ASHP_duct
        option: HVAC Heating Efficiency|ASHP, SEER 22, 10 HSPF, max load
        apply_logic:
          - not: HVAC Heating Efficiency|ASHP, SEER 22, 10 HSPF, max load
          - HVAC Has Ducts|Yes
        costs:
          - value: 4600
            multiplier: Fixed (1)
          - value: 42
            multiplier: Size, Heating System (kBtu/h)
        lifetime: 15
      - &HVAC_efficiency_ASHP_ductless
        option: HVAC Heating Efficiency|MSHP, SEER 29.3, 14 HSPF, max load
        apply_logic:
          - not: HVAC Heating Efficiency|MSHP, SEER 29.3, 14 HSPF, max load
          - HVAC Has Ducts|No
        costs:
          - value: 2510
            multiplier: Fixed (1)
          - value: 95
            multiplier: Size, Heating System (kBtu/h)
        lifetime: 15
      

  - upgrade_name: Package 1b
    options: 
      # Same packages as Package 1a
      - *clothes_washer_80pct
      - *clothes_washer_100pct
      - *clothes_washer_120pct
      - *dishwasher_80pct
      - *dishwasher_100pct
      - *dishwasher_120pct
      - *refrigerator
      - *clothes_dryer_80pct
      - *clothes_dryer_100pct
      - *clothes_dryer_120pct
      - *lighting
      - *cooking_range
      - *ducts_category1
      - *ducts_category2
      - *ducts_category3
      - *ducts_category4
      - *ducts_category5
      - *ducts_category6
      - *ducts_category7
      - *water_heater_efficiency_80gal

      # HVAC Upgrade
      - &HVAC_efficiency_ASHP_duct_1b
        option: HVAC Heating Efficiency|ASHP, SEER 22, 10 HSPF, max load, no aux size
        apply_logic:
          - not: HVAC Heating Efficiency|ASHP, SEER 22, 10 HSPF, max load, no aux size
          - HVAC Has Ducts|Yes
        costs:
          - value: 4600
            multiplier: Fixed (1)
          - value: 42
            multiplier: Size, Heating System (kBtu/h)
        lifetime: 15
      - &HVAC_efficiency_ASHP_ductless_1b
        option: HVAC Heating Efficiency|MSHP, SEER 29.3, 14 HSPF, max load, no aux size
        apply_logic:
          - not: HVAC Heating Efficiency|MSHP, SEER 29.3, 14 HSPF, max load, no aux size
          - HVAC Has Ducts|No
        costs:
          - value: 2510
            multiplier: Fixed (1)
          - value: 95
            multiplier: Size, Heating System (kBtu/h)
        lifetime: 15
      
      # ERV upgrade
      - &ERVupgrade_sensible_60pct
        option: Mechanical Ventilation|ERV, 60%, 2010 ASHRAE 62.2
        apply_logic:
          and: 
            - ASHRAE IECC Climate Zone 2004|1A
            - ASHRAE IECC Climate Zone 2004|2A
        costs:
          - value: 940
            multiplier: Fixed (1)
        lifetime: 18
      - &ERVupgrade_sensible_50pct
        option: Mechanical Ventilation|ERV, 50%, 2010 ASHRAE 62.2
        apply_logic:
          and: 
            - ASHRAE IECC Climate Zone 2004|2B
        costs: 
          - value: 940
            multiplier: Fixed (1)
        lifetime: 18
      - &ERVupgrade_sensible_70pct
        option: Mechanical Ventilation|ERV, 70%, 2010 ASHRAE 62.2
        apply_logic:
          and: 
            - ASHRAE IECC Climate Zone 2004|3A
        costs: 
          - value: 940
            multiplier: Fixed (1)
        lifetime: 18
      - &ERVupgrade_sensible_80pct
        option: Mechanical Ventilation|ERV, 70%, 2010 ASHRAE 62.2
        apply_logic:
          and: 
            - ASHRAE IECC Climate Zone 2004|4A
        costs: 
          - value: 940
            multiplier: Fixed (1)
        lifetime: 18

      # HRV upgrade
      - &HRVupgrade_sensible_60pct
        option: Mechanical Ventilation|HRV, 60%, 2010 ASHRAE 62.2
        apply_logic: 
          and:
            - ASHRAE IECC Climate Zone 2004|3C
        costs: 
          - value: 980
            multiplier: Fixed (1)
        lifetime: 18
      - &HRVupgrade_sensible_70pct
        option: Mechanical Ventilation|HRV, 70%, 2010 ASHRAE 62.2
        apply_logic: 
          and:
            - ASHRAE IECC Climate Zone 2004|3B
            - ASHRAE IECC Climate Zone 2004|4C
        costs: 
          - value: 980
            multiplier: Fixed (1)
        lifetime: 18
      - &HRVupgrade_sensible_75pct
        option: Mechanical Ventilation|HRV, 75%, 2010 ASHRAE 62.2
        apply_logic: 
          and:
            - ASHRAE IECC Climate Zone 2004|4B
        costs: 
          - value: 980
            multiplier: Fixed (1)
        lifetime: 18
      - &HRVupgrade_sensible_80pct
        option: Mechanical Ventilation|HRV, 80%, 2010 ASHRAE 62.2
        apply_logic: 
          and:
            - ASHRAE IECC Climate Zone 2004|5B
        costs: 
          - value: 980
            multiplier: Fixed (1)
        lifetime: 18
      - &HRVupgrade_sensible_85pct
        option: Mechanical Ventilation|HRV, 85%, 2010 ASHRAE 62.2
        apply_logic: 
          and:
            - ASHRAE IECC Climate Zone 2004|5A
            - ASHRAE IECC Climate Zone 2004|6A
            - ASHRAE IECC Climate Zone 2004|6B
            - ASHRAE IECC Climate Zone 2004|7A
            - ASHRAE IECC Climate Zone 2004|7B
        costs: 
          - value: 980
            multiplier: Fixed (1)
        lifetime: 18

  - upgrade_name: Package 2
    options: 
      # Same packages as Package 1a
      - *clothes_washer_80pct
      - *clothes_washer_100pct
      - *clothes_washer_120pct
      - *dishwasher_80pct
      - *dishwasher_100pct
      - *dishwasher_120pct
      - *refrigerator
      - *clothes_dryer_80pct
      - *clothes_dryer_100pct
      - *clothes_dryer_120pct
      - *lighting
      - *cooking_range
      - *ducts_category1
      - *ducts_category2
      - *ducts_category3
      - *ducts_category4
      - *ducts_category5
      - *ducts_category6
      - *ducts_category7
      - *water_heater_efficiency_80gal
      - *HVAC_efficiency_ASHP_duct
      - *HVAC_efficiency_ASHP_ductless
      - *ERVupgrade_sensible_60pct
      - *ERVupgrade_sensible_50pct
      - *ERVupgrade_sensible_70pct
      - *ERVupgrade_sensible_80pct
      - *HRVupgrade_sensible_60pct
      - *HRVupgrade_sensible_70pct
      - *HRVupgrade_sensible_75pct
      - *HRVupgrade_sensible_80pct
      - *HRVupgrade_sensible_85pct

      # Low-e storm upgrade
      # - &reference_options
      #   option: 
      #   apply_logic:
      #   costs:
      #     - value: 
      #       multiplier:
      #   lifetime:
      # - &reference_options
      #   option: 
      #   apply_logic:
      #   costs:
      #     - value: 
      #       multiplier:
      #   lifetime:
      # - &reference_options
      #   option: 
      #   apply_logic:
      #   costs:
      #     - value: 
      #       multiplier:
      #   lifetime:
      # - &reference_options
      #   option: 
      #   apply_logic:
      #   costs:
      #     - value: 
      #       multiplier:
      #   lifetime: