2023-09-07 19:01:19,503 - INFO - ---------------------------------------------------------
2023-09-07 19:01:19,503 - INFO - Downsampling buildstock for  north_birmingham  using method 1
2023-09-07 19:01:19,505 - INFO - ---------------------------------------------------------
2023-09-07 19:01:19,541 - INFO - Creating n>=1000 buildlstock by downsampling from: bst_to_search (550000 samples) 
while matching the marginal distribution of 13 key HCs from: bst_to_match (536 samples), 
['Income', 'ASHRAE IECC Climate Zone 2004', 'State', 'Geometry Building Type RECS', 'Heating Fuel', 'HVAC Cooling Type', 'Tenure', 'Water Heater Fuel', 'Vintage ACS', 'Geometry Floor Area Bin', 'HVAC Heating Type', 'Federal Poverty Level', 'Vacancy Status']
2023-09-07 19:01:19,543 - INFO - 
2023-09-07 19:01:19,545 - INFO - 
---- Attempt 1: downsample using 13 key HCs: ----
2023-09-07 19:01:19,646 - INFO -    Located 7823 positively weighted rows in bst_to_search
2023-09-07 19:01:19,647 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2023-09-07 19:01:19,671 - INFO - 

** Downsampled to: 1158 samples, by matching to: ['build_existing_model.income', 'build_existing_model.ashrae_iecc_climate_zone_2004', 'build_existing_model.state', 'build_existing_model.geometry_building_type_recs', 'build_existing_model.heating_fuel', 'build_existing_model.hvac_cooling_type', 'build_existing_model.tenure', 'build_existing_model.water_heater_fuel', 'build_existing_model.vintage_acs', 'build_existing_model.geometry_floor_area_bin', 'build_existing_model.hvac_heating_type', 'build_existing_model.federal_poverty_level', 'build_existing_model.vacancy_status']
2023-09-07 19:01:19,688 - INFO - 
 -> Step 3 : Weight Normalization
2023-09-07 19:01:19,690 - INFO - Checking marginals from weight_map of n=1158...
2023-09-07 19:01:19,694 - INFO -  [[ build_existing_model.income ]] 
2023-09-07 19:01:19,697 - INFO - 
                              matched     truth  pct_diff
build_existing_model.income                              
10000-14999                  0.072761  0.072761       0.0
100000-119999                0.065299  0.065299       0.0
120000-139999                0.041045  0.041045       0.0
140000-159999                0.024254  0.024254       0.0
15000-19999                  0.057836  0.057836       0.0
160000-179999                0.009328  0.009328       0.0
180000-199999                0.009328  0.009328       0.0
20000-24999                  0.052239  0.052239       0.0
200000+                      0.041045  0.041045       0.0
25000-29999                  0.052239  0.052239       0.0
30000-34999                  0.055970  0.055970      -0.0
35000-39999                  0.039179  0.039179       0.0
40000-44999                  0.041045  0.041045      -0.0
45000-49999                  0.042910  0.042910       0.0
50000-59999                  0.076493  0.076493       0.0
60000-69999                  0.061567  0.061567       0.0
70000-79999                  0.050373  0.050373       0.0
80000-99999                  0.095149  0.095149       0.0
<10000                       0.111940  0.111940       0.0

2023-09-07 19:01:19,700 - INFO -  [[ build_existing_model.ashrae_iecc_climate_zone_2004 ]] 
2023-09-07 19:01:19,704 - INFO - 
                                                    matched  truth  pct_diff
build_existing_model.ashrae_iecc_climate_zone_2004                          
3A                                                      1.0    1.0       0.0

2023-09-07 19:01:19,707 - INFO -  [[ build_existing_model.state ]] 
2023-09-07 19:01:19,710 - INFO - 
                            matched  truth  pct_diff
build_existing_model.state                          
AL                              1.0    1.0       0.0

2023-09-07 19:01:19,713 - INFO -  [[ build_existing_model.geometry_building_type_recs ]] 
2023-09-07 19:01:19,715 - INFO - 
                                                   matched     truth  pct_diff
build_existing_model.geometry_building_type_recs                              
Mobile Home                                       0.035448  0.035448       0.0
Multi-Family with 2 - 4 Units                     0.054104  0.054104       0.0
Multi-Family with 5+ Units                        0.199627  0.199627       0.0
Single-Family Attached                            0.018657  0.018657       0.0
Single-Family Detached                            0.692164  0.692164       0.0

2023-09-07 19:01:19,719 - INFO -  [[ build_existing_model.heating_fuel ]] 
2023-09-07 19:01:19,723 - INFO - 
                                    matched     truth  pct_diff
build_existing_model.heating_fuel                              
Electricity                        0.533582  0.533582       0.0
Fuel Oil                           0.001866  0.001866       0.0
Natural Gas                        0.455224  0.455224       0.0
Propane                            0.009328  0.009328       0.0

2023-09-07 19:01:19,726 - INFO -  [[ build_existing_model.hvac_cooling_type ]] 
2023-09-07 19:01:19,729 - INFO - 
                                         matched     truth  pct_diff
build_existing_model.hvac_cooling_type                              
Central AC                              0.632463  0.632463       0.0
Heat Pump                               0.147388  0.147388       0.0
None                                    0.033582  0.033582       0.0
Room AC                                 0.186567  0.186567      -0.0

2023-09-07 19:01:19,731 - INFO -  [[ build_existing_model.tenure ]] 
2023-09-07 19:01:19,735 - INFO - 
                             matched    truth  pct_diff
build_existing_model.tenure                            
Owner                        0.61194  0.61194       0.0
Renter                       0.38806  0.38806       0.0

2023-09-07 19:01:19,739 - INFO -  [[ build_existing_model.water_heater_fuel ]] 
2023-09-07 19:01:19,742 - INFO - 
                                         matched     truth  pct_diff
build_existing_model.water_heater_fuel                              
Electricity                             0.554104  0.554104       0.0
Natural Gas                             0.434701  0.434701       0.0
Propane                                 0.011194  0.011194      -0.0

2023-09-07 19:01:19,745 - INFO -  [[ build_existing_model.vintage_acs ]] 
2023-09-07 19:01:19,749 - INFO - 
                                   matched     truth  pct_diff
build_existing_model.vintage_acs                              
1940-59                           0.184701  0.184701      -0.0
1960-79                           0.328358  0.328358      -0.0
1980-99                           0.222015  0.222015      -0.0
2000-09                           0.111940  0.111940      -0.0
2010s                             0.046642  0.046642      -0.0
<1940                             0.106343  0.106343      -0.0

2023-09-07 19:01:19,752 - INFO -  [[ build_existing_model.geometry_floor_area_bin ]] 
2023-09-07 19:01:19,755 - INFO - 
                                               matched     truth  pct_diff
build_existing_model.geometry_floor_area_bin                              
0-1499                                        0.526119  0.526119       0.0
1500-2499                                     0.326493  0.326493      -0.0
2500-3999                                     0.125000  0.125000       0.0
4000+                                         0.022388  0.022388      -0.0

2023-09-07 19:01:19,758 - INFO -  [[ build_existing_model.hvac_heating_type ]] 
2023-09-07 19:01:19,761 - INFO - 
                                         matched     truth  pct_diff
build_existing_model.hvac_heating_type                              
Ducted Heat Pump                        0.147388  0.147388       0.0
Ducted Heating                          0.673507  0.673507       0.0
Non-Ducted Heating                      0.179104  0.179104       0.0

2023-09-07 19:01:19,765 - INFO -  [[ build_existing_model.federal_poverty_level ]] 
2023-09-07 19:01:19,768 - INFO - 
                                             matched     truth  pct_diff
build_existing_model.federal_poverty_level                              
0-100%                                      0.197761  0.197761       0.0
100-150%                                    0.110075  0.110075       0.0
150-200%                                    0.097015  0.097015      -0.0
200-300%                                    0.149254  0.149254       0.0
300-400%                                    0.115672  0.115672       0.0
400%+                                       0.330224  0.330224       0.0

2023-09-07 19:01:19,772 - INFO -  [[ build_existing_model.vacancy_status ]] 
2023-09-07 19:01:19,775 - INFO - 
                                      matched     truth  pct_diff
build_existing_model.vacancy_status                              
Occupied                             0.867537  0.867537       0.0
Vacant                               0.132463  0.132463       0.0

2023-09-07 19:01:19,776 - INFO - No unmatched HC
2023-09-07 19:01:19,781 - INFO - truth vs. matched - per dwelling unit energy:
2023-09-07 19:01:19,784 - INFO - 
                                    matched      truth  pct_diff
energy_use_total_m_btu            75.385937  74.670248  0.958465
fuel_use_electricity_total_m_btu  48.884882  48.843183  0.085374
fuel_use_fuel_oil_total_m_btu      0.054741   0.054741  0.000000
fuel_use_natural_gas_total_m_btu  25.807744  25.127681  2.706431
fuel_use_propane_total_m_btu       0.638582   0.644675 -0.945174

2023-09-07 19:01:19,789 - INFO - truth vs. matched - per dwelling unit energy:
2023-09-07 19:01:19,795 - INFO - 
                                                                        matched      truth  pct_diff
build_existing_model.vacancy_status                                                                 
Occupied                            energy_use_total_m_btu            82.687818  81.848647  1.025272
                                    fuel_use_electricity_total_m_btu  53.333407  53.264852  0.128706
                                    fuel_use_fuel_oil_total_m_btu      0.063099   0.063099  0.000000
                                    fuel_use_natural_gas_total_m_btu  28.588488  27.810869  2.796098
                                    fuel_use_propane_total_m_btu       0.702839   0.709862 -0.989442
Vacant                              energy_use_total_m_btu            27.563754  27.656789 -0.336392
                                    fuel_use_electricity_total_m_btu  19.750181  19.884366 -0.674829
                                    fuel_use_fuel_oil_total_m_btu      0.000000   0.000000       NaN
                                    fuel_use_natural_gas_total_m_btu   7.595831   7.554690  0.544574
                                    fuel_use_propane_total_m_btu       0.217746   0.217746 -0.000000

2023-09-07 19:01:19,808 - INFO - truth vs. matched - per dwelling unit energy:
2023-09-07 19:01:19,813 - INFO - 
                                                                matched      truth  pct_diff
build_existing_model.tenure                                                                 
Owner                       energy_use_total_m_btu            90.861630  89.644817  1.357371
                            fuel_use_electricity_total_m_btu  55.372967  55.209098  0.296816
                            fuel_use_fuel_oil_total_m_btu      0.089454   0.089454  0.000000
                            fuel_use_natural_gas_total_m_btu  34.422413  33.362720  3.176281
                            fuel_use_propane_total_m_btu       0.976801   0.983570 -0.688196
Renter                      energy_use_total_m_btu            50.981958  51.056505 -0.146008
                            fuel_use_electricity_total_m_btu  38.653672  38.804625 -0.389008
                            fuel_use_fuel_oil_total_m_btu      0.000000   0.000000       NaN
                            fuel_use_natural_gas_total_m_btu  12.223074  12.141659  0.670547
                            fuel_use_propane_total_m_btu       0.105236   0.110264 -4.559916

2023-09-07 19:01:19,820 - INFO - truth vs. matched - per dwelling unit energy:
2023-09-07 19:01:19,825 - INFO - 
                                                                               matched      truth   pct_diff
build_existing_model.federal_poverty_level                                                                  
0-100%                                     energy_use_total_m_btu            53.929194  54.788396  -1.568219
                                           fuel_use_electricity_total_m_btu  39.719571  40.582830  -2.127155
                                           fuel_use_fuel_oil_total_m_btu      0.000000   0.000000        NaN
                                           fuel_use_natural_gas_total_m_btu  13.882964  13.861717   0.153282
                                           fuel_use_propane_total_m_btu       0.326685   0.343896  -5.004768
100-150%                                   energy_use_total_m_btu            67.663501  66.353000   1.975045
                                           fuel_use_electricity_total_m_btu  42.291360  41.780915   1.221718
                                           fuel_use_fuel_oil_total_m_btu      0.000000   0.000000        NaN
                                           fuel_use_natural_gas_total_m_btu  24.490094  23.688186   3.385265
                                           fuel_use_propane_total_m_btu       0.882055   0.883915  -0.210469
150-200%                                   energy_use_total_m_btu            68.300711  67.928827   0.547461
                                           fuel_use_electricity_total_m_btu  48.198785  48.095346   0.215070
                                           fuel_use_fuel_oil_total_m_btu      0.000000   0.000000        NaN
                                           fuel_use_natural_gas_total_m_btu  18.264676  17.996288   1.491347
                                           fuel_use_propane_total_m_btu       1.837269   1.837269   0.000000
200-300%                                   energy_use_total_m_btu            76.749007  75.825963   1.217320
                                           fuel_use_electricity_total_m_btu  48.288150  48.354650  -0.137526
                                           fuel_use_fuel_oil_total_m_btu      0.000000   0.000000        NaN
                                           fuel_use_natural_gas_total_m_btu  28.417860  27.442275   3.555043
                                           fuel_use_propane_total_m_btu       0.042948   0.028987  48.160126
300-400%                                   energy_use_total_m_btu            73.721595  73.614645   0.145284
                                           fuel_use_electricity_total_m_btu  47.785017  46.361403   3.070687
                                           fuel_use_fuel_oil_total_m_btu      0.000000   0.000000        NaN
                                           fuel_use_natural_gas_total_m_btu  25.559786  26.876452  -4.898956
                                           fuel_use_propane_total_m_btu       0.376839   0.376839   0.000000
400%+                                      energy_use_total_m_btu            92.858330  91.177243   1.843758
                                           fuel_use_electricity_total_m_btu  57.428093  57.453983  -0.045063
                                           fuel_use_fuel_oil_total_m_btu      0.165768   0.165768   0.000000
                                           fuel_use_natural_gas_total_m_btu  34.511539  32.790751   5.247785
                                           fuel_use_propane_total_m_btu       0.752951   0.766785  -1.804212

2023-09-07 19:01:19,833 - INFO - >> Database down-selected to 1158 buildings, based on input data of 536 buildings, result outputs to: 
C:\Users\ylou2\Desktop\resstock\euss_cleap\data_\downsampled_buildings_id\results_up00__downsampled_method1__north_birmingham.csv

