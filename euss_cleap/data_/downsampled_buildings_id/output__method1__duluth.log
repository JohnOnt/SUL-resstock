2023-06-21 01:50:42,601 - INFO - ---------------------------------------------------------
2023-06-21 01:50:42,602 - INFO - Downsampling buildstock for  duluth  using method 1
2023-06-21 01:50:42,602 - INFO - ---------------------------------------------------------
2023-06-21 01:50:42,793 - INFO - Creating n>=1000 buildlstock by downsampling from: bst_to_search (548916 samples) 
while matching the marginal distribution of 13 key HCs from: bst_to_match (184 samples), 
['Income', 'ASHRAE IECC Climate Zone 2004', 'State', 'Geometry Building Type RECS', 'Heating Fuel', 'HVAC Cooling Type', 'Tenure', 'Water Heater Fuel', 'Vintage ACS', 'Geometry Floor Area Bin', 'HVAC Heating Type', 'Federal Poverty Level', 'Vacancy Status']
2023-06-21 01:50:42,796 - INFO - 
2023-06-21 01:50:42,796 - INFO - 
---- Attempt 1: downsample using 13 key HCs: ----
2023-06-21 01:50:42,962 - INFO -    Located 1918 positively weighted rows in bst_to_search
2023-06-21 01:50:42,964 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2023-06-21 01:50:43,034 - INFO -    Downsampling FAILED with insufficient rows: Recalculation leads to 214 positively weighted samples 
retry by relaxing HC_to_search by removing: build_existing_model.vacancy_status...
2023-06-21 01:50:43,034 - INFO - 
---- Attempt 2: downsample using 12 key HCs: ----
2023-06-21 01:50:43,039 - INFO -    Located 1918 positively weighted rows in bst_to_search
2023-06-21 01:50:43,039 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2023-06-21 01:50:43,063 - INFO -    Downsampling FAILED with insufficient rows: Recalculation leads to 226 positively weighted samples 
retry by relaxing HC_to_search by removing: build_existing_model.federal_poverty_level...
2023-06-21 01:50:43,063 - INFO - 
---- Attempt 3: downsample using 11 key HCs: ----
2023-06-21 01:50:43,067 - INFO -    Located 1918 positively weighted rows in bst_to_search
2023-06-21 01:50:43,068 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2023-06-21 01:50:43,087 - INFO -    Downsampling FAILED with insufficient rows: Recalculation leads to 253 positively weighted samples 
retry by relaxing HC_to_search by removing: build_existing_model.hvac_heating_type...
2023-06-21 01:50:43,087 - INFO - 
---- Attempt 4: downsample using 10 key HCs: ----
2023-06-21 01:50:43,091 - INFO -    Located 1918 positively weighted rows in bst_to_search
2023-06-21 01:50:43,091 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2023-06-21 01:50:43,110 - INFO -    Downsampling FAILED with insufficient rows: Recalculation leads to 274 positively weighted samples 
retry by relaxing HC_to_search by removing: build_existing_model.geometry_floor_area_bin...
2023-06-21 01:50:43,110 - INFO - 
---- Attempt 5: downsample using 9 key HCs: ----
2023-06-21 01:50:43,114 - INFO -    Located 1918 positively weighted rows in bst_to_search
2023-06-21 01:50:43,114 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2023-06-21 01:50:43,130 - INFO -    Downsampling FAILED with insufficient rows: Recalculation leads to 356 positively weighted samples 
retry by relaxing HC_to_search by removing: build_existing_model.vintage_acs...
2023-06-21 01:50:43,130 - INFO - 
---- Attempt 6: downsample using 8 key HCs: ----
2023-06-21 01:50:43,133 - INFO -    Located 1918 positively weighted rows in bst_to_search
2023-06-21 01:50:43,133 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2023-06-21 01:50:43,148 - INFO -    Downsampling FAILED with insufficient rows: Recalculation leads to 643 positively weighted samples 
retry by relaxing HC_to_search by removing: build_existing_model.water_heater_fuel...
2023-06-21 01:50:43,148 - INFO - 
---- Attempt 7: downsample using 7 key HCs: ----
2023-06-21 01:50:43,152 - INFO -    Located 1918 positively weighted rows in bst_to_search
2023-06-21 01:50:43,152 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2023-06-21 01:50:43,165 - INFO -    Downsampling FAILED with insufficient rows: Recalculation leads to 782 positively weighted samples 
retry by relaxing HC_to_search by removing: build_existing_model.tenure...
2023-06-21 01:50:43,165 - INFO - 
---- Attempt 8: downsample using 6 key HCs: ----
2023-06-21 01:50:43,168 - INFO -    Located 1918 positively weighted rows in bst_to_search
2023-06-21 01:50:43,168 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2023-06-21 01:50:43,180 - INFO -    Downsampling FAILED with insufficient rows: Recalculation leads to 828 positively weighted samples 
retry by relaxing HC_to_search by removing: build_existing_model.hvac_cooling_type...
2023-06-21 01:50:43,180 - INFO - 
---- Attempt 9: downsample using 5 key HCs: ----
2023-06-21 01:50:43,182 - INFO -    Located 1918 positively weighted rows in bst_to_search
2023-06-21 01:50:43,182 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2023-06-21 01:50:43,195 - INFO - 

** Downsampled to: 1217 samples, by matching to: ['build_existing_model.income', 'build_existing_model.ashrae_iecc_climate_zone_2004', 'build_existing_model.state', 'build_existing_model.geometry_building_type_recs', 'build_existing_model.heating_fuel']
2023-06-21 01:50:43,210 - INFO - 
 -> Step 3 : Weight Normalization
2023-06-21 01:50:43,212 - INFO - Checking marginals from weight_map of n=1217...
2023-06-21 01:50:43,217 - INFO -  [[ build_existing_model.income ]] 
2023-06-21 01:50:43,227 - INFO - 
                matched     truth  pct_diff
10000-14999    0.048913  0.048913       0.0
100000-119999  0.054348  0.054348       0.0
120000-139999  0.048913  0.048913      -0.0
140000-159999  0.027174  0.027174      -0.0
15000-19999    0.048913  0.048913       0.0
160000-179999  0.016304  0.016304       0.0
180000-199999  0.010870  0.010870      -0.0
20000-24999    0.076087  0.076087      -0.0
200000+        0.059783  0.059783      -0.0
25000-29999    0.048913  0.048913      -0.0
30000-34999    0.038043  0.038043      -0.0
35000-39999    0.043478  0.043478      -0.0
40000-44999    0.048913  0.048913       0.0
45000-49999    0.032609  0.032609       0.0
50000-59999    0.070652  0.070652       0.0
60000-69999    0.086957  0.086957      -0.0
70000-79999    0.043478  0.043478       0.0
80000-99999    0.125000  0.125000       0.0
<10000         0.070652  0.070652       0.0

2023-06-21 01:50:43,230 - INFO -  [[ build_existing_model.ashrae_iecc_climate_zone_2004 ]] 
2023-06-21 01:50:43,234 - INFO - 
    matched  truth  pct_diff
7A      1.0    1.0       0.0

2023-06-21 01:50:43,239 - INFO -  [[ build_existing_model.state ]] 
2023-06-21 01:50:43,243 - INFO - 
    matched  truth  pct_diff
MN      1.0    1.0       0.0

2023-06-21 01:50:43,247 - INFO -  [[ build_existing_model.geometry_building_type_recs ]] 
2023-06-21 01:50:43,251 - INFO - 
                                matched     truth  pct_diff
Mobile Home                    0.032609  0.032609       0.0
Multi-Family with 2 - 4 Units  0.125000  0.125000       0.0
Multi-Family with 5+ Units     0.184783  0.184783       0.0
Single-Family Attached         0.027174  0.027174       0.0
Single-Family Detached         0.630435  0.630435      -0.0

2023-06-21 01:50:43,255 - INFO -  [[ build_existing_model.heating_fuel ]] 
2023-06-21 01:50:43,259 - INFO - 
              matched     truth  pct_diff
Electricity  0.190217  0.190217      -0.0
Fuel Oil     0.054348  0.054348      -0.0
Natural Gas  0.695652  0.695652       0.0
None         0.010870  0.010870      -0.0
Other Fuel   0.010870  0.010870       0.0
Propane      0.038043  0.038043      -0.0

2023-06-21 01:50:43,259 - INFO - For unmatched HC:
2023-06-21 01:50:43,259 - INFO - Checking marginals from weight_map of n=1217...
2023-06-21 01:50:43,263 - INFO -  [[ build_existing_model.hvac_cooling_type ]] 
2023-06-21 01:50:43,267 - INFO - 
             matched     truth   pct_diff
Central AC  0.233426  0.228261   2.262730
Heat Pump   0.023367  0.016304  43.320617
None        0.465966  0.456522   2.068816
Room AC     0.277240  0.298913  -7.250492

2023-06-21 01:50:43,271 - INFO -  [[ build_existing_model.tenure ]] 
2023-06-21 01:50:43,275 - INFO - 
         matched  truth  pct_diff
Owner   0.643933  0.625  3.029217
Renter  0.356067  0.375 -5.048696

2023-06-21 01:50:43,279 - INFO -  [[ build_existing_model.water_heater_fuel ]] 
2023-06-21 01:50:43,283 - INFO - 
              matched     truth   pct_diff
Electricity  0.305797  0.309783  -1.286571
Natural Gas  0.664103  0.663043   0.159733
Propane      0.030100  0.027174  10.769410

2023-06-21 01:50:43,287 - INFO -  [[ build_existing_model.vintage_acs ]] 
2023-06-21 01:50:43,290 - INFO - 
          matched     truth    pct_diff
1940-59  0.162034  0.201087  -19.420811
1960-79  0.234997  0.163043   44.131261
1980-99  0.203856  0.125000   63.084402
2000-09  0.118934  0.092391   28.728220
2010s    0.038565  0.010870  254.795989
<1940    0.241615  0.407609  -40.723744

2023-06-21 01:50:43,294 - INFO -  [[ build_existing_model.geometry_floor_area_bin ]] 
2023-06-21 01:50:43,298 - INFO - 
            matched     truth   pct_diff
0-1499     0.524430  0.548913  -4.460215
1500-2499  0.309200  0.304348   1.594375
2500-3999  0.142508  0.119565  19.188758
4000+      0.023861  0.027174 -12.191202

2023-06-21 01:50:43,302 - INFO -  [[ build_existing_model.hvac_heating_type ]] 
2023-06-21 01:50:43,306 - INFO - 
                     matched     truth   pct_diff
Ducted Heat Pump    0.023367  0.016304  43.320617
Ducted Heating      0.586201  0.586957  -0.128671
Non-Ducted Heating  0.379562  0.385870  -1.634724
None                0.010870  0.010870  -0.000000

2023-06-21 01:50:43,310 - INFO -  [[ build_existing_model.federal_poverty_level ]] 
2023-06-21 01:50:43,314 - INFO - 
           matched     truth   pct_diff
0-100%    0.121060  0.125000  -3.152208
100-150%  0.093659  0.081522  14.888765
150-200%  0.101558  0.125000 -18.753853
200-300%  0.152364  0.130435  16.812493
300-400%  0.153444  0.168478  -8.923279
400%+     0.377915  0.369565   2.259261

2023-06-21 01:50:43,318 - INFO -  [[ build_existing_model.vacancy_status ]] 
2023-06-21 01:50:43,321 - INFO - 
           matched     truth    pct_diff
Occupied  0.809977  0.940217  -13.852172
Vacant    0.190023  0.059783  217.856889

2023-06-21 01:50:43,329 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-21 01:50:43,332 - INFO - 
                                                       matched       truth   pct_diff
report_simulation_output.energy_use_total_m_btu     147.793793  163.476266  -9.593119
report_simulation_output.fuel_use_electricity_t...   31.157455   34.645766 -10.068505
report_simulation_output.fuel_use_fuel_oil_tota...   10.093723   11.664054 -13.462994
report_simulation_output.fuel_use_natural_gas_t...   99.981415  110.006929  -9.113530
report_simulation_output.fuel_use_propane_total...    6.561208    7.159533  -8.357038

2023-06-21 01:50:43,345 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-21 01:50:43,350 - INFO - 
                                                                                           matched       truth   pct_diff
build_existing_model.vacancy_status                                                                                      
Occupied                            report_simulation_output.energy_use_total_m_btu     159.997303  167.282254  -4.354886
                                    report_simulation_output.fuel_use_electricity_t...   35.455829   35.986312  -1.474126
                                    report_simulation_output.fuel_use_fuel_oil_tota...   10.303763   12.405699 -16.943316
                                    report_simulation_output.fuel_use_natural_gas_t...  107.569067  111.275491  -3.330854
                                    report_simulation_output.fuel_use_propane_total...    6.668662    7.614763 -12.424568
Vacant                              report_simulation_output.energy_use_total_m_btu      95.776123  103.618455  -7.568470
                                    report_simulation_output.fuel_use_electricity_t...   12.835567   13.562636  -5.360824
                                    report_simulation_output.fuel_use_fuel_oil_tota...    9.198428    0.000000        inf
                                    report_simulation_output.fuel_use_natural_gas_t...   67.638916   90.055909 -24.892306
                                    report_simulation_output.fuel_use_propane_total...    6.103184    0.000000        inf

2023-06-21 01:50:43,360 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-21 01:50:43,364 - INFO - 
                                                                                   matched       truth   pct_diff
build_existing_model.tenure                                                                                      
Owner                       report_simulation_output.energy_use_total_m_btu     182.861069  204.956009 -10.780333
                            report_simulation_output.fuel_use_electricity_t...   32.490282   34.461339  -5.719618
                            report_simulation_output.fuel_use_fuel_oil_tota...   14.637701   16.189783  -9.586795
                            report_simulation_output.fuel_use_natural_gas_t...  126.287505  143.764409 -12.156628
                            report_simulation_output.fuel_use_propane_total...    9.445582   10.540496 -10.387686
Renter                      report_simulation_output.energy_use_total_m_btu      84.376127   94.343362 -10.564850
                            report_simulation_output.fuel_use_electricity_t...   28.747095   34.953145 -17.755340
                            report_simulation_output.fuel_use_fuel_oil_tota...    1.876134    4.121174 -54.475740
                            report_simulation_output.fuel_use_natural_gas_t...   52.407979   53.744464  -2.486740
                            report_simulation_output.fuel_use_propane_total...    1.344940    1.524594 -11.783715

2023-06-21 01:50:43,373 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-21 01:50:43,379 - INFO - 
                                                                                                  matched       truth    pct_diff
build_existing_model.federal_poverty_level                                                                                       
0-100%                                     report_simulation_output.energy_use_total_m_btu      97.886278  101.524304   -3.583405
                                           report_simulation_output.fuel_use_electricity_t...   24.097992   27.223652  -11.481415
                                           report_simulation_output.fuel_use_fuel_oil_tota...    4.002044    0.000000         inf
                                           report_simulation_output.fuel_use_natural_gas_t...   69.701232   74.300783   -6.190447
                                           report_simulation_output.fuel_use_propane_total...    0.084987    0.000000         inf
100-150%                                   report_simulation_output.energy_use_total_m_btu     114.646397  136.600800  -16.071943
                                           report_simulation_output.fuel_use_electricity_t...   26.684752   26.570400    0.430373
                                           report_simulation_output.fuel_use_fuel_oil_tota...   10.534272   25.500933  -58.690643
                                           report_simulation_output.fuel_use_natural_gas_t...   74.106612   84.529400  -12.330370
                                           report_simulation_output.fuel_use_propane_total...    3.320878    0.000000         inf
150-200%                                   report_simulation_output.energy_use_total_m_btu     126.981618  141.457652  -10.233476
                                           report_simulation_output.fuel_use_electricity_t...   32.319800   36.226609  -10.784363
                                           report_simulation_output.fuel_use_fuel_oil_tota...   10.098820   21.982435  -54.059593
                                           report_simulation_output.fuel_use_natural_gas_t...   83.159316   74.217739   12.047763
                                           report_simulation_output.fuel_use_propane_total...    1.403683    9.030826  -84.456765
200-300%                                   report_simulation_output.energy_use_total_m_btu     138.663178  140.211375   -1.104188
                                           report_simulation_output.fuel_use_electricity_t...   35.692709   37.443417   -4.675610
                                           report_simulation_output.fuel_use_fuel_oil_tota...    8.250508    4.007042  105.900218
                                           report_simulation_output.fuel_use_natural_gas_t...   88.178497   91.173833   -3.285303
                                           report_simulation_output.fuel_use_propane_total...    6.541413    7.587083  -13.782241
300-400%                                   report_simulation_output.energy_use_total_m_btu     151.870936  178.039000  -14.697939
                                           report_simulation_output.fuel_use_electricity_t...   31.067306   37.513323  -17.183272
                                           report_simulation_output.fuel_use_fuel_oil_tota...    3.975813    0.000000         inf
                                           report_simulation_output.fuel_use_natural_gas_t...  108.245344  132.443065  -18.270282
                                           report_simulation_output.fuel_use_propane_total...    8.582416    8.082484    6.185377
400%+                                      report_simulation_output.energy_use_total_m_btu     179.614608  199.378735   -9.912856
                                           report_simulation_output.fuel_use_electricity_t...   32.423099   36.108147  -10.205586
                                           report_simulation_output.fuel_use_fuel_oil_tota...   15.161740   17.086868  -11.266711
                                           report_simulation_output.fuel_use_natural_gas_t...  122.017679  136.227956  -10.431248
                                           report_simulation_output.fuel_use_propane_total...   10.012134    9.955853    0.565308

2023-06-21 01:50:43,386 - INFO - >> Database down-selected to 1217 buildings, based on input data of 184 buildings, result outputs to: 
/Users/lliu2/Documents/GitHub/ResStock/euss_cleap/data_/downsampled_buildings_id/euss1_2018_results_up00__downsampled_method1__duluth.csv

2023-06-21 01:51:17,293 - INFO - ---------------------------------------------------------
2023-06-21 01:51:17,296 - INFO - Downsampling buildstock for  louisville  using method 1
2023-06-21 01:51:17,296 - INFO - ---------------------------------------------------------
2023-06-21 01:51:17,549 - INFO - bst_to_match has 1403 samples and over threshold n=1000, returning building_id and weight directly.
2023-06-21 01:51:17,605 - INFO - >> Database down-selected to 1403 buildings, based on input data of 1403 buildings, result outputs to: 
/Users/lliu2/Documents/GitHub/ResStock/euss_cleap/data_/downsampled_buildings_id/euss1_2018_results_up00__downsampled_method1__louisville.csv

2023-06-21 01:51:49,168 - INFO - ---------------------------------------------------------
2023-06-21 01:51:49,170 - INFO - Downsampling buildstock for  jackson_county  using method 1
2023-06-21 01:51:49,170 - INFO - ---------------------------------------------------------
2023-06-21 01:51:49,333 - INFO - Creating n>=1000 buildlstock by downsampling from: bst_to_search (548916 samples) 
while matching the marginal distribution of 13 key HCs from: bst_to_match (118 samples), 
['Income', 'ASHRAE IECC Climate Zone 2004', 'State', 'Geometry Building Type RECS', 'Heating Fuel', 'HVAC Cooling Type', 'Tenure', 'Water Heater Fuel', 'Vintage ACS', 'Geometry Floor Area Bin', 'HVAC Heating Type', 'Federal Poverty Level', 'Vacancy Status']
2023-06-21 01:51:49,334 - INFO - 
2023-06-21 01:51:49,334 - INFO - 
---- Attempt 1: downsample using 13 key HCs: ----
2023-06-21 01:51:49,607 - INFO -    Located 2414 positively weighted rows in bst_to_search
2023-06-21 01:51:49,608 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2023-06-21 01:51:49,671 - INFO -    Downsampling FAILED with insufficient rows: Recalculation leads to 159 positively weighted samples 
retry by relaxing HC_to_search by removing: build_existing_model.vacancy_status...
2023-06-21 01:51:49,672 - INFO - 
---- Attempt 2: downsample using 12 key HCs: ----
2023-06-21 01:51:49,680 - INFO -    Located 2414 positively weighted rows in bst_to_search
2023-06-21 01:51:49,680 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2023-06-21 01:51:49,719 - INFO -    Downsampling FAILED with insufficient rows: Recalculation leads to 165 positively weighted samples 
retry by relaxing HC_to_search by removing: build_existing_model.federal_poverty_level...
2023-06-21 01:51:49,720 - INFO - 
---- Attempt 3: downsample using 11 key HCs: ----
2023-06-21 01:51:49,727 - INFO -    Located 2414 positively weighted rows in bst_to_search
2023-06-21 01:51:49,727 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2023-06-21 01:51:49,759 - INFO -    Downsampling FAILED with insufficient rows: Recalculation leads to 189 positively weighted samples 
retry by relaxing HC_to_search by removing: build_existing_model.hvac_heating_type...
2023-06-21 01:51:49,759 - INFO - 
---- Attempt 4: downsample using 10 key HCs: ----
2023-06-21 01:51:49,766 - INFO -    Located 2414 positively weighted rows in bst_to_search
2023-06-21 01:51:49,766 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2023-06-21 01:51:49,794 - INFO -    Downsampling FAILED with insufficient rows: Recalculation leads to 210 positively weighted samples 
retry by relaxing HC_to_search by removing: build_existing_model.geometry_floor_area_bin...
2023-06-21 01:51:49,794 - INFO - 
---- Attempt 5: downsample using 9 key HCs: ----
2023-06-21 01:51:49,800 - INFO -    Located 2414 positively weighted rows in bst_to_search
2023-06-21 01:51:49,800 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2023-06-21 01:51:49,826 - INFO -    Downsampling FAILED with insufficient rows: Recalculation leads to 326 positively weighted samples 
retry by relaxing HC_to_search by removing: build_existing_model.vintage_acs...
2023-06-21 01:51:49,826 - INFO - 
---- Attempt 6: downsample using 8 key HCs: ----
2023-06-21 01:51:49,830 - INFO -    Located 2414 positively weighted rows in bst_to_search
2023-06-21 01:51:49,830 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2023-06-21 01:51:49,856 - INFO -    Downsampling FAILED with insufficient rows: Recalculation leads to 760 positively weighted samples 
retry by relaxing HC_to_search by removing: build_existing_model.water_heater_fuel...
2023-06-21 01:51:49,857 - INFO - 
---- Attempt 7: downsample using 7 key HCs: ----
2023-06-21 01:51:49,863 - INFO -    Located 2414 positively weighted rows in bst_to_search
2023-06-21 01:51:49,863 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2023-06-21 01:51:49,882 - INFO -    Downsampling FAILED with insufficient rows: Recalculation leads to 951 positively weighted samples 
retry by relaxing HC_to_search by removing: build_existing_model.tenure...
2023-06-21 01:51:49,883 - INFO - 
---- Attempt 8: downsample using 6 key HCs: ----
2023-06-21 01:51:49,886 - INFO -    Located 2414 positively weighted rows in bst_to_search
2023-06-21 01:51:49,886 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2023-06-21 01:51:49,905 - INFO - 

** Downsampled to: 1147 samples, by matching to: ['build_existing_model.income', 'build_existing_model.ashrae_iecc_climate_zone_2004', 'build_existing_model.state', 'build_existing_model.geometry_building_type_recs', 'build_existing_model.heating_fuel', 'build_existing_model.hvac_cooling_type']
2023-06-21 01:51:49,928 - INFO - 
 -> Step 3 : Weight Normalization
2023-06-21 01:51:49,931 - INFO - Checking marginals from weight_map of n=1147...
2023-06-21 01:51:49,938 - INFO -  [[ build_existing_model.income ]] 
2023-06-21 01:51:49,951 - INFO - 
                matched     truth  pct_diff
10000-14999    0.076271  0.076271      -0.0
100000-119999  0.076271  0.076271       0.0
120000-139999  0.025424  0.025424       0.0
140000-159999  0.025424  0.025424       0.0
15000-19999    0.067797  0.067797       0.0
160000-179999  0.025424  0.025424      -0.0
180000-199999  0.016949  0.016949       0.0
20000-24999    0.076271  0.076271      -0.0
25000-29999    0.101695  0.101695       0.0
30000-34999    0.050847  0.050847      -0.0
35000-39999    0.059322  0.059322       0.0
40000-44999    0.042373  0.042373       0.0
45000-49999    0.033898  0.033898       0.0
50000-59999    0.067797  0.067797      -0.0
60000-69999    0.033898  0.033898       0.0
70000-79999    0.076271  0.076271      -0.0
80000-99999    0.067797  0.067797       0.0
<10000         0.076271  0.076271      -0.0

2023-06-21 01:51:49,957 - INFO -  [[ build_existing_model.ashrae_iecc_climate_zone_2004 ]] 
2023-06-21 01:51:49,963 - INFO - 
    matched  truth  pct_diff
4A      1.0    1.0       0.0

2023-06-21 01:51:49,970 - INFO -  [[ build_existing_model.state ]] 
2023-06-21 01:51:49,975 - INFO - 
    matched  truth  pct_diff
IL      1.0    1.0       0.0

2023-06-21 01:51:49,981 - INFO -  [[ build_existing_model.geometry_building_type_recs ]] 
2023-06-21 01:51:49,987 - INFO - 
                                matched     truth  pct_diff
Mobile Home                    0.110169  0.110169       0.0
Multi-Family with 2 - 4 Units  0.118644  0.118644       0.0
Multi-Family with 5+ Units     0.093220  0.093220       0.0
Single-Family Attached         0.008475  0.008475       0.0
Single-Family Detached         0.669492  0.669492       0.0

2023-06-21 01:51:49,992 - INFO -  [[ build_existing_model.heating_fuel ]] 
2023-06-21 01:51:49,998 - INFO - 
              matched     truth  pct_diff
Electricity  0.525424  0.525424       0.0
Natural Gas  0.389831  0.389831      -0.0
Other Fuel   0.025424  0.025424      -0.0
Propane      0.059322  0.059322       0.0

2023-06-21 01:51:50,004 - INFO -  [[ build_existing_model.hvac_cooling_type ]] 
2023-06-21 01:51:50,010 - INFO - 
             matched     truth  pct_diff
Central AC  0.483051  0.483051       0.0
Heat Pump   0.279661  0.279661       0.0
None        0.059322  0.059322       0.0
Room AC     0.177966  0.177966       0.0

2023-06-21 01:51:50,010 - INFO - For unmatched HC:
2023-06-21 01:51:50,011 - INFO - Checking marginals from weight_map of n=1147...
2023-06-21 01:51:50,017 - INFO -  [[ build_existing_model.tenure ]] 
2023-06-21 01:51:50,021 - INFO - 
         matched     truth  pct_diff
Owner   0.659342  0.661017 -0.253412
Renter  0.340658  0.338983  0.494153

2023-06-21 01:51:50,027 - INFO -  [[ build_existing_model.water_heater_fuel ]] 
2023-06-21 01:51:50,032 - INFO - 
              matched     truth   pct_diff
Electricity  0.550191  0.508475   8.204243
Natural Gas  0.406262  0.440678  -7.809757
Other Fuel   0.012352  0.008475  45.757576
Propane      0.031195  0.042373 -26.380952

2023-06-21 01:51:50,037 - INFO -  [[ build_existing_model.vintage_acs ]] 
2023-06-21 01:51:50,042 - INFO - 
          matched     truth   pct_diff
1940-59  0.171188  0.177966  -3.808675
1960-79  0.265437  0.288136  -7.877906
1980-99  0.256380  0.237288   8.045693
2000-09  0.123290  0.110169  11.909755
2010s    0.051272  0.033898  51.252474
<1940    0.132433  0.152542 -13.182507

2023-06-21 01:51:50,049 - INFO -  [[ build_existing_model.geometry_floor_area_bin ]] 
2023-06-21 01:51:50,055 - INFO - 
            matched     truth   pct_diff
0-1499     0.535757  0.559322  -4.213184
1500-2499  0.309924  0.322034  -3.760490
2500-3999  0.130278  0.093220  39.753225
4000+      0.024041  0.025424  -5.438903

2023-06-21 01:51:50,060 - INFO -  [[ build_existing_model.hvac_heating_type ]] 
2023-06-21 01:51:50,066 - INFO - 
                     matched     truth  pct_diff
Ducted Heat Pump    0.279661  0.279661  0.000000
Ducted Heating      0.478818  0.466102  2.728171
Non-Ducted Heating  0.241521  0.254237 -5.001647

2023-06-21 01:51:50,072 - INFO -  [[ build_existing_model.federal_poverty_level ]] 
2023-06-21 01:51:50,078 - INFO - 
           matched     truth   pct_diff
0-100%    0.183807  0.186441  -1.412354
100-150%  0.124608  0.144068 -13.507053
150-200%  0.107100  0.144068 -25.659860
200-300%  0.188020  0.152542  23.257441
300-400%  0.121074  0.110169   9.897646
400%+     0.275390  0.262712   4.826000

2023-06-21 01:51:50,084 - INFO -  [[ build_existing_model.vacancy_status ]] 
2023-06-21 01:51:50,089 - INFO - 
           matched     truth  pct_diff
Occupied  0.817579  0.830508 -1.556840
Vacant    0.182421  0.169492  7.628517

2023-06-21 01:51:50,102 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-21 01:51:50,118 - INFO - 
                                                      matched  ...   pct_diff
report_simulation_output.energy_use_total_m_btu     94.690553  ...   2.716838
report_simulation_output.fuel_use_electricity_t...  50.331054  ...  -1.466532
report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
report_simulation_output.fuel_use_natural_gas_t...  38.425088  ...   3.697847
report_simulation_output.fuel_use_propane_total...   5.934426  ...  46.494694

[5 rows x 3 columns]

2023-06-21 01:51:50,132 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-21 01:51:50,141 - INFO - 
                                                                                           matched  ...   pct_diff
build_existing_model.vacancy_status                                                                 ...           
Occupied                            report_simulation_output.energy_use_total_m_btu     107.650593  ...   4.133032
                                    report_simulation_output.fuel_use_electricity_t...   57.174860  ...  -0.199592
                                    report_simulation_output.fuel_use_fuel_oil_tota...    0.000000  ...        NaN
                                    report_simulation_output.fuel_use_natural_gas_t...   43.545030  ...   2.378712
                                    report_simulation_output.fuel_use_propane_total...    6.930728  ...  94.934257
Vacant                              report_simulation_output.energy_use_total_m_btu      36.606007  ...  -1.980138
                                    report_simulation_output.fuel_use_electricity_t...   19.658359  ...  -4.829099
                                    report_simulation_output.fuel_use_fuel_oil_tota...    0.000000  ...        NaN
                                    report_simulation_output.fuel_use_natural_gas_t...   15.478435  ...  51.592571
                                    report_simulation_output.fuel_use_propane_total...    1.469177  ... -77.324189

[10 rows x 3 columns]

2023-06-21 01:51:50,155 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-21 01:51:50,164 - INFO - 
                                                                                   matched  ...   pct_diff
build_existing_model.tenure                                                                 ...           
Owner                       report_simulation_output.energy_use_total_m_btu     111.223749  ...   4.167947
                            report_simulation_output.fuel_use_electricity_t...   56.774852  ...  -0.063132
                            report_simulation_output.fuel_use_fuel_oil_tota...    0.000000  ...        NaN
                            report_simulation_output.fuel_use_natural_gas_t...   46.379800  ...   2.365153
                            report_simulation_output.fuel_use_propane_total...    8.069113  ...  73.360585
Renter                      report_simulation_output.energy_use_total_m_btu      62.690649  ...  -1.646955
                            report_simulation_output.fuel_use_electricity_t...   37.859120  ...  -5.128244
                            report_simulation_output.fuel_use_fuel_oil_tota...    0.000000  ...        NaN
                            report_simulation_output.fuel_use_natural_gas_t...   23.028788  ...   9.865718
                            report_simulation_output.fuel_use_propane_total...    1.802751  ... -37.273265

[10 rows x 3 columns]

2023-06-21 01:51:50,177 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-21 01:51:50,188 - INFO - 
                                                                                                  matched  ...    pct_diff
build_existing_model.federal_poverty_level                                                                 ...            
0-100%                                     report_simulation_output.energy_use_total_m_btu      71.794726  ...    3.795898
                                           report_simulation_output.fuel_use_electricity_t...   45.973112  ...   -2.950563
                                           report_simulation_output.fuel_use_fuel_oil_tota...    0.000000  ...         NaN
                                           report_simulation_output.fuel_use_natural_gas_t...   25.675799  ...   20.943707
                                           report_simulation_output.fuel_use_propane_total...    0.145838  ...  -74.355100
100-150%                                   report_simulation_output.energy_use_total_m_btu      87.773356  ...    0.469713
                                           report_simulation_output.fuel_use_electricity_t...   43.082539  ...  -20.039045
                                           report_simulation_output.fuel_use_fuel_oil_tota...    0.000000  ...         NaN
                                           report_simulation_output.fuel_use_natural_gas_t...   43.606457  ...   50.000457
                                           report_simulation_output.fuel_use_propane_total...    1.084370  ...  -75.426522
150-200%                                   report_simulation_output.energy_use_total_m_btu      96.246478  ...    2.681401
                                           report_simulation_output.fuel_use_electricity_t...   46.937166  ...   -4.744350
                                           report_simulation_output.fuel_use_fuel_oil_tota...    0.000000  ...         NaN
                                           report_simulation_output.fuel_use_natural_gas_t...   41.506733  ...    4.729730
                                           report_simulation_output.fuel_use_propane_total...    7.802529  ...   61.684824
200-300%                                   report_simulation_output.energy_use_total_m_btu     103.346684  ...   13.621544
                                           report_simulation_output.fuel_use_electricity_t...   47.146851  ...   34.553010
                                           report_simulation_output.fuel_use_fuel_oil_tota...    0.000000  ...         NaN
                                           report_simulation_output.fuel_use_natural_gas_t...   44.490527  ...    0.808717
                                           report_simulation_output.fuel_use_propane_total...   11.709297  ...   -0.631592
300-400%                                   report_simulation_output.energy_use_total_m_btu      94.906107  ...   23.146669
                                           report_simulation_output.fuel_use_electricity_t...   51.959619  ...   27.344086
                                           report_simulation_output.fuel_use_fuel_oil_tota...    0.000000  ...         NaN
                                           report_simulation_output.fuel_use_natural_gas_t...   35.954288  ...    7.085016
                                           report_simulation_output.fuel_use_propane_total...    6.992224  ...  159.993450
400%+                                      report_simulation_output.energy_use_total_m_btu     106.492360  ...   -9.268343
                                           report_simulation_output.fuel_use_electricity_t...   59.297424  ...  -11.219826
                                           report_simulation_output.fuel_use_fuel_oil_tota...    0.000000  ...         NaN
                                           report_simulation_output.fuel_use_natural_gas_t...   40.336749  ...  -17.001692
                                           report_simulation_output.fuel_use_propane_total...    6.858233  ...  246.392330

[30 rows x 3 columns]

2023-06-21 01:51:50,197 - INFO - >> Database down-selected to 1147 buildings, based on input data of 118 buildings, result outputs to: 
/Users/lliu2/Documents/GitHub/ResStock/euss_cleap/data_/downsampled_buildings_id/euss1_2018_results_up00__downsampled_method1__jackson_county.csv

2023-06-21 01:52:18,957 - INFO - ---------------------------------------------------------
2023-06-21 01:52:18,959 - INFO - Downsampling buildstock for  hill_district  using method 1
2023-06-21 01:52:18,959 - INFO - ---------------------------------------------------------
2023-06-21 01:52:19,096 - INFO - Creating n>=1000 buildlstock by downsampling from: bst_to_search (548916 samples) 
while matching the marginal distribution of 13 key HCs from: bst_to_match (399 samples), 
['Income', 'ASHRAE IECC Climate Zone 2004', 'State', 'Geometry Building Type RECS', 'Heating Fuel', 'HVAC Cooling Type', 'Tenure', 'Water Heater Fuel', 'Vintage ACS', 'Geometry Floor Area Bin', 'HVAC Heating Type', 'Federal Poverty Level', 'Vacancy Status']
2023-06-21 01:52:19,097 - INFO - 
2023-06-21 01:52:19,100 - INFO - 
---- Attempt 1: downsample using 13 key HCs: ----
2023-06-21 01:52:19,271 - INFO -    Located 13940 positively weighted rows in bst_to_search
2023-06-21 01:52:19,272 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2023-06-21 01:52:19,359 - INFO -    Downsampling FAILED with insufficient rows: Recalculation leads to 860 positively weighted samples 
retry by relaxing HC_to_search by removing: build_existing_model.vacancy_status...
2023-06-21 01:52:19,359 - INFO - 
---- Attempt 2: downsample using 12 key HCs: ----
2023-06-21 01:52:19,369 - INFO -    Located 13940 positively weighted rows in bst_to_search
2023-06-21 01:52:19,369 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2023-06-21 01:52:19,424 - INFO -    Downsampling FAILED with insufficient rows: Recalculation leads to 971 positively weighted samples 
retry by relaxing HC_to_search by removing: build_existing_model.federal_poverty_level...
2023-06-21 01:52:19,425 - INFO - 
---- Attempt 3: downsample using 11 key HCs: ----
2023-06-21 01:52:19,433 - INFO -    Located 13940 positively weighted rows in bst_to_search
2023-06-21 01:52:19,433 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2023-06-21 01:52:19,482 - INFO - 

** Downsampled to: 1332 samples, by matching to: ['build_existing_model.income', 'build_existing_model.ashrae_iecc_climate_zone_2004', 'build_existing_model.state', 'build_existing_model.geometry_building_type_recs', 'build_existing_model.heating_fuel', 'build_existing_model.hvac_cooling_type', 'build_existing_model.tenure', 'build_existing_model.water_heater_fuel', 'build_existing_model.vintage_acs', 'build_existing_model.geometry_floor_area_bin', 'build_existing_model.hvac_heating_type']
2023-06-21 01:52:19,499 - INFO - 
 -> Step 3 : Weight Normalization
2023-06-21 01:52:19,502 - INFO - Checking marginals from weight_map of n=1332...
2023-06-21 01:52:19,510 - INFO -  [[ build_existing_model.income ]] 
2023-06-21 01:52:19,518 - INFO - 
                matched     truth  pct_diff
10000-14999    0.062657  0.062657       0.0
100000-119999  0.045113  0.045113       0.0
120000-139999  0.042607  0.042607       0.0
140000-159999  0.022556  0.022556       0.0
15000-19999    0.062657  0.062657       0.0
160000-179999  0.025063  0.025063       0.0
180000-199999  0.007519  0.007519       0.0
20000-24999    0.060150  0.060150       0.0
200000+        0.080201  0.080201       0.0
25000-29999    0.050125  0.050125       0.0
30000-34999    0.050125  0.050125       0.0
35000-39999    0.037594  0.037594       0.0
40000-44999    0.030075  0.030075       0.0
45000-49999    0.017544  0.017544       0.0
50000-59999    0.075188  0.075188       0.0
60000-69999    0.047619  0.047619       0.0
70000-79999    0.047619  0.047619       0.0
80000-99999    0.085213  0.085213       0.0
<10000         0.150376  0.150376       0.0

2023-06-21 01:52:19,523 - INFO -  [[ build_existing_model.ashrae_iecc_climate_zone_2004 ]] 
2023-06-21 01:52:19,527 - INFO - 
    matched  truth  pct_diff
5A      1.0    1.0       0.0

2023-06-21 01:52:19,532 - INFO -  [[ build_existing_model.state ]] 
2023-06-21 01:52:19,537 - INFO - 
    matched  truth  pct_diff
PA      1.0    1.0       0.0

2023-06-21 01:52:19,543 - INFO -  [[ build_existing_model.geometry_building_type_recs ]] 
2023-06-21 01:52:19,548 - INFO - 
                                matched     truth  pct_diff
Mobile Home                    0.002506  0.002506       0.0
Multi-Family with 2 - 4 Units  0.167920  0.167920       0.0
Multi-Family with 5+ Units     0.328321  0.328321       0.0
Single-Family Attached         0.167920  0.167920       0.0
Single-Family Detached         0.333333  0.333333       0.0

2023-06-21 01:52:19,553 - INFO -  [[ build_existing_model.heating_fuel ]] 
2023-06-21 01:52:19,558 - INFO - 
              matched     truth  pct_diff
Electricity  0.228070  0.228070       0.0
Fuel Oil     0.005013  0.005013       0.0
Natural Gas  0.749373  0.749373       0.0
None         0.002506  0.002506       0.0
Propane      0.015038  0.015038       0.0

2023-06-21 01:52:19,564 - INFO -  [[ build_existing_model.hvac_cooling_type ]] 
2023-06-21 01:52:19,569 - INFO - 
             matched     truth  pct_diff
Central AC  0.348371  0.348371       0.0
Heat Pump   0.042607  0.042607       0.0
None        0.215539  0.215539       0.0
Room AC     0.393484  0.393484       0.0

2023-06-21 01:52:19,574 - INFO -  [[ build_existing_model.tenure ]] 
2023-06-21 01:52:19,579 - INFO - 
         matched     truth  pct_diff
Owner   0.406015  0.406015       0.0
Renter  0.593985  0.593985       0.0

2023-06-21 01:52:19,584 - INFO -  [[ build_existing_model.water_heater_fuel ]] 
2023-06-21 01:52:19,588 - INFO - 
              matched     truth  pct_diff
Electricity  0.223058  0.223058       0.0
Fuel Oil     0.027569  0.027569       0.0
Natural Gas  0.736842  0.736842       0.0
Propane      0.012531  0.012531       0.0

2023-06-21 01:52:19,593 - INFO -  [[ build_existing_model.vintage_acs ]] 
2023-06-21 01:52:19,598 - INFO - 
          matched     truth  pct_diff
1940-59  0.175439  0.175439       0.0
1960-79  0.160401  0.160401       0.0
1980-99  0.092732  0.092732       0.0
2000-09  0.037594  0.037594       0.0
2010s    0.030075  0.030075       0.0
<1940    0.503759  0.503759       0.0

2023-06-21 01:52:19,604 - INFO -  [[ build_existing_model.geometry_floor_area_bin ]] 
2023-06-21 01:52:19,609 - INFO - 
            matched     truth  pct_diff
0-1499     0.671679  0.671679       0.0
1500-2499  0.208020  0.208020       0.0
2500-3999  0.080201  0.080201       0.0
4000+      0.040100  0.040100       0.0

2023-06-21 01:52:19,615 - INFO -  [[ build_existing_model.hvac_heating_type ]] 
2023-06-21 01:52:19,619 - INFO - 
                     matched     truth  pct_diff
Ducted Heat Pump    0.042607  0.042607       0.0
Ducted Heating      0.558897  0.558897       0.0
Non-Ducted Heating  0.395990  0.395990       0.0
None                0.002506  0.002506       0.0

2023-06-21 01:52:19,620 - INFO - For unmatched HC:
2023-06-21 01:52:19,620 - INFO - Checking marginals from weight_map of n=1332...
2023-06-21 01:52:19,626 - INFO -  [[ build_existing_model.federal_poverty_level ]] 
2023-06-21 01:52:19,631 - INFO - 
           matched     truth   pct_diff
0-100%    0.237838  0.230576   3.149155
100-150%  0.101814  0.115288 -11.687371
150-200%  0.072721  0.065163  11.598387
200-300%  0.134568  0.142857  -5.802472
300-400%  0.095606  0.097744  -2.187751
400%+     0.357454  0.348371   2.607208

2023-06-21 01:52:19,636 - INFO -  [[ build_existing_model.vacancy_status ]] 
2023-06-21 01:52:19,640 - INFO - 
           matched     truth   pct_diff
Occupied  0.869248  0.882206  -1.468812
Vacant    0.130752  0.117794  11.000461

2023-06-21 01:52:19,654 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-21 01:52:19,660 - INFO - 
                                                       matched  ...   pct_diff
report_simulation_output.energy_use_total_m_btu     103.945205  ...  -1.729149
report_simulation_output.fuel_use_electricity_t...   27.757594  ...  -1.695604
report_simulation_output.fuel_use_fuel_oil_tota...    0.675655  ... -14.258646
report_simulation_output.fuel_use_natural_gas_t...   74.420331  ...  -1.641747
report_simulation_output.fuel_use_propane_total...    1.091634  ...   0.398320

[5 rows x 3 columns]

2023-06-21 01:52:19,674 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-21 01:52:19,681 - INFO - 
                                                                                           matched  ...   pct_diff
build_existing_model.vacancy_status                                                                 ...           
Occupied                            report_simulation_output.energy_use_total_m_btu     112.394124  ...  -1.141399
                                    report_simulation_output.fuel_use_electricity_t...   30.233765  ...  -0.633657
                                    report_simulation_output.fuel_use_fuel_oil_tota...    0.763929  ... -13.196918
                                    report_simulation_output.fuel_use_natural_gas_t...   80.290223  ...  -1.242187
                                    report_simulation_output.fuel_use_propane_total...    1.106223  ...   1.949887
Vacant                              report_simulation_output.energy_use_total_m_btu      47.776439  ...   2.797192
                                    report_simulation_output.fuel_use_electricity_t...   11.295902  ...  -4.540702
                                    report_simulation_output.fuel_use_fuel_oil_tota...    0.088805  ...  -9.910284
                                    report_simulation_output.fuel_use_natural_gas_t...   35.397046  ...   5.850930
                                    report_simulation_output.fuel_use_propane_total...    0.994648  ...  -9.910284

[10 rows x 3 columns]

2023-06-21 01:52:19,693 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-21 01:52:19,700 - INFO - 
                                                                                   matched  ...   pct_diff
build_existing_model.tenure                                                                 ...           
Owner                       report_simulation_output.energy_use_total_m_btu     152.279911  ...  -3.161784
                            report_simulation_output.fuel_use_electricity_t...   31.966630  ...  -2.431013
                            report_simulation_output.fuel_use_fuel_oil_tota...    0.655100  ... -29.698161
                            report_simulation_output.fuel_use_natural_gas_t...  118.942649  ...  -3.173810
                            report_simulation_output.fuel_use_propane_total...    0.715506  ...  -0.000000
Renter                      report_simulation_output.energy_use_total_m_btu      70.906291  ...   0.452446
                            report_simulation_output.fuel_use_electricity_t...   24.880531  ...  -1.040549
                            report_simulation_output.fuel_use_fuel_oil_tota...    0.689705  ...  -0.000000
                            report_simulation_output.fuel_use_natural_gas_t...   43.987355  ...   1.321456
                            report_simulation_output.fuel_use_propane_total...    1.348734  ...   0.543544

[10 rows x 3 columns]

2023-06-21 01:52:19,716 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-21 01:52:19,725 - INFO - 
                                                                                                  matched  ...   pct_diff
build_existing_model.federal_poverty_level                                                                 ...           
0-100%                                     report_simulation_output.energy_use_total_m_btu      79.802003  ...  -1.771006
                                           report_simulation_output.fuel_use_electricity_t...   25.597855  ...  -2.460289
                                           report_simulation_output.fuel_use_fuel_oil_tota...    0.676996  ...  -3.053011
                                           report_simulation_output.fuel_use_natural_gas_t...   52.560748  ...  -1.413603
                                           report_simulation_output.fuel_use_propane_total...    0.966408  ...  -1.841993
100-150%                                   report_simulation_output.energy_use_total_m_btu     100.585843  ...  -7.699750
                                           report_simulation_output.fuel_use_electricity_t...   26.343451  ...  -8.279126
                                           report_simulation_output.fuel_use_fuel_oil_tota...    0.287418  ...  13.234087
                                           report_simulation_output.fuel_use_natural_gas_t...   70.538043  ...  -8.396419
                                           report_simulation_output.fuel_use_propane_total...    3.416987  ...  13.971411
150-200%                                   report_simulation_output.energy_use_total_m_btu      93.603400  ...   8.704601
                                           report_simulation_output.fuel_use_electricity_t...   29.548919  ...   4.798696
                                           report_simulation_output.fuel_use_fuel_oil_tota...    0.809531  ... -10.392970
                                           report_simulation_output.fuel_use_natural_gas_t...   63.130494  ...  10.915938
                                           report_simulation_output.fuel_use_propane_total...    0.114398  ...  25.447322
200-300%                                   report_simulation_output.energy_use_total_m_btu     107.434753  ...  -3.108044
                                           report_simulation_output.fuel_use_electricity_t...   28.433353  ...  -1.185557
                                           report_simulation_output.fuel_use_fuel_oil_tota...    0.139852  ...   6.159898
                                           report_simulation_output.fuel_use_natural_gas_t...   78.831916  ...  -3.768006
                                           report_simulation_output.fuel_use_propane_total...    0.029610  ... -47.224345
300-400%                                   report_simulation_output.energy_use_total_m_btu     102.804686  ...  -9.838621
                                           report_simulation_output.fuel_use_electricity_t...   31.752205  ...  -6.255767
                                           report_simulation_output.fuel_use_fuel_oil_tota...    0.300209  ...   2.236684
                                           report_simulation_output.fuel_use_natural_gas_t...   67.633543  ... -11.955979
                                           report_simulation_output.fuel_use_propane_total...    3.118782  ...   2.576821
400%+                                      report_simulation_output.energy_use_total_m_btu     122.061442  ...   1.529782
                                           report_simulation_output.fuel_use_electricity_t...   27.910162  ...   1.120743
                                           report_simulation_output.fuel_use_fuel_oil_tota...    1.060237  ... -24.827755
                                           report_simulation_output.fuel_use_natural_gas_t...   92.522002  ...   2.091063
                                           report_simulation_output.fuel_use_propane_total...    0.569055  ...  -2.584290

[30 rows x 3 columns]

2023-06-21 01:52:19,740 - INFO - >> Database down-selected to 1332 buildings, based on input data of 399 buildings, result outputs to: 
/Users/lliu2/Documents/GitHub/ResStock/euss_cleap/data_/downsampled_buildings_id/euss1_2018_results_up00__downsampled_method1__hill_district.csv

2023-06-21 01:52:44,827 - INFO - ---------------------------------------------------------
2023-06-21 01:52:44,828 - INFO - Downsampling buildstock for  san_jose  using method 1
2023-06-21 01:52:44,829 - INFO - ---------------------------------------------------------
2023-06-21 01:52:44,895 - INFO - Creating n>=1000 buildlstock by downsampling from: bst_to_search (548916 samples) 
while matching the marginal distribution of 13 key HCs from: bst_to_match (882 samples), 
['Income', 'ASHRAE IECC Climate Zone 2004', 'State', 'Geometry Building Type RECS', 'Heating Fuel', 'HVAC Cooling Type', 'Tenure', 'Water Heater Fuel', 'Vintage ACS', 'Geometry Floor Area Bin', 'HVAC Heating Type', 'Federal Poverty Level', 'Vacancy Status']
2023-06-21 01:52:44,896 - INFO - 
2023-06-21 01:52:44,896 - INFO - 
---- Attempt 1: downsample using 13 key HCs: ----
2023-06-21 01:52:45,041 - INFO -    Located 12908 positively weighted rows in bst_to_search
2023-06-21 01:52:45,042 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2023-06-21 01:52:45,313 - INFO - 

** Downsampled to: 3155 samples, by matching to: ['build_existing_model.income', 'build_existing_model.ashrae_iecc_climate_zone_2004', 'build_existing_model.state', 'build_existing_model.geometry_building_type_recs', 'build_existing_model.heating_fuel', 'build_existing_model.hvac_cooling_type', 'build_existing_model.tenure', 'build_existing_model.water_heater_fuel', 'build_existing_model.vintage_acs', 'build_existing_model.geometry_floor_area_bin', 'build_existing_model.hvac_heating_type', 'build_existing_model.federal_poverty_level', 'build_existing_model.vacancy_status']
2023-06-21 01:52:45,328 - INFO - 
 -> Step 3 : Weight Normalization
2023-06-21 01:52:45,330 - INFO - Checking marginals from weight_map of n=3155...
2023-06-21 01:52:45,335 - INFO -  [[ build_existing_model.income ]] 
2023-06-21 01:52:45,340 - INFO - 
                matched     truth  pct_diff
10000-14999    0.026077  0.026077       0.0
100000-119999  0.089569  0.089569       0.0
120000-139999  0.071429  0.071429       0.0
140000-159999  0.048753  0.048753       0.0
15000-19999    0.015873  0.015873       0.0
160000-179999  0.055556  0.055556       0.0
180000-199999  0.036281  0.036281       0.0
20000-24999    0.018141  0.018141       0.0
200000+        0.275510  0.275510       0.0
25000-29999    0.022676  0.022676       0.0
30000-34999    0.018141  0.018141       0.0
35000-39999    0.019274  0.019274       0.0
40000-44999    0.024943  0.024943       0.0
45000-49999    0.020408  0.020408       0.0
50000-59999    0.045351  0.045351       0.0
60000-69999    0.036281  0.036281       0.0
70000-79999    0.038549  0.038549       0.0
80000-99999    0.112245  0.112245       0.0
<10000         0.024943  0.024943       0.0

2023-06-21 01:52:45,344 - INFO -  [[ build_existing_model.ashrae_iecc_climate_zone_2004 ]] 
2023-06-21 01:52:45,348 - INFO - 
    matched  truth  pct_diff
3C      1.0    1.0       0.0

2023-06-21 01:52:45,353 - INFO -  [[ build_existing_model.state ]] 
2023-06-21 01:52:45,357 - INFO - 
    matched  truth  pct_diff
CA      1.0    1.0       0.0

2023-06-21 01:52:45,362 - INFO -  [[ build_existing_model.geometry_building_type_recs ]] 
2023-06-21 01:52:45,365 - INFO - 
                                matched     truth  pct_diff
Mobile Home                    0.030612  0.030612       0.0
Multi-Family with 2 - 4 Units  0.074830  0.074830       0.0
Multi-Family with 5+ Units     0.231293  0.231293       0.0
Single-Family Attached         0.095238  0.095238       0.0
Single-Family Detached         0.568027  0.568027       0.0

2023-06-21 01:52:45,369 - INFO -  [[ build_existing_model.heating_fuel ]] 
2023-06-21 01:52:45,375 - INFO - 
              matched     truth  pct_diff
Electricity  0.335601  0.335601       0.0
Natural Gas  0.650794  0.650794       0.0
None         0.001134  0.001134       0.0
Other Fuel   0.007937  0.007937       0.0
Propane      0.004535  0.004535       0.0

2023-06-21 01:52:45,380 - INFO -  [[ build_existing_model.hvac_cooling_type ]] 
2023-06-21 01:52:45,384 - INFO - 
             matched     truth  pct_diff
Central AC  0.195011  0.195011      -0.0
None        0.698413  0.698413       0.0
Room AC     0.106576  0.106576      -0.0

2023-06-21 01:52:45,389 - INFO -  [[ build_existing_model.tenure ]] 
2023-06-21 01:52:45,392 - INFO - 
         matched     truth  pct_diff
Owner   0.600907  0.600907       0.0
Renter  0.399093  0.399093       0.0

2023-06-21 01:52:45,397 - INFO -  [[ build_existing_model.water_heater_fuel ]] 
2023-06-21 01:52:45,401 - INFO - 
              matched     truth  pct_diff
Electricity  0.129252  0.129252       0.0
Natural Gas  0.854875  0.854875       0.0
Propane      0.015873  0.015873       0.0

2023-06-21 01:52:45,406 - INFO -  [[ build_existing_model.vintage_acs ]] 
2023-06-21 01:52:45,411 - INFO - 
          matched     truth  pct_diff
1940-59  0.168934  0.168934       0.0
1960-79  0.501134  0.501134       0.0
1980-99  0.213152  0.213152       0.0
2000-09  0.068027  0.068027       0.0
2010s    0.024943  0.024943       0.0
<1940    0.023810  0.023810       0.0

2023-06-21 01:52:45,415 - INFO -  [[ build_existing_model.geometry_floor_area_bin ]] 
2023-06-21 01:52:45,419 - INFO - 
            matched     truth  pct_diff
0-1499     0.528345  0.528345       0.0
1500-2499  0.327664  0.327664       0.0
2500-3999  0.117914  0.117914       0.0
4000+      0.026077  0.026077       0.0

2023-06-21 01:52:45,424 - INFO -  [[ build_existing_model.hvac_heating_type ]] 
2023-06-21 01:52:45,428 - INFO - 
                     matched     truth  pct_diff
Ducted Heating      0.637188  0.637188       0.0
Non-Ducted Heating  0.361678  0.361678       0.0
None                0.001134  0.001134       0.0

2023-06-21 01:52:45,434 - INFO -  [[ build_existing_model.federal_poverty_level ]] 
2023-06-21 01:52:45,438 - INFO - 
           matched     truth  pct_diff
0-100%    0.058957  0.058957       0.0
100-150%  0.041950  0.041950       0.0
150-200%  0.036281  0.036281       0.0
200-300%  0.080499  0.080499       0.0
300-400%  0.096372  0.096372       0.0
400%+     0.685941  0.685941      -0.0

2023-06-21 01:52:45,442 - INFO -  [[ build_existing_model.vacancy_status ]] 
2023-06-21 01:52:45,445 - INFO - 
           matched     truth  pct_diff
Occupied  0.960317  0.960317       0.0
Vacant    0.039683  0.039683       0.0

2023-06-21 01:52:45,446 - INFO - No unmatched HC
2023-06-21 01:52:45,463 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-21 01:52:45,467 - INFO - 
                                                      matched  ...  pct_diff
report_simulation_output.energy_use_total_m_btu     49.206102  ...  1.566723
report_simulation_output.fuel_use_electricity_t...  22.642927  ... -0.608265
report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...       NaN
report_simulation_output.fuel_use_natural_gas_t...  26.281749  ...  3.514166
report_simulation_output.fuel_use_propane_total...   0.281403  ...  1.958091

[5 rows x 3 columns]

2023-06-21 01:52:45,476 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-21 01:52:45,482 - INFO - 
                                                                                          matched  ...  pct_diff
build_existing_model.vacancy_status                                                                ...          
Occupied                            report_simulation_output.energy_use_total_m_btu     50.855679  ...  1.532124
                                    report_simulation_output.fuel_use_electricity_t...  23.397548  ... -0.644136
                                    report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...       NaN
                                    report_simulation_output.fuel_use_natural_gas_t...  27.165075  ...  3.479824
                                    report_simulation_output.fuel_use_propane_total...   0.293031  ...  1.958091
Vacant                              report_simulation_output.energy_use_total_m_btu      9.286335  ...  6.370594
                                    report_simulation_output.fuel_use_electricity_t...   4.381092  ...  4.256404
                                    report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...       NaN
                                    report_simulation_output.fuel_use_natural_gas_t...   4.905269  ...  8.332587
                                    report_simulation_output.fuel_use_propane_total...   0.000000  ...       NaN

[10 rows x 3 columns]

2023-06-21 01:52:45,490 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-21 01:52:45,495 - INFO - 
                                                                                  matched  ...  pct_diff
build_existing_model.tenure                                                                ...          
Owner                       report_simulation_output.energy_use_total_m_btu     58.837194  ...  2.360876
                            report_simulation_output.fuel_use_electricity_t...  25.636280  ... -0.447764
                            report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...       NaN
                            report_simulation_output.fuel_use_natural_gas_t...  32.860155  ...  4.682197
                            report_simulation_output.fuel_use_propane_total...   0.340743  ...  0.774528
Renter                      report_simulation_output.energy_use_total_m_btu     34.704742  ... -0.405702
                            report_simulation_output.fuel_use_electricity_t...  18.135889  ... -0.948156
                            report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...       NaN
                            report_simulation_output.fuel_use_natural_gas_t...  16.376764  ...  0.138517
                            report_simulation_output.fuel_use_propane_total...   0.192056  ...  5.260568

[10 rows x 3 columns]

2023-06-21 01:52:45,506 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-21 01:52:45,516 - INFO - 
                                                                                                 matched  ...   pct_diff
build_existing_model.federal_poverty_level                                                                ...           
0-100%                                     report_simulation_output.energy_use_total_m_btu     41.176094  ...   1.756290
                                           report_simulation_output.fuel_use_electricity_t...  18.353507  ...   1.920369
                                           report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                           report_simulation_output.fuel_use_natural_gas_t...  22.452185  ...   1.477127
                                           report_simulation_output.fuel_use_propane_total...   0.370356  ...  11.456103
100-150%                                   report_simulation_output.energy_use_total_m_btu     39.008341  ...   1.372815
                                           report_simulation_output.fuel_use_electricity_t...  20.247601  ...   1.552268
                                           report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                           report_simulation_output.fuel_use_natural_gas_t...  18.760690  ...   1.180461
                                           report_simulation_output.fuel_use_propane_total...   0.000000  ...        NaN
150-200%                                   report_simulation_output.energy_use_total_m_btu     40.010251  ...   2.293753
                                           report_simulation_output.fuel_use_electricity_t...  19.111994  ...  -3.527155
                                           report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                           report_simulation_output.fuel_use_natural_gas_t...  20.898298  ...   8.267840
                                           report_simulation_output.fuel_use_propane_total...   0.000000  ...        NaN
200-300%                                   report_simulation_output.energy_use_total_m_btu     47.341195  ...  -3.935608
                                           report_simulation_output.fuel_use_electricity_t...  22.755082  ...  -3.186112
                                           report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                           report_simulation_output.fuel_use_natural_gas_t...  24.286369  ...  -4.673200
                                           report_simulation_output.fuel_use_propane_total...   0.299648  ...  -0.000000
300-400%                                   report_simulation_output.energy_use_total_m_btu     47.056991  ...   0.097805
                                           report_simulation_output.fuel_use_electricity_t...  22.661439  ...  -0.681470
                                           report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                           report_simulation_output.fuel_use_natural_gas_t...  24.070989  ...   0.844253
                                           report_simulation_output.fuel_use_propane_total...   0.324529  ...   0.000000
400%+                                      report_simulation_output.energy_use_total_m_btu     51.527139  ...   2.357678
                                           report_simulation_output.fuel_use_electricity_t...  23.329093  ...  -0.443732
                                           report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                           report_simulation_output.fuel_use_natural_gas_t...  27.900383  ...   4.833002
                                           report_simulation_output.fuel_use_propane_total...   0.297651  ...   1.572039

[30 rows x 3 columns]

2023-06-21 01:52:45,529 - INFO - >> Database down-selected to 3155 buildings, based on input data of 882 buildings, result outputs to: 
/Users/lliu2/Documents/GitHub/ResStock/euss_cleap/data_/downsampled_buildings_id/euss1_2018_results_up00__downsampled_method1__san_jose.csv

2023-06-21 01:53:09,188 - INFO - ---------------------------------------------------------
2023-06-21 01:53:09,189 - INFO - Downsampling buildstock for  columbia  using method 1
2023-06-21 01:53:09,189 - INFO - ---------------------------------------------------------
2023-06-21 01:53:09,271 - INFO - Creating n>=1000 buildlstock by downsampling from: bst_to_search (548916 samples) 
while matching the marginal distribution of 13 key HCs from: bst_to_match (363 samples), 
['Income', 'ASHRAE IECC Climate Zone 2004', 'State', 'Geometry Building Type RECS', 'Heating Fuel', 'HVAC Cooling Type', 'Tenure', 'Water Heater Fuel', 'Vintage ACS', 'Geometry Floor Area Bin', 'HVAC Heating Type', 'Federal Poverty Level', 'Vacancy Status']
2023-06-21 01:53:09,275 - INFO - 
2023-06-21 01:53:09,275 - INFO - 
---- Attempt 1: downsample using 13 key HCs: ----
2023-06-21 01:53:09,416 - INFO -    Located 8930 positively weighted rows in bst_to_search
2023-06-21 01:53:09,417 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2023-06-21 01:53:09,525 - INFO -    Downsampling FAILED with insufficient rows: Recalculation leads to 928 positively weighted samples 
retry by relaxing HC_to_search by removing: build_existing_model.vacancy_status...
2023-06-21 01:53:09,525 - INFO - 
---- Attempt 2: downsample using 12 key HCs: ----
2023-06-21 01:53:09,532 - INFO -    Located 8930 positively weighted rows in bst_to_search
2023-06-21 01:53:09,533 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2023-06-21 01:53:09,571 - INFO - 

** Downsampled to: 1120 samples, by matching to: ['build_existing_model.income', 'build_existing_model.ashrae_iecc_climate_zone_2004', 'build_existing_model.state', 'build_existing_model.geometry_building_type_recs', 'build_existing_model.heating_fuel', 'build_existing_model.hvac_cooling_type', 'build_existing_model.tenure', 'build_existing_model.water_heater_fuel', 'build_existing_model.vintage_acs', 'build_existing_model.geometry_floor_area_bin', 'build_existing_model.hvac_heating_type', 'build_existing_model.federal_poverty_level']
2023-06-21 01:53:09,585 - INFO - 
 -> Step 3 : Weight Normalization
2023-06-21 01:53:09,590 - INFO - Checking marginals from weight_map of n=1120...
2023-06-21 01:53:09,602 - INFO -  [[ build_existing_model.income ]] 
2023-06-21 01:53:09,614 - INFO - 
                matched     truth  pct_diff
10000-14999    0.035813  0.035813       0.0
100000-119999  0.046832  0.046832       0.0
120000-139999  0.033058  0.033058       0.0
140000-159999  0.013774  0.013774       0.0
15000-19999    0.066116  0.066116       0.0
160000-179999  0.019284  0.019284       0.0
180000-199999  0.008264  0.008264       0.0
20000-24999    0.066116  0.066116       0.0
200000+        0.052342  0.052342       0.0
25000-29999    0.049587  0.049587       0.0
30000-34999    0.055096  0.055096       0.0
35000-39999    0.041322  0.041322       0.0
40000-44999    0.049587  0.049587       0.0
45000-49999    0.035813  0.035813       0.0
50000-59999    0.088154  0.088154       0.0
60000-69999    0.055096  0.055096       0.0
70000-79999    0.055096  0.055096       0.0
80000-99999    0.096419  0.096419       0.0
<10000         0.132231  0.132231       0.0

2023-06-21 01:53:09,619 - INFO -  [[ build_existing_model.ashrae_iecc_climate_zone_2004 ]] 
2023-06-21 01:53:09,623 - INFO - 
    matched  truth  pct_diff
3A      1.0    1.0       0.0

2023-06-21 01:53:09,628 - INFO -  [[ build_existing_model.state ]] 
2023-06-21 01:53:09,631 - INFO - 
    matched  truth  pct_diff
SC      1.0    1.0       0.0

2023-06-21 01:53:09,635 - INFO -  [[ build_existing_model.geometry_building_type_recs ]] 
2023-06-21 01:53:09,638 - INFO - 
                                matched     truth  pct_diff
Mobile Home                    0.019284  0.019284       0.0
Multi-Family with 2 - 4 Units  0.110193  0.110193       0.0
Multi-Family with 5+ Units     0.305785  0.305785       0.0
Single-Family Attached         0.030303  0.030303      -0.0
Single-Family Detached         0.534435  0.534435       0.0

2023-06-21 01:53:09,642 - INFO -  [[ build_existing_model.heating_fuel ]] 
2023-06-21 01:53:09,645 - INFO - 
              matched     truth  pct_diff
Electricity  0.754821  0.754821       0.0
Natural Gas  0.236915  0.236915       0.0
Other Fuel   0.002755  0.002755       0.0
Propane      0.005510  0.005510       0.0

2023-06-21 01:53:09,648 - INFO -  [[ build_existing_model.hvac_cooling_type ]] 
2023-06-21 01:53:09,651 - INFO - 
             matched     truth  pct_diff
Central AC  0.573003  0.573003       0.0
Heat Pump   0.269972  0.269972       0.0
None        0.027548  0.027548       0.0
Room AC     0.129477  0.129477       0.0

2023-06-21 01:53:09,656 - INFO -  [[ build_existing_model.tenure ]] 
2023-06-21 01:53:09,659 - INFO - 
         matched     truth  pct_diff
Owner   0.446281  0.446281       0.0
Renter  0.553719  0.553719       0.0

2023-06-21 01:53:09,663 - INFO -  [[ build_existing_model.water_heater_fuel ]] 
2023-06-21 01:53:09,667 - INFO - 
              matched     truth  pct_diff
Electricity  0.746556  0.746556      -0.0
Natural Gas  0.242424  0.242424      -0.0
Propane      0.011019  0.011019      -0.0

2023-06-21 01:53:09,672 - INFO -  [[ build_existing_model.vintage_acs ]] 
2023-06-21 01:53:09,676 - INFO - 
          matched     truth  pct_diff
1940-59  0.184573  0.184573      -0.0
1960-79  0.292011  0.292011      -0.0
1980-99  0.283747  0.283747      -0.0
2000-09  0.129477  0.129477       0.0
2010s    0.044077  0.044077       0.0
<1940    0.066116  0.066116      -0.0

2023-06-21 01:53:09,680 - INFO -  [[ build_existing_model.geometry_floor_area_bin ]] 
2023-06-21 01:53:09,683 - INFO - 
            matched     truth  pct_diff
0-1499     0.573003  0.573003      -0.0
1500-2499  0.280992  0.280992       0.0
2500-3999  0.134986  0.134986      -0.0
4000+      0.011019  0.011019      -0.0

2023-06-21 01:53:09,686 - INFO -  [[ build_existing_model.hvac_heating_type ]] 
2023-06-21 01:53:09,690 - INFO - 
                     matched     truth  pct_diff
Ducted Heat Pump    0.269972  0.269972      -0.0
Ducted Heating      0.561983  0.561983       0.0
Non-Ducted Heating  0.168044  0.168044      -0.0

2023-06-21 01:53:09,694 - INFO -  [[ build_existing_model.federal_poverty_level ]] 
2023-06-21 01:53:09,697 - INFO - 
           matched     truth  pct_diff
0-100%    0.181818  0.181818       0.0
100-150%  0.126722  0.126722       0.0
150-200%  0.099174  0.099174       0.0
200-300%  0.165289  0.165289       0.0
300-400%  0.129477  0.129477       0.0
400%+     0.297521  0.297521       0.0

2023-06-21 01:53:09,698 - INFO - For unmatched HC:
2023-06-21 01:53:09,698 - INFO - Checking marginals from weight_map of n=1120...
2023-06-21 01:53:09,702 - INFO -  [[ build_existing_model.vacancy_status ]] 
2023-06-21 01:53:09,707 - INFO - 
           matched     truth  pct_diff
Occupied  0.858427  0.862259 -0.444395
Vacant    0.141573  0.137741  2.781912

2023-06-21 01:53:09,718 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-21 01:53:09,725 - INFO - 
                                                      matched  ...   pct_diff
report_simulation_output.energy_use_total_m_btu     61.768399  ...   0.851759
report_simulation_output.fuel_use_electricity_t...  48.146330  ...  -2.074196
report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
report_simulation_output.fuel_use_natural_gas_t...  12.991402  ...  12.932843
report_simulation_output.fuel_use_propane_total...   0.630659  ...   9.310122

[5 rows x 3 columns]

2023-06-21 01:53:09,740 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-21 01:53:09,745 - INFO - 
                                                                                          matched  ...   pct_diff
build_existing_model.vacancy_status                                                                ...           
Occupied                            report_simulation_output.energy_use_total_m_btu     68.731724  ...   1.409500
                                    report_simulation_output.fuel_use_electricity_t...  53.297176  ...  -1.756624
                                    report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                    report_simulation_output.fuel_use_natural_gas_t...  14.699877  ...  14.332138
                                    report_simulation_output.fuel_use_propane_total...   0.734668  ...   9.798059
Vacant                              report_simulation_output.energy_use_total_m_btu     19.546280  ...  -4.047843
                                    report_simulation_output.fuel_use_electricity_t...  16.914180  ...  -2.456837
                                    report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                    report_simulation_output.fuel_use_natural_gas_t...   2.632068  ... -13.151403
                                    report_simulation_output.fuel_use_propane_total...   0.000000  ...        NaN

[10 rows x 3 columns]

2023-06-21 01:53:09,756 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-21 01:53:09,761 - INFO - 
                                                                                  matched  ...   pct_diff
build_existing_model.tenure                                                                ...           
Owner                       report_simulation_output.energy_use_total_m_btu     82.522096  ...   2.434009
                            report_simulation_output.fuel_use_electricity_t...  61.293989  ...  -2.518215
                            report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                            report_simulation_output.fuel_use_natural_gas_t...  19.946354  ...  20.678687
                            report_simulation_output.fuel_use_propane_total...   1.281728  ...  10.937696
Renter                      report_simulation_output.energy_use_total_m_btu     45.041539  ...  -1.397273
                            report_simulation_output.fuel_use_electricity_t...  37.549710  ...  -1.483837
                            report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                            report_simulation_output.fuel_use_natural_gas_t...   7.385918  ...  -0.910579
                            report_simulation_output.fuel_use_propane_total...   0.105917  ...  -4.373113

[10 rows x 3 columns]

2023-06-21 01:53:09,770 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-21 01:53:09,778 - INFO - 
                                                                                                 matched  ...   pct_diff
build_existing_model.federal_poverty_level                                                                ...           
0-100%                                     report_simulation_output.energy_use_total_m_btu     47.447132  ...  -4.981780
                                           report_simulation_output.fuel_use_electricity_t...  39.953443  ...  -5.667771
                                           report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                           report_simulation_output.fuel_use_natural_gas_t...   7.415457  ...  -0.090607
                                           report_simulation_output.fuel_use_propane_total...   0.078253  ... -50.680944
100-150%                                   report_simulation_output.energy_use_total_m_btu     57.471187  ...  -1.371875
                                           report_simulation_output.fuel_use_electricity_t...  44.481339  ...  -4.077745
                                           report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                           report_simulation_output.fuel_use_natural_gas_t...  12.582676  ...   9.346152
                                           report_simulation_output.fuel_use_propane_total...   0.407125  ...   4.112464
150-200%                                   report_simulation_output.energy_use_total_m_btu     51.409309  ...   3.811460
                                           report_simulation_output.fuel_use_electricity_t...  41.630888  ...   0.215245
                                           report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                           report_simulation_output.fuel_use_natural_gas_t...   9.461874  ...  23.461823
                                           report_simulation_output.fuel_use_propane_total...   0.316500  ...   0.000000
200-300%                                   report_simulation_output.energy_use_total_m_btu     57.941978  ...  -0.646482
                                           report_simulation_output.fuel_use_electricity_t...  43.906289  ...  -3.620365
                                           report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                           report_simulation_output.fuel_use_natural_gas_t...  12.856187  ...  10.860413
                                           report_simulation_output.fuel_use_propane_total...   1.179544  ...   1.093700
300-400%                                   report_simulation_output.energy_use_total_m_btu     70.967019  ...   3.243318
                                           report_simulation_output.fuel_use_electricity_t...  53.416127  ...  -0.799592
                                           report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                           report_simulation_output.fuel_use_natural_gas_t...  16.801806  ...  19.221830
                                           report_simulation_output.fuel_use_propane_total...   0.749117  ...  -6.140702
400%+                                      report_simulation_output.energy_use_total_m_btu     73.926294  ...   3.102017
                                           report_simulation_output.fuel_use_electricity_t...  56.948164  ...  -0.142815
                                           report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                           report_simulation_output.fuel_use_natural_gas_t...  16.166410  ...  14.673160
                                           report_simulation_output.fuel_use_propane_total...   0.811682  ...  41.257651

[30 rows x 3 columns]

2023-06-21 01:53:09,796 - INFO - >> Database down-selected to 1120 buildings, based on input data of 363 buildings, result outputs to: 
/Users/lliu2/Documents/GitHub/ResStock/euss_cleap/data_/downsampled_buildings_id/euss1_2018_results_up00__downsampled_method1__columbia.csv

2023-06-21 01:53:32,215 - INFO - ---------------------------------------------------------
2023-06-21 01:53:32,218 - INFO - Downsampling buildstock for  north_birmingham  using method 1
2023-06-21 01:53:32,219 - INFO - ---------------------------------------------------------
2023-06-21 01:53:32,323 - INFO - Creating n>=1000 buildlstock by downsampling from: bst_to_search (548916 samples) 
while matching the marginal distribution of 13 key HCs from: bst_to_match (470 samples), 
['Income', 'ASHRAE IECC Climate Zone 2004', 'State', 'Geometry Building Type RECS', 'Heating Fuel', 'HVAC Cooling Type', 'Tenure', 'Water Heater Fuel', 'Vintage ACS', 'Geometry Floor Area Bin', 'HVAC Heating Type', 'Federal Poverty Level', 'Vacancy Status']
2023-06-21 01:53:32,325 - INFO - 
2023-06-21 01:53:32,325 - INFO - 
---- Attempt 1: downsample using 13 key HCs: ----
2023-06-21 01:53:32,487 - INFO -    Located 7881 positively weighted rows in bst_to_search
2023-06-21 01:53:32,488 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2023-06-21 01:53:32,554 - INFO -    Downsampling FAILED with insufficient rows: Recalculation leads to 970 positively weighted samples 
retry by relaxing HC_to_search by removing: build_existing_model.vacancy_status...
2023-06-21 01:53:32,555 - INFO - 
---- Attempt 2: downsample using 12 key HCs: ----
2023-06-21 01:53:32,564 - INFO -    Located 7881 positively weighted rows in bst_to_search
2023-06-21 01:53:32,565 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2023-06-21 01:53:32,606 - INFO - 

** Downsampled to: 1124 samples, by matching to: ['build_existing_model.income', 'build_existing_model.ashrae_iecc_climate_zone_2004', 'build_existing_model.state', 'build_existing_model.geometry_building_type_recs', 'build_existing_model.heating_fuel', 'build_existing_model.hvac_cooling_type', 'build_existing_model.tenure', 'build_existing_model.water_heater_fuel', 'build_existing_model.vintage_acs', 'build_existing_model.geometry_floor_area_bin', 'build_existing_model.hvac_heating_type', 'build_existing_model.federal_poverty_level']
2023-06-21 01:53:32,626 - INFO - 
 -> Step 3 : Weight Normalization
2023-06-21 01:53:32,628 - INFO - Checking marginals from weight_map of n=1124...
2023-06-21 01:53:32,640 - INFO -  [[ build_existing_model.income ]] 
2023-06-21 01:53:32,649 - INFO - 
                matched     truth  pct_diff
10000-14999    0.089362  0.089362       0.0
100000-119999  0.040426  0.040426       0.0
120000-139999  0.036170  0.036170       0.0
140000-159999  0.014894  0.014894       0.0
15000-19999    0.078723  0.078723      -0.0
160000-179999  0.002128  0.002128       0.0
180000-199999  0.008511  0.008511       0.0
20000-24999    0.065957  0.065957       0.0
200000+        0.040426  0.040426      -0.0
25000-29999    0.059574  0.059574       0.0
30000-34999    0.051064  0.051064       0.0
35000-39999    0.031915  0.031915       0.0
40000-44999    0.051064  0.051064       0.0
45000-49999    0.038298  0.038298       0.0
50000-59999    0.072340  0.072340       0.0
60000-69999    0.055319  0.055319       0.0
70000-79999    0.042553  0.042553       0.0
80000-99999    0.070213  0.070213       0.0
<10000         0.151064  0.151064       0.0

2023-06-21 01:53:32,656 - INFO -  [[ build_existing_model.ashrae_iecc_climate_zone_2004 ]] 
2023-06-21 01:53:32,662 - INFO - 
    matched  truth  pct_diff
3A      1.0    1.0       0.0

2023-06-21 01:53:32,667 - INFO -  [[ build_existing_model.state ]] 
2023-06-21 01:53:32,672 - INFO - 
    matched  truth  pct_diff
AL      1.0    1.0       0.0

2023-06-21 01:53:32,677 - INFO -  [[ build_existing_model.geometry_building_type_recs ]] 
2023-06-21 01:53:32,682 - INFO - 
                                matched     truth  pct_diff
Mobile Home                    0.014894  0.014894       0.0
Multi-Family with 2 - 4 Units  0.068085  0.068085       0.0
Multi-Family with 5+ Units     0.246809  0.246809       0.0
Single-Family Attached         0.014894  0.014894       0.0
Single-Family Detached         0.655319  0.655319       0.0

2023-06-21 01:53:32,687 - INFO -  [[ build_existing_model.heating_fuel ]] 
2023-06-21 01:53:32,691 - INFO - 
              matched     truth  pct_diff
Electricity  0.487234  0.487234      -0.0
Natural Gas  0.502128  0.502128       0.0
Other Fuel   0.002128  0.002128       0.0
Propane      0.008511  0.008511       0.0

2023-06-21 01:53:32,696 - INFO -  [[ build_existing_model.hvac_cooling_type ]] 
2023-06-21 01:53:32,701 - INFO - 
             matched     truth  pct_diff
Central AC  0.653191  0.653191       0.0
Heat Pump   0.121277  0.121277       0.0
None        0.036170  0.036170       0.0
Room AC     0.189362  0.189362       0.0

2023-06-21 01:53:32,706 - INFO -  [[ build_existing_model.tenure ]] 
2023-06-21 01:53:32,710 - INFO - 
         matched     truth  pct_diff
Owner   0.523404  0.523404       0.0
Renter  0.476596  0.476596       0.0

2023-06-21 01:53:32,717 - INFO -  [[ build_existing_model.water_heater_fuel ]] 
2023-06-21 01:53:32,722 - INFO - 
              matched     truth  pct_diff
Electricity  0.542553  0.542553       0.0
Natural Gas  0.455319  0.455319       0.0
Propane      0.002128  0.002128       0.0

2023-06-21 01:53:32,727 - INFO -  [[ build_existing_model.vintage_acs ]] 
2023-06-21 01:53:32,732 - INFO - 
          matched     truth  pct_diff
1940-59  0.304255  0.304255       0.0
1960-79  0.289362  0.289362       0.0
1980-99  0.146809  0.146809       0.0
2000-09  0.072340  0.072340       0.0
2010s    0.031915  0.031915       0.0
<1940    0.155319  0.155319       0.0

2023-06-21 01:53:32,738 - INFO -  [[ build_existing_model.geometry_floor_area_bin ]] 
2023-06-21 01:53:32,743 - INFO - 
            matched     truth  pct_diff
0-1499     0.621277  0.621277       0.0
1500-2499  0.289362  0.289362       0.0
2500-3999  0.076596  0.076596      -0.0
4000+      0.012766  0.012766       0.0

2023-06-21 01:53:32,748 - INFO -  [[ build_existing_model.hvac_heating_type ]] 
2023-06-21 01:53:32,753 - INFO - 
                     matched     truth  pct_diff
Ducted Heat Pump    0.121277  0.121277       0.0
Ducted Heating      0.670213  0.670213       0.0
Non-Ducted Heating  0.208511  0.208511       0.0

2023-06-21 01:53:32,760 - INFO -  [[ build_existing_model.federal_poverty_level ]] 
2023-06-21 01:53:32,767 - INFO - 
           matched     truth  pct_diff
0-100%    0.234043  0.234043       0.0
100-150%  0.142553  0.142553       0.0
150-200%  0.093617  0.093617       0.0
200-300%  0.148936  0.148936       0.0
300-400%  0.110638  0.110638       0.0
400%+     0.270213  0.270213       0.0

2023-06-21 01:53:32,769 - INFO - For unmatched HC:
2023-06-21 01:53:32,769 - INFO - Checking marginals from weight_map of n=1124...
2023-06-21 01:53:32,775 - INFO -  [[ build_existing_model.vacancy_status ]] 
2023-06-21 01:53:32,779 - INFO - 
           matched     truth  pct_diff
Occupied  0.815184  0.812766  0.297481
Vacant    0.184816  0.187234 -1.291336

2023-06-21 01:53:32,788 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-21 01:53:32,794 - INFO - 
                                                      matched  ...  pct_diff
report_simulation_output.energy_use_total_m_btu     71.618456  ...  0.312409
report_simulation_output.fuel_use_electricity_t...  44.801582  ... -0.049672
report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...       NaN
report_simulation_output.fuel_use_natural_gas_t...  26.367221  ...  0.914415
report_simulation_output.fuel_use_propane_total...   0.449676  ...  1.439857

[5 rows x 3 columns]

2023-06-21 01:53:32,808 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-21 01:53:32,819 - INFO - 
                                                                                          matched  ...   pct_diff
build_existing_model.vacancy_status                                                                ...           
Occupied                            report_simulation_output.energy_use_total_m_btu     81.266382  ...   0.439303
                                    report_simulation_output.fuel_use_electricity_t...  50.180931  ...  -0.234942
                                    report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                    report_simulation_output.fuel_use_natural_gas_t...  30.533840  ...   1.554549
                                    report_simulation_output.fuel_use_propane_total...   0.551626  ...   1.138989
Vacant                              report_simulation_output.energy_use_total_m_btu     29.063576  ...  -3.409174
                                    report_simulation_output.fuel_use_electricity_t...  21.074456  ...   0.086462
                                    report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                    report_simulation_output.fuel_use_natural_gas_t...   7.989180  ... -11.557405
                                    report_simulation_output.fuel_use_propane_total...   0.000000  ...        NaN

[10 rows x 3 columns]

2023-06-21 01:53:32,830 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-21 01:53:32,837 - INFO - 
                                                                                  matched  ...   pct_diff
build_existing_model.tenure                                                                ...           
Owner                       report_simulation_output.energy_use_total_m_btu     88.614461  ...   0.885851
                            report_simulation_output.fuel_use_electricity_t...  52.096643  ...   0.612543
                            report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                            report_simulation_output.fuel_use_natural_gas_t...  35.801644  ...   1.320931
                            report_simulation_output.fuel_use_propane_total...   0.716190  ...  -0.808008
Renter                      report_simulation_output.energy_use_total_m_btu     52.953202  ...  -0.724641
                            report_simulation_output.fuel_use_electricity_t...  36.790042  ...  -1.062357
                            report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                            report_simulation_output.fuel_use_natural_gas_t...  16.006203  ...  -0.070445
                            report_simulation_output.fuel_use_propane_total...   0.156987  ...  14.432417

[10 rows x 3 columns]

2023-06-21 01:53:32,848 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-21 01:53:32,857 - INFO - 
                                                                                                 matched  ...   pct_diff
build_existing_model.federal_poverty_level                                                                ...           
0-100%                                     report_simulation_output.energy_use_total_m_btu     55.080961  ...  -3.639112
                                           report_simulation_output.fuel_use_electricity_t...  36.935148  ...  -1.448504
                                           report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                           report_simulation_output.fuel_use_natural_gas_t...  17.740513  ...  -8.066995
                                           report_simulation_output.fuel_use_propane_total...   0.405321  ...   5.032730
100-150%                                   report_simulation_output.energy_use_total_m_btu     71.901074  ...   1.315250
                                           report_simulation_output.fuel_use_electricity_t...  42.048233  ...  -1.810908
                                           report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                           report_simulation_output.fuel_use_natural_gas_t...  27.961037  ...   6.448027
                                           report_simulation_output.fuel_use_propane_total...   1.891854  ...   0.807417
150-200%                                   report_simulation_output.energy_use_total_m_btu     62.042485  ...   1.703346
                                           report_simulation_output.fuel_use_electricity_t...  43.186303  ...  -0.741990
                                           report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                           report_simulation_output.fuel_use_natural_gas_t...  18.750733  ...   7.831707
                                           report_simulation_output.fuel_use_propane_total...   0.105432  ...   0.000000
200-300%                                   report_simulation_output.energy_use_total_m_btu     70.061819  ...  -0.000972
                                           report_simulation_output.fuel_use_electricity_t...  41.633805  ...  -0.473346
                                           report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                           report_simulation_output.fuel_use_natural_gas_t...  28.392170  ...   0.784790
                                           report_simulation_output.fuel_use_propane_total...   0.035883  ... -39.836327
300-400%                                   report_simulation_output.energy_use_total_m_btu     75.331421  ...   4.163690
                                           report_simulation_output.fuel_use_electricity_t...  45.871975  ...   5.213969
                                           report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                           report_simulation_output.fuel_use_natural_gas_t...  29.451810  ...   2.542935
                                           report_simulation_output.fuel_use_propane_total...   0.007599  ...        inf
400%+                                      report_simulation_output.energy_use_total_m_btu     88.448553  ...   0.616764
                                           report_simulation_output.fuel_use_electricity_t...  54.934955  ...   0.158884
                                           report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                           report_simulation_output.fuel_use_natural_gas_t...  33.258030  ...   1.360056
                                           report_simulation_output.fuel_use_propane_total...   0.255609  ...   3.561323

[30 rows x 3 columns]

2023-06-21 01:53:32,878 - INFO - >> Database down-selected to 1124 buildings, based on input data of 470 buildings, result outputs to: 
/Users/lliu2/Documents/GitHub/ResStock/euss_cleap/data_/downsampled_buildings_id/euss1_2018_results_up00__downsampled_method1__north_birmingham.csv

