2023-06-21 01:52:44,827 - INFO - ---------------------------------------------------------
2023-06-21 01:52:44,828 - INFO - Downsampling buildstock for  san_jose  using method 1
2023-06-21 01:52:44,829 - INFO - ---------------------------------------------------------
2023-06-21 01:52:44,895 - INFO - Creating n>=1000 buildlstock by downsampling from: bst_to_search (548916 samples) 
while matching the marginal distribution of 13 key HCs from: bst_to_match (882 samples), 
['Income', 'ASHRAE IECC Climate Zone 2004', 'State', 'Geometry Building Type RECS', 'Heating Fuel', 'HVAC Cooling Type', 'Tenure', 'Water Heater Fuel', 'Vintage ACS', 'Geometry Floor Area Bin', 'HVAC Heating Type', 'Federal Poverty Level', 'Vacancy Status']
2023-06-21 01:52:44,896 - INFO - 
2023-06-21 01:52:44,896 - INFO - 
---- Attempt 1: downsample using 13 key HCs: ----
2023-06-21 01:52:45,041 - INFO -    Located 12908 positively weighted rows in bst_to_search
2023-06-21 01:52:45,042 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2023-06-21 01:52:45,313 - INFO - 

** Downsampled to: 3155 samples, by matching to: ['build_existing_model.income', 'build_existing_model.ashrae_iecc_climate_zone_2004', 'build_existing_model.state', 'build_existing_model.geometry_building_type_recs', 'build_existing_model.heating_fuel', 'build_existing_model.hvac_cooling_type', 'build_existing_model.tenure', 'build_existing_model.water_heater_fuel', 'build_existing_model.vintage_acs', 'build_existing_model.geometry_floor_area_bin', 'build_existing_model.hvac_heating_type', 'build_existing_model.federal_poverty_level', 'build_existing_model.vacancy_status']
2023-06-21 01:52:45,328 - INFO - 
 -> Step 3 : Weight Normalization
2023-06-21 01:52:45,330 - INFO - Checking marginals from weight_map of n=3155...
2023-06-21 01:52:45,335 - INFO -  [[ build_existing_model.income ]] 
2023-06-21 01:52:45,340 - INFO - 
                matched     truth  pct_diff
10000-14999    0.026077  0.026077       0.0
100000-119999  0.089569  0.089569       0.0
120000-139999  0.071429  0.071429       0.0
140000-159999  0.048753  0.048753       0.0
15000-19999    0.015873  0.015873       0.0
160000-179999  0.055556  0.055556       0.0
180000-199999  0.036281  0.036281       0.0
20000-24999    0.018141  0.018141       0.0
200000+        0.275510  0.275510       0.0
25000-29999    0.022676  0.022676       0.0
30000-34999    0.018141  0.018141       0.0
35000-39999    0.019274  0.019274       0.0
40000-44999    0.024943  0.024943       0.0
45000-49999    0.020408  0.020408       0.0
50000-59999    0.045351  0.045351       0.0
60000-69999    0.036281  0.036281       0.0
70000-79999    0.038549  0.038549       0.0
80000-99999    0.112245  0.112245       0.0
<10000         0.024943  0.024943       0.0

2023-06-21 01:52:45,344 - INFO -  [[ build_existing_model.ashrae_iecc_climate_zone_2004 ]] 
2023-06-21 01:52:45,348 - INFO - 
    matched  truth  pct_diff
3C      1.0    1.0       0.0

2023-06-21 01:52:45,353 - INFO -  [[ build_existing_model.state ]] 
2023-06-21 01:52:45,357 - INFO - 
    matched  truth  pct_diff
CA      1.0    1.0       0.0

2023-06-21 01:52:45,362 - INFO -  [[ build_existing_model.geometry_building_type_recs ]] 
2023-06-21 01:52:45,365 - INFO - 
                                matched     truth  pct_diff
Mobile Home                    0.030612  0.030612       0.0
Multi-Family with 2 - 4 Units  0.074830  0.074830       0.0
Multi-Family with 5+ Units     0.231293  0.231293       0.0
Single-Family Attached         0.095238  0.095238       0.0
Single-Family Detached         0.568027  0.568027       0.0

2023-06-21 01:52:45,369 - INFO -  [[ build_existing_model.heating_fuel ]] 
2023-06-21 01:52:45,375 - INFO - 
              matched     truth  pct_diff
Electricity  0.335601  0.335601       0.0
Natural Gas  0.650794  0.650794       0.0
None         0.001134  0.001134       0.0
Other Fuel   0.007937  0.007937       0.0
Propane      0.004535  0.004535       0.0

2023-06-21 01:52:45,380 - INFO -  [[ build_existing_model.hvac_cooling_type ]] 
2023-06-21 01:52:45,384 - INFO - 
             matched     truth  pct_diff
Central AC  0.195011  0.195011      -0.0
None        0.698413  0.698413       0.0
Room AC     0.106576  0.106576      -0.0

2023-06-21 01:52:45,389 - INFO -  [[ build_existing_model.tenure ]] 
2023-06-21 01:52:45,392 - INFO - 
         matched     truth  pct_diff
Owner   0.600907  0.600907       0.0
Renter  0.399093  0.399093       0.0

2023-06-21 01:52:45,397 - INFO -  [[ build_existing_model.water_heater_fuel ]] 
2023-06-21 01:52:45,401 - INFO - 
              matched     truth  pct_diff
Electricity  0.129252  0.129252       0.0
Natural Gas  0.854875  0.854875       0.0
Propane      0.015873  0.015873       0.0

2023-06-21 01:52:45,406 - INFO -  [[ build_existing_model.vintage_acs ]] 
2023-06-21 01:52:45,411 - INFO - 
          matched     truth  pct_diff
1940-59  0.168934  0.168934       0.0
1960-79  0.501134  0.501134       0.0
1980-99  0.213152  0.213152       0.0
2000-09  0.068027  0.068027       0.0
2010s    0.024943  0.024943       0.0
<1940    0.023810  0.023810       0.0

2023-06-21 01:52:45,415 - INFO -  [[ build_existing_model.geometry_floor_area_bin ]] 
2023-06-21 01:52:45,419 - INFO - 
            matched     truth  pct_diff
0-1499     0.528345  0.528345       0.0
1500-2499  0.327664  0.327664       0.0
2500-3999  0.117914  0.117914       0.0
4000+      0.026077  0.026077       0.0

2023-06-21 01:52:45,424 - INFO -  [[ build_existing_model.hvac_heating_type ]] 
2023-06-21 01:52:45,428 - INFO - 
                     matched     truth  pct_diff
Ducted Heating      0.637188  0.637188       0.0
Non-Ducted Heating  0.361678  0.361678       0.0
None                0.001134  0.001134       0.0

2023-06-21 01:52:45,434 - INFO -  [[ build_existing_model.federal_poverty_level ]] 
2023-06-21 01:52:45,438 - INFO - 
           matched     truth  pct_diff
0-100%    0.058957  0.058957       0.0
100-150%  0.041950  0.041950       0.0
150-200%  0.036281  0.036281       0.0
200-300%  0.080499  0.080499       0.0
300-400%  0.096372  0.096372       0.0
400%+     0.685941  0.685941      -0.0

2023-06-21 01:52:45,442 - INFO -  [[ build_existing_model.vacancy_status ]] 
2023-06-21 01:52:45,445 - INFO - 
           matched     truth  pct_diff
Occupied  0.960317  0.960317       0.0
Vacant    0.039683  0.039683       0.0

2023-06-21 01:52:45,446 - INFO - No unmatched HC
2023-06-21 01:52:45,463 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-21 01:52:45,467 - INFO - 
                                                      matched  ...  pct_diff
report_simulation_output.energy_use_total_m_btu     49.206102  ...  1.566723
report_simulation_output.fuel_use_electricity_t...  22.642927  ... -0.608265
report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...       NaN
report_simulation_output.fuel_use_natural_gas_t...  26.281749  ...  3.514166
report_simulation_output.fuel_use_propane_total...   0.281403  ...  1.958091

[5 rows x 3 columns]

2023-06-21 01:52:45,476 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-21 01:52:45,482 - INFO - 
                                                                                          matched  ...  pct_diff
build_existing_model.vacancy_status                                                                ...          
Occupied                            report_simulation_output.energy_use_total_m_btu     50.855679  ...  1.532124
                                    report_simulation_output.fuel_use_electricity_t...  23.397548  ... -0.644136
                                    report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...       NaN
                                    report_simulation_output.fuel_use_natural_gas_t...  27.165075  ...  3.479824
                                    report_simulation_output.fuel_use_propane_total...   0.293031  ...  1.958091
Vacant                              report_simulation_output.energy_use_total_m_btu      9.286335  ...  6.370594
                                    report_simulation_output.fuel_use_electricity_t...   4.381092  ...  4.256404
                                    report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...       NaN
                                    report_simulation_output.fuel_use_natural_gas_t...   4.905269  ...  8.332587
                                    report_simulation_output.fuel_use_propane_total...   0.000000  ...       NaN

[10 rows x 3 columns]

2023-06-21 01:52:45,490 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-21 01:52:45,495 - INFO - 
                                                                                  matched  ...  pct_diff
build_existing_model.tenure                                                                ...          
Owner                       report_simulation_output.energy_use_total_m_btu     58.837194  ...  2.360876
                            report_simulation_output.fuel_use_electricity_t...  25.636280  ... -0.447764
                            report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...       NaN
                            report_simulation_output.fuel_use_natural_gas_t...  32.860155  ...  4.682197
                            report_simulation_output.fuel_use_propane_total...   0.340743  ...  0.774528
Renter                      report_simulation_output.energy_use_total_m_btu     34.704742  ... -0.405702
                            report_simulation_output.fuel_use_electricity_t...  18.135889  ... -0.948156
                            report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...       NaN
                            report_simulation_output.fuel_use_natural_gas_t...  16.376764  ...  0.138517
                            report_simulation_output.fuel_use_propane_total...   0.192056  ...  5.260568

[10 rows x 3 columns]

2023-06-21 01:52:45,506 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-21 01:52:45,516 - INFO - 
                                                                                                 matched  ...   pct_diff
build_existing_model.federal_poverty_level                                                                ...           
0-100%                                     report_simulation_output.energy_use_total_m_btu     41.176094  ...   1.756290
                                           report_simulation_output.fuel_use_electricity_t...  18.353507  ...   1.920369
                                           report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                           report_simulation_output.fuel_use_natural_gas_t...  22.452185  ...   1.477127
                                           report_simulation_output.fuel_use_propane_total...   0.370356  ...  11.456103
100-150%                                   report_simulation_output.energy_use_total_m_btu     39.008341  ...   1.372815
                                           report_simulation_output.fuel_use_electricity_t...  20.247601  ...   1.552268
                                           report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                           report_simulation_output.fuel_use_natural_gas_t...  18.760690  ...   1.180461
                                           report_simulation_output.fuel_use_propane_total...   0.000000  ...        NaN
150-200%                                   report_simulation_output.energy_use_total_m_btu     40.010251  ...   2.293753
                                           report_simulation_output.fuel_use_electricity_t...  19.111994  ...  -3.527155
                                           report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                           report_simulation_output.fuel_use_natural_gas_t...  20.898298  ...   8.267840
                                           report_simulation_output.fuel_use_propane_total...   0.000000  ...        NaN
200-300%                                   report_simulation_output.energy_use_total_m_btu     47.341195  ...  -3.935608
                                           report_simulation_output.fuel_use_electricity_t...  22.755082  ...  -3.186112
                                           report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                           report_simulation_output.fuel_use_natural_gas_t...  24.286369  ...  -4.673200
                                           report_simulation_output.fuel_use_propane_total...   0.299648  ...  -0.000000
300-400%                                   report_simulation_output.energy_use_total_m_btu     47.056991  ...   0.097805
                                           report_simulation_output.fuel_use_electricity_t...  22.661439  ...  -0.681470
                                           report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                           report_simulation_output.fuel_use_natural_gas_t...  24.070989  ...   0.844253
                                           report_simulation_output.fuel_use_propane_total...   0.324529  ...   0.000000
400%+                                      report_simulation_output.energy_use_total_m_btu     51.527139  ...   2.357678
                                           report_simulation_output.fuel_use_electricity_t...  23.329093  ...  -0.443732
                                           report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                           report_simulation_output.fuel_use_natural_gas_t...  27.900383  ...   4.833002
                                           report_simulation_output.fuel_use_propane_total...   0.297651  ...   1.572039

[30 rows x 3 columns]

2023-06-21 01:52:45,529 - INFO - >> Database down-selected to 3155 buildings, based on input data of 882 buildings, result outputs to: 
/Users/lliu2/Documents/GitHub/ResStock/euss_cleap/data_/downsampled_buildings_id/euss1_2018_results_up00__downsampled_method1__san_jose.csv

2023-06-21 01:53:09,188 - INFO - ---------------------------------------------------------
2023-06-21 01:53:09,189 - INFO - Downsampling buildstock for  columbia  using method 1
2023-06-21 01:53:09,189 - INFO - ---------------------------------------------------------
2023-06-21 01:53:09,271 - INFO - Creating n>=1000 buildlstock by downsampling from: bst_to_search (548916 samples) 
while matching the marginal distribution of 13 key HCs from: bst_to_match (363 samples), 
['Income', 'ASHRAE IECC Climate Zone 2004', 'State', 'Geometry Building Type RECS', 'Heating Fuel', 'HVAC Cooling Type', 'Tenure', 'Water Heater Fuel', 'Vintage ACS', 'Geometry Floor Area Bin', 'HVAC Heating Type', 'Federal Poverty Level', 'Vacancy Status']
2023-06-21 01:53:09,275 - INFO - 
2023-06-21 01:53:09,275 - INFO - 
---- Attempt 1: downsample using 13 key HCs: ----
2023-06-21 01:53:09,416 - INFO -    Located 8930 positively weighted rows in bst_to_search
2023-06-21 01:53:09,417 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2023-06-21 01:53:09,525 - INFO -    Downsampling FAILED with insufficient rows: Recalculation leads to 928 positively weighted samples 
retry by relaxing HC_to_search by removing: build_existing_model.vacancy_status...
2023-06-21 01:53:09,525 - INFO - 
---- Attempt 2: downsample using 12 key HCs: ----
2023-06-21 01:53:09,532 - INFO -    Located 8930 positively weighted rows in bst_to_search
2023-06-21 01:53:09,533 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2023-06-21 01:53:09,571 - INFO - 

** Downsampled to: 1120 samples, by matching to: ['build_existing_model.income', 'build_existing_model.ashrae_iecc_climate_zone_2004', 'build_existing_model.state', 'build_existing_model.geometry_building_type_recs', 'build_existing_model.heating_fuel', 'build_existing_model.hvac_cooling_type', 'build_existing_model.tenure', 'build_existing_model.water_heater_fuel', 'build_existing_model.vintage_acs', 'build_existing_model.geometry_floor_area_bin', 'build_existing_model.hvac_heating_type', 'build_existing_model.federal_poverty_level']
2023-06-21 01:53:09,585 - INFO - 
 -> Step 3 : Weight Normalization
2023-06-21 01:53:09,590 - INFO - Checking marginals from weight_map of n=1120...
2023-06-21 01:53:09,602 - INFO -  [[ build_existing_model.income ]] 
2023-06-21 01:53:09,614 - INFO - 
                matched     truth  pct_diff
10000-14999    0.035813  0.035813       0.0
100000-119999  0.046832  0.046832       0.0
120000-139999  0.033058  0.033058       0.0
140000-159999  0.013774  0.013774       0.0
15000-19999    0.066116  0.066116       0.0
160000-179999  0.019284  0.019284       0.0
180000-199999  0.008264  0.008264       0.0
20000-24999    0.066116  0.066116       0.0
200000+        0.052342  0.052342       0.0
25000-29999    0.049587  0.049587       0.0
30000-34999    0.055096  0.055096       0.0
35000-39999    0.041322  0.041322       0.0
40000-44999    0.049587  0.049587       0.0
45000-49999    0.035813  0.035813       0.0
50000-59999    0.088154  0.088154       0.0
60000-69999    0.055096  0.055096       0.0
70000-79999    0.055096  0.055096       0.0
80000-99999    0.096419  0.096419       0.0
<10000         0.132231  0.132231       0.0

2023-06-21 01:53:09,619 - INFO -  [[ build_existing_model.ashrae_iecc_climate_zone_2004 ]] 
2023-06-21 01:53:09,623 - INFO - 
    matched  truth  pct_diff
3A      1.0    1.0       0.0

2023-06-21 01:53:09,628 - INFO -  [[ build_existing_model.state ]] 
2023-06-21 01:53:09,631 - INFO - 
    matched  truth  pct_diff
SC      1.0    1.0       0.0

2023-06-21 01:53:09,635 - INFO -  [[ build_existing_model.geometry_building_type_recs ]] 
2023-06-21 01:53:09,638 - INFO - 
                                matched     truth  pct_diff
Mobile Home                    0.019284  0.019284       0.0
Multi-Family with 2 - 4 Units  0.110193  0.110193       0.0
Multi-Family with 5+ Units     0.305785  0.305785       0.0
Single-Family Attached         0.030303  0.030303      -0.0
Single-Family Detached         0.534435  0.534435       0.0

2023-06-21 01:53:09,642 - INFO -  [[ build_existing_model.heating_fuel ]] 
2023-06-21 01:53:09,645 - INFO - 
              matched     truth  pct_diff
Electricity  0.754821  0.754821       0.0
Natural Gas  0.236915  0.236915       0.0
Other Fuel   0.002755  0.002755       0.0
Propane      0.005510  0.005510       0.0

2023-06-21 01:53:09,648 - INFO -  [[ build_existing_model.hvac_cooling_type ]] 
2023-06-21 01:53:09,651 - INFO - 
             matched     truth  pct_diff
Central AC  0.573003  0.573003       0.0
Heat Pump   0.269972  0.269972       0.0
None        0.027548  0.027548       0.0
Room AC     0.129477  0.129477       0.0

2023-06-21 01:53:09,656 - INFO -  [[ build_existing_model.tenure ]] 
2023-06-21 01:53:09,659 - INFO - 
         matched     truth  pct_diff
Owner   0.446281  0.446281       0.0
Renter  0.553719  0.553719       0.0

2023-06-21 01:53:09,663 - INFO -  [[ build_existing_model.water_heater_fuel ]] 
2023-06-21 01:53:09,667 - INFO - 
              matched     truth  pct_diff
Electricity  0.746556  0.746556      -0.0
Natural Gas  0.242424  0.242424      -0.0
Propane      0.011019  0.011019      -0.0

2023-06-21 01:53:09,672 - INFO -  [[ build_existing_model.vintage_acs ]] 
2023-06-21 01:53:09,676 - INFO - 
          matched     truth  pct_diff
1940-59  0.184573  0.184573      -0.0
1960-79  0.292011  0.292011      -0.0
1980-99  0.283747  0.283747      -0.0
2000-09  0.129477  0.129477       0.0
2010s    0.044077  0.044077       0.0
<1940    0.066116  0.066116      -0.0

2023-06-21 01:53:09,680 - INFO -  [[ build_existing_model.geometry_floor_area_bin ]] 
2023-06-21 01:53:09,683 - INFO - 
            matched     truth  pct_diff
0-1499     0.573003  0.573003      -0.0
1500-2499  0.280992  0.280992       0.0
2500-3999  0.134986  0.134986      -0.0
4000+      0.011019  0.011019      -0.0

2023-06-21 01:53:09,686 - INFO -  [[ build_existing_model.hvac_heating_type ]] 
2023-06-21 01:53:09,690 - INFO - 
                     matched     truth  pct_diff
Ducted Heat Pump    0.269972  0.269972      -0.0
Ducted Heating      0.561983  0.561983       0.0
Non-Ducted Heating  0.168044  0.168044      -0.0

2023-06-21 01:53:09,694 - INFO -  [[ build_existing_model.federal_poverty_level ]] 
2023-06-21 01:53:09,697 - INFO - 
           matched     truth  pct_diff
0-100%    0.181818  0.181818       0.0
100-150%  0.126722  0.126722       0.0
150-200%  0.099174  0.099174       0.0
200-300%  0.165289  0.165289       0.0
300-400%  0.129477  0.129477       0.0
400%+     0.297521  0.297521       0.0

2023-06-21 01:53:09,698 - INFO - For unmatched HC:
2023-06-21 01:53:09,698 - INFO - Checking marginals from weight_map of n=1120...
2023-06-21 01:53:09,702 - INFO -  [[ build_existing_model.vacancy_status ]] 
2023-06-21 01:53:09,707 - INFO - 
           matched     truth  pct_diff
Occupied  0.858427  0.862259 -0.444395
Vacant    0.141573  0.137741  2.781912

2023-06-21 01:53:09,718 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-21 01:53:09,725 - INFO - 
                                                      matched  ...   pct_diff
report_simulation_output.energy_use_total_m_btu     61.768399  ...   0.851759
report_simulation_output.fuel_use_electricity_t...  48.146330  ...  -2.074196
report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
report_simulation_output.fuel_use_natural_gas_t...  12.991402  ...  12.932843
report_simulation_output.fuel_use_propane_total...   0.630659  ...   9.310122

[5 rows x 3 columns]

2023-06-21 01:53:09,740 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-21 01:53:09,745 - INFO - 
                                                                                          matched  ...   pct_diff
build_existing_model.vacancy_status                                                                ...           
Occupied                            report_simulation_output.energy_use_total_m_btu     68.731724  ...   1.409500
                                    report_simulation_output.fuel_use_electricity_t...  53.297176  ...  -1.756624
                                    report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                    report_simulation_output.fuel_use_natural_gas_t...  14.699877  ...  14.332138
                                    report_simulation_output.fuel_use_propane_total...   0.734668  ...   9.798059
Vacant                              report_simulation_output.energy_use_total_m_btu     19.546280  ...  -4.047843
                                    report_simulation_output.fuel_use_electricity_t...  16.914180  ...  -2.456837
                                    report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                    report_simulation_output.fuel_use_natural_gas_t...   2.632068  ... -13.151403
                                    report_simulation_output.fuel_use_propane_total...   0.000000  ...        NaN

[10 rows x 3 columns]

2023-06-21 01:53:09,756 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-21 01:53:09,761 - INFO - 
                                                                                  matched  ...   pct_diff
build_existing_model.tenure                                                                ...           
Owner                       report_simulation_output.energy_use_total_m_btu     82.522096  ...   2.434009
                            report_simulation_output.fuel_use_electricity_t...  61.293989  ...  -2.518215
                            report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                            report_simulation_output.fuel_use_natural_gas_t...  19.946354  ...  20.678687
                            report_simulation_output.fuel_use_propane_total...   1.281728  ...  10.937696
Renter                      report_simulation_output.energy_use_total_m_btu     45.041539  ...  -1.397273
                            report_simulation_output.fuel_use_electricity_t...  37.549710  ...  -1.483837
                            report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                            report_simulation_output.fuel_use_natural_gas_t...   7.385918  ...  -0.910579
                            report_simulation_output.fuel_use_propane_total...   0.105917  ...  -4.373113

[10 rows x 3 columns]

2023-06-21 01:53:09,770 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-21 01:53:09,778 - INFO - 
                                                                                                 matched  ...   pct_diff
build_existing_model.federal_poverty_level                                                                ...           
0-100%                                     report_simulation_output.energy_use_total_m_btu     47.447132  ...  -4.981780
                                           report_simulation_output.fuel_use_electricity_t...  39.953443  ...  -5.667771
                                           report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                           report_simulation_output.fuel_use_natural_gas_t...   7.415457  ...  -0.090607
                                           report_simulation_output.fuel_use_propane_total...   0.078253  ... -50.680944
100-150%                                   report_simulation_output.energy_use_total_m_btu     57.471187  ...  -1.371875
                                           report_simulation_output.fuel_use_electricity_t...  44.481339  ...  -4.077745
                                           report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                           report_simulation_output.fuel_use_natural_gas_t...  12.582676  ...   9.346152
                                           report_simulation_output.fuel_use_propane_total...   0.407125  ...   4.112464
150-200%                                   report_simulation_output.energy_use_total_m_btu     51.409309  ...   3.811460
                                           report_simulation_output.fuel_use_electricity_t...  41.630888  ...   0.215245
                                           report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                           report_simulation_output.fuel_use_natural_gas_t...   9.461874  ...  23.461823
                                           report_simulation_output.fuel_use_propane_total...   0.316500  ...   0.000000
200-300%                                   report_simulation_output.energy_use_total_m_btu     57.941978  ...  -0.646482
                                           report_simulation_output.fuel_use_electricity_t...  43.906289  ...  -3.620365
                                           report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                           report_simulation_output.fuel_use_natural_gas_t...  12.856187  ...  10.860413
                                           report_simulation_output.fuel_use_propane_total...   1.179544  ...   1.093700
300-400%                                   report_simulation_output.energy_use_total_m_btu     70.967019  ...   3.243318
                                           report_simulation_output.fuel_use_electricity_t...  53.416127  ...  -0.799592
                                           report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                           report_simulation_output.fuel_use_natural_gas_t...  16.801806  ...  19.221830
                                           report_simulation_output.fuel_use_propane_total...   0.749117  ...  -6.140702
400%+                                      report_simulation_output.energy_use_total_m_btu     73.926294  ...   3.102017
                                           report_simulation_output.fuel_use_electricity_t...  56.948164  ...  -0.142815
                                           report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                           report_simulation_output.fuel_use_natural_gas_t...  16.166410  ...  14.673160
                                           report_simulation_output.fuel_use_propane_total...   0.811682  ...  41.257651

[30 rows x 3 columns]

2023-06-21 01:53:09,796 - INFO - >> Database down-selected to 1120 buildings, based on input data of 363 buildings, result outputs to: 
/Users/lliu2/Documents/GitHub/ResStock/euss_cleap/data_/downsampled_buildings_id/euss1_2018_results_up00__downsampled_method1__columbia.csv

2023-06-21 01:53:32,215 - INFO - ---------------------------------------------------------
2023-06-21 01:53:32,218 - INFO - Downsampling buildstock for  north_birmingham  using method 1
2023-06-21 01:53:32,219 - INFO - ---------------------------------------------------------
2023-06-21 01:53:32,323 - INFO - Creating n>=1000 buildlstock by downsampling from: bst_to_search (548916 samples) 
while matching the marginal distribution of 13 key HCs from: bst_to_match (470 samples), 
['Income', 'ASHRAE IECC Climate Zone 2004', 'State', 'Geometry Building Type RECS', 'Heating Fuel', 'HVAC Cooling Type', 'Tenure', 'Water Heater Fuel', 'Vintage ACS', 'Geometry Floor Area Bin', 'HVAC Heating Type', 'Federal Poverty Level', 'Vacancy Status']
2023-06-21 01:53:32,325 - INFO - 
2023-06-21 01:53:32,325 - INFO - 
---- Attempt 1: downsample using 13 key HCs: ----
2023-06-21 01:53:32,487 - INFO -    Located 7881 positively weighted rows in bst_to_search
2023-06-21 01:53:32,488 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2023-06-21 01:53:32,554 - INFO -    Downsampling FAILED with insufficient rows: Recalculation leads to 970 positively weighted samples 
retry by relaxing HC_to_search by removing: build_existing_model.vacancy_status...
2023-06-21 01:53:32,555 - INFO - 
---- Attempt 2: downsample using 12 key HCs: ----
2023-06-21 01:53:32,564 - INFO -    Located 7881 positively weighted rows in bst_to_search
2023-06-21 01:53:32,565 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2023-06-21 01:53:32,606 - INFO - 

** Downsampled to: 1124 samples, by matching to: ['build_existing_model.income', 'build_existing_model.ashrae_iecc_climate_zone_2004', 'build_existing_model.state', 'build_existing_model.geometry_building_type_recs', 'build_existing_model.heating_fuel', 'build_existing_model.hvac_cooling_type', 'build_existing_model.tenure', 'build_existing_model.water_heater_fuel', 'build_existing_model.vintage_acs', 'build_existing_model.geometry_floor_area_bin', 'build_existing_model.hvac_heating_type', 'build_existing_model.federal_poverty_level']
2023-06-21 01:53:32,626 - INFO - 
 -> Step 3 : Weight Normalization
2023-06-21 01:53:32,628 - INFO - Checking marginals from weight_map of n=1124...
2023-06-21 01:53:32,640 - INFO -  [[ build_existing_model.income ]] 
2023-06-21 01:53:32,649 - INFO - 
                matched     truth  pct_diff
10000-14999    0.089362  0.089362       0.0
100000-119999  0.040426  0.040426       0.0
120000-139999  0.036170  0.036170       0.0
140000-159999  0.014894  0.014894       0.0
15000-19999    0.078723  0.078723      -0.0
160000-179999  0.002128  0.002128       0.0
180000-199999  0.008511  0.008511       0.0
20000-24999    0.065957  0.065957       0.0
200000+        0.040426  0.040426      -0.0
25000-29999    0.059574  0.059574       0.0
30000-34999    0.051064  0.051064       0.0
35000-39999    0.031915  0.031915       0.0
40000-44999    0.051064  0.051064       0.0
45000-49999    0.038298  0.038298       0.0
50000-59999    0.072340  0.072340       0.0
60000-69999    0.055319  0.055319       0.0
70000-79999    0.042553  0.042553       0.0
80000-99999    0.070213  0.070213       0.0
<10000         0.151064  0.151064       0.0

2023-06-21 01:53:32,656 - INFO -  [[ build_existing_model.ashrae_iecc_climate_zone_2004 ]] 
2023-06-21 01:53:32,662 - INFO - 
    matched  truth  pct_diff
3A      1.0    1.0       0.0

2023-06-21 01:53:32,667 - INFO -  [[ build_existing_model.state ]] 
2023-06-21 01:53:32,672 - INFO - 
    matched  truth  pct_diff
AL      1.0    1.0       0.0

2023-06-21 01:53:32,677 - INFO -  [[ build_existing_model.geometry_building_type_recs ]] 
2023-06-21 01:53:32,682 - INFO - 
                                matched     truth  pct_diff
Mobile Home                    0.014894  0.014894       0.0
Multi-Family with 2 - 4 Units  0.068085  0.068085       0.0
Multi-Family with 5+ Units     0.246809  0.246809       0.0
Single-Family Attached         0.014894  0.014894       0.0
Single-Family Detached         0.655319  0.655319       0.0

2023-06-21 01:53:32,687 - INFO -  [[ build_existing_model.heating_fuel ]] 
2023-06-21 01:53:32,691 - INFO - 
              matched     truth  pct_diff
Electricity  0.487234  0.487234      -0.0
Natural Gas  0.502128  0.502128       0.0
Other Fuel   0.002128  0.002128       0.0
Propane      0.008511  0.008511       0.0

2023-06-21 01:53:32,696 - INFO -  [[ build_existing_model.hvac_cooling_type ]] 
2023-06-21 01:53:32,701 - INFO - 
             matched     truth  pct_diff
Central AC  0.653191  0.653191       0.0
Heat Pump   0.121277  0.121277       0.0
None        0.036170  0.036170       0.0
Room AC     0.189362  0.189362       0.0

2023-06-21 01:53:32,706 - INFO -  [[ build_existing_model.tenure ]] 
2023-06-21 01:53:32,710 - INFO - 
         matched     truth  pct_diff
Owner   0.523404  0.523404       0.0
Renter  0.476596  0.476596       0.0

2023-06-21 01:53:32,717 - INFO -  [[ build_existing_model.water_heater_fuel ]] 
2023-06-21 01:53:32,722 - INFO - 
              matched     truth  pct_diff
Electricity  0.542553  0.542553       0.0
Natural Gas  0.455319  0.455319       0.0
Propane      0.002128  0.002128       0.0

2023-06-21 01:53:32,727 - INFO -  [[ build_existing_model.vintage_acs ]] 
2023-06-21 01:53:32,732 - INFO - 
          matched     truth  pct_diff
1940-59  0.304255  0.304255       0.0
1960-79  0.289362  0.289362       0.0
1980-99  0.146809  0.146809       0.0
2000-09  0.072340  0.072340       0.0
2010s    0.031915  0.031915       0.0
<1940    0.155319  0.155319       0.0

2023-06-21 01:53:32,738 - INFO -  [[ build_existing_model.geometry_floor_area_bin ]] 
2023-06-21 01:53:32,743 - INFO - 
            matched     truth  pct_diff
0-1499     0.621277  0.621277       0.0
1500-2499  0.289362  0.289362       0.0
2500-3999  0.076596  0.076596      -0.0
4000+      0.012766  0.012766       0.0

2023-06-21 01:53:32,748 - INFO -  [[ build_existing_model.hvac_heating_type ]] 
2023-06-21 01:53:32,753 - INFO - 
                     matched     truth  pct_diff
Ducted Heat Pump    0.121277  0.121277       0.0
Ducted Heating      0.670213  0.670213       0.0
Non-Ducted Heating  0.208511  0.208511       0.0

2023-06-21 01:53:32,760 - INFO -  [[ build_existing_model.federal_poverty_level ]] 
2023-06-21 01:53:32,767 - INFO - 
           matched     truth  pct_diff
0-100%    0.234043  0.234043       0.0
100-150%  0.142553  0.142553       0.0
150-200%  0.093617  0.093617       0.0
200-300%  0.148936  0.148936       0.0
300-400%  0.110638  0.110638       0.0
400%+     0.270213  0.270213       0.0

2023-06-21 01:53:32,769 - INFO - For unmatched HC:
2023-06-21 01:53:32,769 - INFO - Checking marginals from weight_map of n=1124...
2023-06-21 01:53:32,775 - INFO -  [[ build_existing_model.vacancy_status ]] 
2023-06-21 01:53:32,779 - INFO - 
           matched     truth  pct_diff
Occupied  0.815184  0.812766  0.297481
Vacant    0.184816  0.187234 -1.291336

2023-06-21 01:53:32,788 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-21 01:53:32,794 - INFO - 
                                                      matched  ...  pct_diff
report_simulation_output.energy_use_total_m_btu     71.618456  ...  0.312409
report_simulation_output.fuel_use_electricity_t...  44.801582  ... -0.049672
report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...       NaN
report_simulation_output.fuel_use_natural_gas_t...  26.367221  ...  0.914415
report_simulation_output.fuel_use_propane_total...   0.449676  ...  1.439857

[5 rows x 3 columns]

2023-06-21 01:53:32,808 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-21 01:53:32,819 - INFO - 
                                                                                          matched  ...   pct_diff
build_existing_model.vacancy_status                                                                ...           
Occupied                            report_simulation_output.energy_use_total_m_btu     81.266382  ...   0.439303
                                    report_simulation_output.fuel_use_electricity_t...  50.180931  ...  -0.234942
                                    report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                    report_simulation_output.fuel_use_natural_gas_t...  30.533840  ...   1.554549
                                    report_simulation_output.fuel_use_propane_total...   0.551626  ...   1.138989
Vacant                              report_simulation_output.energy_use_total_m_btu     29.063576  ...  -3.409174
                                    report_simulation_output.fuel_use_electricity_t...  21.074456  ...   0.086462
                                    report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                    report_simulation_output.fuel_use_natural_gas_t...   7.989180  ... -11.557405
                                    report_simulation_output.fuel_use_propane_total...   0.000000  ...        NaN

[10 rows x 3 columns]

2023-06-21 01:53:32,830 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-21 01:53:32,837 - INFO - 
                                                                                  matched  ...   pct_diff
build_existing_model.tenure                                                                ...           
Owner                       report_simulation_output.energy_use_total_m_btu     88.614461  ...   0.885851
                            report_simulation_output.fuel_use_electricity_t...  52.096643  ...   0.612543
                            report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                            report_simulation_output.fuel_use_natural_gas_t...  35.801644  ...   1.320931
                            report_simulation_output.fuel_use_propane_total...   0.716190  ...  -0.808008
Renter                      report_simulation_output.energy_use_total_m_btu     52.953202  ...  -0.724641
                            report_simulation_output.fuel_use_electricity_t...  36.790042  ...  -1.062357
                            report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                            report_simulation_output.fuel_use_natural_gas_t...  16.006203  ...  -0.070445
                            report_simulation_output.fuel_use_propane_total...   0.156987  ...  14.432417

[10 rows x 3 columns]

2023-06-21 01:53:32,848 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-21 01:53:32,857 - INFO - 
                                                                                                 matched  ...   pct_diff
build_existing_model.federal_poverty_level                                                                ...           
0-100%                                     report_simulation_output.energy_use_total_m_btu     55.080961  ...  -3.639112
                                           report_simulation_output.fuel_use_electricity_t...  36.935148  ...  -1.448504
                                           report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                           report_simulation_output.fuel_use_natural_gas_t...  17.740513  ...  -8.066995
                                           report_simulation_output.fuel_use_propane_total...   0.405321  ...   5.032730
100-150%                                   report_simulation_output.energy_use_total_m_btu     71.901074  ...   1.315250
                                           report_simulation_output.fuel_use_electricity_t...  42.048233  ...  -1.810908
                                           report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                           report_simulation_output.fuel_use_natural_gas_t...  27.961037  ...   6.448027
                                           report_simulation_output.fuel_use_propane_total...   1.891854  ...   0.807417
150-200%                                   report_simulation_output.energy_use_total_m_btu     62.042485  ...   1.703346
                                           report_simulation_output.fuel_use_electricity_t...  43.186303  ...  -0.741990
                                           report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                           report_simulation_output.fuel_use_natural_gas_t...  18.750733  ...   7.831707
                                           report_simulation_output.fuel_use_propane_total...   0.105432  ...   0.000000
200-300%                                   report_simulation_output.energy_use_total_m_btu     70.061819  ...  -0.000972
                                           report_simulation_output.fuel_use_electricity_t...  41.633805  ...  -0.473346
                                           report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                           report_simulation_output.fuel_use_natural_gas_t...  28.392170  ...   0.784790
                                           report_simulation_output.fuel_use_propane_total...   0.035883  ... -39.836327
300-400%                                   report_simulation_output.energy_use_total_m_btu     75.331421  ...   4.163690
                                           report_simulation_output.fuel_use_electricity_t...  45.871975  ...   5.213969
                                           report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                           report_simulation_output.fuel_use_natural_gas_t...  29.451810  ...   2.542935
                                           report_simulation_output.fuel_use_propane_total...   0.007599  ...        inf
400%+                                      report_simulation_output.energy_use_total_m_btu     88.448553  ...   0.616764
                                           report_simulation_output.fuel_use_electricity_t...  54.934955  ...   0.158884
                                           report_simulation_output.fuel_use_fuel_oil_tota...   0.000000  ...        NaN
                                           report_simulation_output.fuel_use_natural_gas_t...  33.258030  ...   1.360056
                                           report_simulation_output.fuel_use_propane_total...   0.255609  ...   3.561323

[30 rows x 3 columns]

2023-06-21 01:53:32,878 - INFO - >> Database down-selected to 1124 buildings, based on input data of 470 buildings, result outputs to: 
/Users/lliu2/Documents/GitHub/ResStock/euss_cleap/data_/downsampled_buildings_id/euss1_2018_results_up00__downsampled_method1__north_birmingham.csv

