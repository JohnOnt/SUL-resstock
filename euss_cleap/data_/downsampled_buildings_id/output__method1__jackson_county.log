2023-09-07 19:01:19,854 - INFO - ---------------------------------------------------------
2023-09-07 19:01:19,854 - INFO - Downsampling buildstock for  jackson_county  using method 1
2023-09-07 19:01:19,855 - INFO - ---------------------------------------------------------
2023-09-07 19:01:19,897 - INFO - Creating n>=1000 buildlstock by downsampling from: bst_to_search (550000 samples) 
while matching the marginal distribution of 13 key HCs from: bst_to_match (118 samples), 
['Income', 'ASHRAE IECC Climate Zone 2004', 'State', 'Geometry Building Type RECS', 'Heating Fuel', 'HVAC Cooling Type', 'Tenure', 'Water Heater Fuel', 'Vintage ACS', 'Geometry Floor Area Bin', 'HVAC Heating Type', 'Federal Poverty Level', 'Vacancy Status']
2023-09-07 19:01:19,898 - INFO - 
2023-09-07 19:01:19,899 - INFO - 
---- Attempt 1: downsample using 13 key HCs: ----
2023-09-07 19:01:20,011 - INFO -    Located 2414 positively weighted rows in bst_to_search
2023-09-07 19:01:20,011 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2023-09-07 19:01:20,025 - INFO -    Downsampling FAILED with insufficient rows: Recalculation leads to 159 positively weighted samples 
retry by relaxing HC_to_search by removing: build_existing_model.vacancy_status...
2023-09-07 19:01:20,026 - INFO - 
---- Attempt 2: downsample using 12 key HCs: ----
2023-09-07 19:01:20,028 - INFO -    Located 2414 positively weighted rows in bst_to_search
2023-09-07 19:01:20,028 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2023-09-07 19:01:20,041 - INFO -    Downsampling FAILED with insufficient rows: Recalculation leads to 165 positively weighted samples 
retry by relaxing HC_to_search by removing: build_existing_model.federal_poverty_level...
2023-09-07 19:01:20,041 - INFO - 
---- Attempt 3: downsample using 11 key HCs: ----
2023-09-07 19:01:20,043 - INFO -    Located 2414 positively weighted rows in bst_to_search
2023-09-07 19:01:20,043 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2023-09-07 19:01:20,055 - INFO -    Downsampling FAILED with insufficient rows: Recalculation leads to 189 positively weighted samples 
retry by relaxing HC_to_search by removing: build_existing_model.hvac_heating_type...
2023-09-07 19:01:20,055 - INFO - 
---- Attempt 4: downsample using 10 key HCs: ----
2023-09-07 19:01:20,058 - INFO -    Located 2414 positively weighted rows in bst_to_search
2023-09-07 19:01:20,058 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2023-09-07 19:01:20,070 - INFO -    Downsampling FAILED with insufficient rows: Recalculation leads to 210 positively weighted samples 
retry by relaxing HC_to_search by removing: build_existing_model.geometry_floor_area_bin...
2023-09-07 19:01:20,071 - INFO - 
---- Attempt 5: downsample using 9 key HCs: ----
2023-09-07 19:01:20,073 - INFO -    Located 2414 positively weighted rows in bst_to_search
2023-09-07 19:01:20,073 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2023-09-07 19:01:20,083 - INFO -    Downsampling FAILED with insufficient rows: Recalculation leads to 326 positively weighted samples 
retry by relaxing HC_to_search by removing: build_existing_model.vintage_acs...
2023-09-07 19:01:20,084 - INFO - 
---- Attempt 6: downsample using 8 key HCs: ----
2023-09-07 19:01:20,088 - INFO -    Located 2414 positively weighted rows in bst_to_search
2023-09-07 19:01:20,088 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2023-09-07 19:01:20,097 - INFO -    Downsampling FAILED with insufficient rows: Recalculation leads to 760 positively weighted samples 
retry by relaxing HC_to_search by removing: build_existing_model.water_heater_fuel...
2023-09-07 19:01:20,098 - INFO - 
---- Attempt 7: downsample using 7 key HCs: ----
2023-09-07 19:01:20,099 - INFO -    Located 2414 positively weighted rows in bst_to_search
2023-09-07 19:01:20,100 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2023-09-07 19:01:20,110 - INFO -    Downsampling FAILED with insufficient rows: Recalculation leads to 951 positively weighted samples 
retry by relaxing HC_to_search by removing: build_existing_model.tenure...
2023-09-07 19:01:20,110 - INFO - 
---- Attempt 8: downsample using 6 key HCs: ----
2023-09-07 19:01:20,112 - INFO -    Located 2414 positively weighted rows in bst_to_search
2023-09-07 19:01:20,112 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2023-09-07 19:01:20,119 - INFO - 

** Downsampled to: 1147 samples, by matching to: ['build_existing_model.income', 'build_existing_model.ashrae_iecc_climate_zone_2004', 'build_existing_model.state', 'build_existing_model.geometry_building_type_recs', 'build_existing_model.heating_fuel', 'build_existing_model.hvac_cooling_type']
2023-09-07 19:01:20,136 - INFO - 
 -> Step 3 : Weight Normalization
2023-09-07 19:01:20,138 - INFO - Checking marginals from weight_map of n=1147...
2023-09-07 19:01:20,143 - INFO -  [[ build_existing_model.income ]] 
2023-09-07 19:01:20,149 - INFO - 
                              matched     truth  pct_diff
build_existing_model.income                              
10000-14999                  0.076271  0.076271      -0.0
100000-119999                0.076271  0.076271       0.0
120000-139999                0.025424  0.025424       0.0
140000-159999                0.025424  0.025424       0.0
15000-19999                  0.067797  0.067797       0.0
160000-179999                0.025424  0.025424       0.0
180000-199999                0.016949  0.016949       0.0
20000-24999                  0.076271  0.076271       0.0
25000-29999                  0.101695  0.101695       0.0
30000-34999                  0.050847  0.050847       0.0
35000-39999                  0.059322  0.059322       0.0
40000-44999                  0.042373  0.042373       0.0
45000-49999                  0.033898  0.033898       0.0
50000-59999                  0.067797  0.067797       0.0
60000-69999                  0.033898  0.033898       0.0
70000-79999                  0.076271  0.076271      -0.0
80000-99999                  0.067797  0.067797       0.0
<10000                       0.076271  0.076271       0.0

2023-09-07 19:01:20,154 - INFO -  [[ build_existing_model.ashrae_iecc_climate_zone_2004 ]] 
2023-09-07 19:01:20,158 - INFO - 
                                                    matched  truth  pct_diff
build_existing_model.ashrae_iecc_climate_zone_2004                          
4A                                                      1.0    1.0       0.0

2023-09-07 19:01:20,161 - INFO -  [[ build_existing_model.state ]] 
2023-09-07 19:01:20,166 - INFO - 
                            matched  truth  pct_diff
build_existing_model.state                          
IL                              1.0    1.0       0.0

2023-09-07 19:01:20,169 - INFO -  [[ build_existing_model.geometry_building_type_recs ]] 
2023-09-07 19:01:20,172 - INFO - 
                                                   matched     truth  pct_diff
build_existing_model.geometry_building_type_recs                              
Mobile Home                                       0.110169  0.110169       0.0
Multi-Family with 2 - 4 Units                     0.118644  0.118644      -0.0
Multi-Family with 5+ Units                        0.093220  0.093220       0.0
Single-Family Attached                            0.008475  0.008475       0.0
Single-Family Detached                            0.669492  0.669492       0.0

2023-09-07 19:01:20,174 - INFO -  [[ build_existing_model.heating_fuel ]] 
2023-09-07 19:01:20,177 - INFO - 
                                    matched     truth  pct_diff
build_existing_model.heating_fuel                              
Electricity                        0.525424  0.525424      -0.0
Natural Gas                        0.389831  0.389831      -0.0
Other Fuel                         0.025424  0.025424       0.0
Propane                            0.059322  0.059322       0.0

2023-09-07 19:01:20,181 - INFO -  [[ build_existing_model.hvac_cooling_type ]] 
2023-09-07 19:01:20,184 - INFO - 
                                         matched     truth  pct_diff
build_existing_model.hvac_cooling_type                              
Central AC                              0.483051  0.483051       0.0
Heat Pump                               0.279661  0.279661       0.0
None                                    0.059322  0.059322       0.0
Room AC                                 0.177966  0.177966       0.0

2023-09-07 19:01:20,184 - INFO - For unmatched HC:
2023-09-07 19:01:20,184 - INFO - Checking marginals from weight_map of n=1147...
2023-09-07 19:01:20,187 - INFO -  [[ build_existing_model.tenure ]] 
2023-09-07 19:01:20,190 - INFO - 
                              matched     truth  pct_diff
build_existing_model.tenure                              
Owner                        0.659342  0.661017 -0.253412
Renter                       0.340658  0.338983  0.494153

2023-09-07 19:01:20,194 - INFO -  [[ build_existing_model.water_heater_fuel ]] 
2023-09-07 19:01:20,197 - INFO - 
                                         matched     truth   pct_diff
build_existing_model.water_heater_fuel                               
Electricity                             0.550191  0.508475   8.204243
Natural Gas                             0.406262  0.440678  -7.809757
Other Fuel                              0.012352  0.008475  45.757576
Propane                                 0.031195  0.042373 -26.380952

2023-09-07 19:01:20,200 - INFO -  [[ build_existing_model.vintage_acs ]] 
2023-09-07 19:01:20,203 - INFO - 
                                   matched     truth   pct_diff
build_existing_model.vintage_acs                               
1940-59                           0.171188  0.177966  -3.808675
1960-79                           0.265437  0.288136  -7.877906
1980-99                           0.256380  0.237288   8.045693
2000-09                           0.123290  0.110169  11.909755
2010s                             0.051272  0.033898  51.252474
<1940                             0.132433  0.152542 -13.182507

2023-09-07 19:01:20,206 - INFO -  [[ build_existing_model.geometry_floor_area_bin ]] 
2023-09-07 19:01:20,209 - INFO - 
                                               matched     truth   pct_diff
build_existing_model.geometry_floor_area_bin                               
0-1499                                        0.535757  0.559322  -4.213184
1500-2499                                     0.309924  0.322034  -3.760490
2500-3999                                     0.130278  0.093220  39.753225
4000+                                         0.024041  0.025424  -5.438903

2023-09-07 19:01:20,212 - INFO -  [[ build_existing_model.hvac_heating_type ]] 
2023-09-07 19:01:20,216 - INFO - 
                                         matched     truth  pct_diff
build_existing_model.hvac_heating_type                              
Ducted Heat Pump                        0.279661  0.279661  0.000000
Ducted Heating                          0.478818  0.466102  2.728171
Non-Ducted Heating                      0.241521  0.254237 -5.001647

2023-09-07 19:01:20,219 - INFO -  [[ build_existing_model.federal_poverty_level ]] 
2023-09-07 19:01:20,223 - INFO - 
                                             matched     truth   pct_diff
build_existing_model.federal_poverty_level                               
0-100%                                      0.183807  0.186441  -1.412354
100-150%                                    0.124608  0.144068 -13.507053
150-200%                                    0.107100  0.144068 -25.659860
200-300%                                    0.188020  0.152542  23.257441
300-400%                                    0.121074  0.110169   9.897646
400%+                                       0.275390  0.262712   4.826000

2023-09-07 19:01:20,226 - INFO -  [[ build_existing_model.vacancy_status ]] 
2023-09-07 19:01:20,229 - INFO - 
                                      matched     truth  pct_diff
build_existing_model.vacancy_status                              
Occupied                             0.817579  0.830508 -1.556840
Vacant                               0.182421  0.169492  7.628517

2023-09-07 19:01:20,234 - INFO - truth vs. matched - per dwelling unit energy:
2023-09-07 19:01:20,237 - INFO - 
                                    matched      truth   pct_diff
energy_use_total_m_btu            94.690553  92.186008   2.716838
fuel_use_electricity_total_m_btu  50.331054  51.080161  -1.466532
fuel_use_fuel_oil_total_m_btu      0.000000   0.000000        NaN
fuel_use_natural_gas_total_m_btu  38.425088  37.054856   3.697847
fuel_use_propane_total_m_btu       5.934426   4.050949  46.494694

2023-09-07 19:01:20,243 - INFO - truth vs. matched - per dwelling unit energy:
2023-09-07 19:01:20,247 - INFO - 
                                                                         matched       truth   pct_diff
build_existing_model.vacancy_status                                                                    
Occupied                            energy_use_total_m_btu            107.650593  103.377949   4.133032
                                    fuel_use_electricity_total_m_btu   57.174860   57.289204  -0.199592
                                    fuel_use_fuel_oil_total_m_btu       0.000000    0.000000        NaN
                                    fuel_use_natural_gas_total_m_btu   43.545030   42.533286   2.378712
                                    fuel_use_propane_total_m_btu        6.930728    3.555418  94.934257
Vacant                              energy_use_total_m_btu             36.606007   37.345500  -1.980138
                                    fuel_use_electricity_total_m_btu   19.658359   20.655850  -4.829099
                                    fuel_use_fuel_oil_total_m_btu       0.000000    0.000000        NaN
                                    fuel_use_natural_gas_total_m_btu   15.478435   10.210550  51.592571
                                    fuel_use_propane_total_m_btu        1.469177    6.479050 -77.324189

2023-09-07 19:01:20,252 - INFO - truth vs. matched - per dwelling unit energy:
2023-09-07 19:01:20,256 - INFO - 
                                                                 matched       truth   pct_diff
build_existing_model.tenure                                                                    
Owner                       energy_use_total_m_btu            111.223749  106.773487   4.167947
                            fuel_use_electricity_total_m_btu   56.774852   56.810718  -0.063132
                            fuel_use_fuel_oil_total_m_btu       0.000000    0.000000        NaN
                            fuel_use_natural_gas_total_m_btu   46.379800   45.308192   2.365153
                            fuel_use_propane_total_m_btu        8.069113    4.654526  73.360585
Renter                      energy_use_total_m_btu             62.690649   63.740425  -1.646955
                            fuel_use_electricity_total_m_btu   37.859120   39.905575  -5.128244
                            fuel_use_fuel_oil_total_m_btu       0.000000    0.000000        NaN
                            fuel_use_natural_gas_total_m_btu   23.028788   20.960850   9.865718
                            fuel_use_propane_total_m_btu        1.802751    2.873975 -37.273265

2023-09-07 19:01:20,262 - INFO - truth vs. matched - per dwelling unit energy:
2023-09-07 19:01:20,267 - INFO - 
                                                                                matched       truth    pct_diff
build_existing_model.federal_poverty_level                                                                     
0-100%                                     energy_use_total_m_btu             71.794726   69.169136    3.795898
                                           fuel_use_electricity_total_m_btu   45.973112   47.370818   -2.950563
                                           fuel_use_fuel_oil_total_m_btu       0.000000    0.000000         NaN
                                           fuel_use_natural_gas_total_m_btu   25.675799   21.229545   20.943707
                                           fuel_use_propane_total_m_btu        0.145838    0.568682  -74.355100
100-150%                                   energy_use_total_m_btu             87.773356   87.363000    0.469713
                                           fuel_use_electricity_total_m_btu   43.082539   53.879471  -20.039045
                                           fuel_use_fuel_oil_total_m_btu       0.000000    0.000000         NaN
                                           fuel_use_natural_gas_total_m_btu   43.606457   29.070882   50.000457
                                           fuel_use_propane_total_m_btu        1.084370    4.412765  -75.426522
150-200%                                   energy_use_total_m_btu             96.246478   93.733118    2.681401
                                           fuel_use_electricity_total_m_btu   46.937166   49.274941   -4.744350
                                           fuel_use_fuel_oil_total_m_btu       0.000000    0.000000         NaN
                                           fuel_use_natural_gas_total_m_btu   41.506733   39.632235    4.729730
                                           fuel_use_propane_total_m_btu        7.802529    4.825765   61.684824
200-300%                                   energy_use_total_m_btu            103.346684   90.956944   13.621544
                                           fuel_use_electricity_total_m_btu   47.146851   35.039611   34.553010
                                           fuel_use_fuel_oil_total_m_btu       0.000000    0.000000         NaN
                                           fuel_use_natural_gas_total_m_btu   44.490527   44.133611    0.808717
                                           fuel_use_propane_total_m_btu       11.709297   11.783722   -0.631592
300-400%                                   energy_use_total_m_btu             94.906107   77.067538   23.146669
                                           fuel_use_electricity_total_m_btu   51.959619   40.802538   27.344086
                                           fuel_use_fuel_oil_total_m_btu       0.000000    0.000000         NaN
                                           fuel_use_natural_gas_total_m_btu   35.954288   33.575462    7.085016
                                           fuel_use_propane_total_m_btu        6.992224    2.689385  159.993450
400%+                                      energy_use_total_m_btu            106.492360  117.370677   -9.268343
                                           fuel_use_electricity_total_m_btu   59.297424   66.791290  -11.219826
                                           fuel_use_fuel_oil_total_m_btu       0.000000    0.000000         NaN
                                           fuel_use_natural_gas_total_m_btu   40.336749   48.599484  -17.001692
                                           fuel_use_propane_total_m_btu        6.858233    1.979903  246.392330

2023-09-07 19:01:20,271 - INFO - >> Database down-selected to 1147 buildings, based on input data of 118 buildings, result outputs to: 
C:\Users\ylou2\Desktop\resstock\euss_cleap\data_\downsampled_buildings_id\results_up00__downsampled_method1__jackson_county.csv

