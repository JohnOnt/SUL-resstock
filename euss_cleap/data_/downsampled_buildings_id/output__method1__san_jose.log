2023-06-26 22:27:36,276 - INFO - ---------------------------------------------------------
2023-06-26 22:27:36,276 - INFO - Downsampling buildstock for  san_jose  using method 1
2023-06-26 22:27:36,277 - INFO - ---------------------------------------------------------
2023-06-26 22:27:36,388 - INFO - Creating n>=1000 buildlstock by downsampling from: bst_to_search (548916 samples) 
while matching the marginal distribution of 13 key HCs from: bst_to_match (882 samples), 
['Income', 'ASHRAE IECC Climate Zone 2004', 'State', 'Geometry Building Type RECS', 'Heating Fuel', 'HVAC Cooling Type', 'Tenure', 'Water Heater Fuel', 'Vintage ACS', 'Geometry Floor Area Bin', 'HVAC Heating Type', 'Federal Poverty Level', 'Vacancy Status']
2023-06-26 22:27:36,390 - INFO - 
2023-06-26 22:27:36,391 - INFO - 
---- Attempt 1: downsample using 13 key HCs: ----
2023-06-26 22:27:36,795 - INFO -    Located 12908 positively weighted rows in bst_to_search
2023-06-26 22:27:36,796 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2023-06-26 22:27:36,952 - INFO - 

** Downsampled to: 3155 samples, by matching to: ['build_existing_model.income', 'build_existing_model.ashrae_iecc_climate_zone_2004', 'build_existing_model.state', 'build_existing_model.geometry_building_type_recs', 'build_existing_model.heating_fuel', 'build_existing_model.hvac_cooling_type', 'build_existing_model.tenure', 'build_existing_model.water_heater_fuel', 'build_existing_model.vintage_acs', 'build_existing_model.geometry_floor_area_bin', 'build_existing_model.hvac_heating_type', 'build_existing_model.federal_poverty_level', 'build_existing_model.vacancy_status']
2023-06-26 22:27:36,990 - INFO - 
 -> Step 3 : Weight Normalization
2023-06-26 22:27:36,998 - INFO - Checking marginals from weight_map of n=3155...
2023-06-26 22:27:37,021 - INFO -  [[ build_existing_model.income ]] 
2023-06-26 22:27:37,047 - INFO - 
                matched     truth  pct_diff
10000-14999    0.026077  0.026077      -0.0
100000-119999  0.089569  0.089569      -0.0
120000-139999  0.071429  0.071429      -0.0
140000-159999  0.048753  0.048753      -0.0
15000-19999    0.015873  0.015873      -0.0
160000-179999  0.055556  0.055556       0.0
180000-199999  0.036281  0.036281      -0.0
20000-24999    0.018141  0.018141      -0.0
200000+        0.275510  0.275510      -0.0
25000-29999    0.022676  0.022676      -0.0
30000-34999    0.018141  0.018141      -0.0
35000-39999    0.019274  0.019274      -0.0
40000-44999    0.024943  0.024943      -0.0
45000-49999    0.020408  0.020408      -0.0
50000-59999    0.045351  0.045351      -0.0
60000-69999    0.036281  0.036281      -0.0
70000-79999    0.038549  0.038549      -0.0
80000-99999    0.112245  0.112245      -0.0
<10000         0.024943  0.024943      -0.0

2023-06-26 22:27:37,063 - INFO -  [[ build_existing_model.ashrae_iecc_climate_zone_2004 ]] 
2023-06-26 22:27:37,078 - INFO - 
    matched  truth  pct_diff
3C      1.0    1.0       0.0

2023-06-26 22:27:37,092 - INFO -  [[ build_existing_model.state ]] 
2023-06-26 22:27:37,105 - INFO - 
    matched  truth  pct_diff
CA      1.0    1.0       0.0

2023-06-26 22:27:37,118 - INFO -  [[ build_existing_model.geometry_building_type_recs ]] 
2023-06-26 22:27:37,130 - INFO - 
                                matched     truth  pct_diff
Mobile Home                    0.030612  0.030612       0.0
Multi-Family with 2 - 4 Units  0.074830  0.074830       0.0
Multi-Family with 5+ Units     0.231293  0.231293       0.0
Single-Family Attached         0.095238  0.095238       0.0
Single-Family Detached         0.568027  0.568027       0.0

2023-06-26 22:27:37,142 - INFO -  [[ build_existing_model.heating_fuel ]] 
2023-06-26 22:27:37,156 - INFO - 
              matched     truth  pct_diff
Electricity  0.335601  0.335601      -0.0
Natural Gas  0.650794  0.650794       0.0
None         0.001134  0.001134      -0.0
Other Fuel   0.007937  0.007937       0.0
Propane      0.004535  0.004535      -0.0

2023-06-26 22:27:37,172 - INFO -  [[ build_existing_model.hvac_cooling_type ]] 
2023-06-26 22:27:37,183 - INFO - 
             matched     truth  pct_diff
Central AC  0.195011  0.195011       0.0
None        0.698413  0.698413       0.0
Room AC     0.106576  0.106576       0.0

2023-06-26 22:27:37,198 - INFO -  [[ build_existing_model.tenure ]] 
2023-06-26 22:27:37,212 - INFO - 
         matched     truth  pct_diff
Owner   0.600907  0.600907       0.0
Renter  0.399093  0.399093       0.0

2023-06-26 22:27:37,224 - INFO -  [[ build_existing_model.water_heater_fuel ]] 
2023-06-26 22:27:37,235 - INFO - 
              matched     truth  pct_diff
Electricity  0.129252  0.129252       0.0
Natural Gas  0.854875  0.854875       0.0
Propane      0.015873  0.015873       0.0

2023-06-26 22:27:37,246 - INFO -  [[ build_existing_model.vintage_acs ]] 
2023-06-26 22:27:37,262 - INFO - 
          matched     truth  pct_diff
1940-59  0.168934  0.168934       0.0
1960-79  0.501134  0.501134       0.0
1980-99  0.213152  0.213152       0.0
2000-09  0.068027  0.068027      -0.0
2010s    0.024943  0.024943      -0.0
<1940    0.023810  0.023810       0.0

2023-06-26 22:27:37,274 - INFO -  [[ build_existing_model.geometry_floor_area_bin ]] 
2023-06-26 22:27:37,285 - INFO - 
            matched     truth  pct_diff
0-1499     0.528345  0.528345       0.0
1500-2499  0.327664  0.327664       0.0
2500-3999  0.117914  0.117914       0.0
4000+      0.026077  0.026077       0.0

2023-06-26 22:27:37,301 - INFO -  [[ build_existing_model.hvac_heating_type ]] 
2023-06-26 22:27:37,316 - INFO - 
                     matched     truth  pct_diff
Ducted Heating      0.637188  0.637188       0.0
Non-Ducted Heating  0.361678  0.361678       0.0
None                0.001134  0.001134      -0.0

2023-06-26 22:27:37,330 - INFO -  [[ build_existing_model.federal_poverty_level ]] 
2023-06-26 22:27:37,344 - INFO - 
           matched     truth  pct_diff
0-100%    0.058957  0.058957       0.0
100-150%  0.041950  0.041950      -0.0
150-200%  0.036281  0.036281      -0.0
200-300%  0.080499  0.080499       0.0
300-400%  0.096372  0.096372      -0.0
400%+     0.685941  0.685941       0.0

2023-06-26 22:27:37,360 - INFO -  [[ build_existing_model.vacancy_status ]] 
2023-06-26 22:27:37,370 - INFO - 
           matched     truth  pct_diff
Occupied  0.960317  0.960317      -0.0
Vacant    0.039683  0.039683      -0.0

2023-06-26 22:27:37,371 - INFO - No unmatched HC
2023-06-26 22:27:37,421 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-26 22:27:37,433 - INFO - 
                                    matched      truth  pct_diff
energy_use_total_m_btu            49.206102  48.447070  1.566723
fuel_use_electricity_total_m_btu  22.642927  22.781499 -0.608265
fuel_use_fuel_oil_total_m_btu      0.000000   0.000000       NaN
fuel_use_natural_gas_total_m_btu  26.281749  25.389519  3.514166
fuel_use_propane_total_m_btu       0.281403   0.275999  1.958091

2023-06-26 22:27:37,466 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-26 22:27:37,480 - INFO - 
                                                                        matched      truth  pct_diff
build_existing_model.vacancy_status                                                                 
Occupied                            energy_use_total_m_btu            50.855679  50.088264  1.532124
                                    fuel_use_electricity_total_m_btu  23.397548  23.549237 -0.644136
                                    fuel_use_fuel_oil_total_m_btu      0.000000   0.000000       NaN
                                    fuel_use_natural_gas_total_m_btu  27.165075  26.251567  3.479824
                                    fuel_use_propane_total_m_btu       0.293031   0.287404  1.958091
Vacant                              energy_use_total_m_btu             9.286335   8.730171  6.370594
                                    fuel_use_electricity_total_m_btu   4.381092   4.202229  4.256404
                                    fuel_use_fuel_oil_total_m_btu      0.000000   0.000000       NaN
                                    fuel_use_natural_gas_total_m_btu   4.905269   4.527971  8.332587
                                    fuel_use_propane_total_m_btu       0.000000   0.000000       NaN

2023-06-26 22:27:37,513 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-26 22:27:37,526 - INFO - 
                                                                matched      truth  pct_diff
build_existing_model.tenure                                                                 
Owner                       energy_use_total_m_btu            58.837194  57.480158  2.360876
                            fuel_use_electricity_total_m_btu  25.636280  25.751587 -0.447764
                            fuel_use_fuel_oil_total_m_btu      0.000000   0.000000       NaN
                            fuel_use_natural_gas_total_m_btu  32.860155  31.390394  4.682197
                            fuel_use_propane_total_m_btu       0.340743   0.338125  0.774528
Renter                      energy_use_total_m_btu            34.704742  34.846114 -0.405702
                            fuel_use_electricity_total_m_btu  18.135889  18.309491 -0.948156
                            fuel_use_fuel_oil_total_m_btu      0.000000   0.000000       NaN
                            fuel_use_natural_gas_total_m_btu  16.376764  16.354111  0.138517
                            fuel_use_propane_total_m_btu       0.192056   0.182457  5.260568

2023-06-26 22:27:37,561 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-26 22:27:37,580 - INFO - 
                                                                               matched      truth   pct_diff
build_existing_model.federal_poverty_level                                                                  
0-100%                                     energy_use_total_m_btu            41.176094  40.465404   1.756290
                                           fuel_use_electricity_total_m_btu  18.353507  18.007692   1.920369
                                           fuel_use_fuel_oil_total_m_btu      0.000000   0.000000        NaN
                                           fuel_use_natural_gas_total_m_btu  22.452185  22.125365   1.477127
                                           fuel_use_propane_total_m_btu       0.370356   0.332288  11.456103
100-150%                                   energy_use_total_m_btu            39.008341  38.480081   1.372815
                                           fuel_use_electricity_total_m_btu  20.247601  19.938108   1.552268
                                           fuel_use_fuel_oil_total_m_btu      0.000000   0.000000        NaN
                                           fuel_use_natural_gas_total_m_btu  18.760690  18.541811   1.180461
                                           fuel_use_propane_total_m_btu       0.000000   0.000000        NaN
150-200%                                   energy_use_total_m_btu            40.010251  39.113094   2.293753
                                           fuel_use_electricity_total_m_btu  19.111994  19.810750  -3.527155
                                           fuel_use_fuel_oil_total_m_btu      0.000000   0.000000        NaN
                                           fuel_use_natural_gas_total_m_btu  20.898298  19.302406   8.267840
                                           fuel_use_propane_total_m_btu       0.000000   0.000000        NaN
200-300%                                   energy_use_total_m_btu            47.341195  49.280690  -3.935608
                                           fuel_use_electricity_total_m_btu  22.755082  23.503944  -3.186112
                                           fuel_use_fuel_oil_total_m_btu      0.000000   0.000000        NaN
                                           fuel_use_natural_gas_total_m_btu  24.286369  25.476958  -4.673200
                                           fuel_use_propane_total_m_btu       0.299648   0.299648   0.000000
300-400%                                   energy_use_total_m_btu            47.056991  47.011012   0.097805
                                           fuel_use_electricity_total_m_btu  22.661439  22.816929  -0.681470
                                           fuel_use_fuel_oil_total_m_btu      0.000000   0.000000        NaN
                                           fuel_use_natural_gas_total_m_btu  24.070989  23.869471   0.844253
                                           fuel_use_propane_total_m_btu       0.324529   0.324529   0.000000
400%+                                      energy_use_total_m_btu            51.527139  50.340278   2.357678
                                           fuel_use_electricity_total_m_btu  23.329093  23.433073  -0.443732
                                           fuel_use_fuel_oil_total_m_btu      0.000000   0.000000        NaN
                                           fuel_use_natural_gas_total_m_btu  27.900383  26.614122   4.833002
                                           fuel_use_propane_total_m_btu       0.297651   0.293045   1.572039

2023-06-26 22:27:37,612 - INFO - >> Database down-selected to 3155 buildings, based on input data of 882 buildings, result outputs to: 
/Users/lliu2/Documents/GitHub/ResStock/euss_cleap/data_/downsampled_buildings_id/euss1_2018_results_up00__downsampled_method1__san_jose.csv

