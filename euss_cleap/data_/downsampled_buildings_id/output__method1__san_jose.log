2023-06-27 09:07:48,493 - INFO - ---------------------------------------------------------
2023-06-27 09:07:48,493 - INFO - Downsampling buildstock for  san_jose  using method 1
2023-06-27 09:07:48,493 - INFO - ---------------------------------------------------------
2023-06-27 09:07:48,535 - INFO - Creating n>=1000 buildlstock by downsampling from: bst_to_search (548916 samples) 
while matching the marginal distribution of 13 key HCs from: bst_to_match (340 samples), 
['Income', 'ASHRAE IECC Climate Zone 2004', 'State', 'Geometry Building Type RECS', 'Heating Fuel', 'HVAC Cooling Type', 'Tenure', 'Water Heater Fuel', 'Vintage ACS', 'Geometry Floor Area Bin', 'HVAC Heating Type', 'Federal Poverty Level', 'Vacancy Status']
2023-06-27 09:07:48,536 - INFO - 
2023-06-27 09:07:48,536 - INFO - 
---- Attempt 1: downsample using 13 key HCs: ----
2023-06-27 09:07:48,667 - INFO -    Located 12371 positively weighted rows in bst_to_search
2023-06-27 09:07:48,667 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2023-06-27 09:07:48,735 - INFO - 

** Downsampled to: 1605 samples, by matching to: ['build_existing_model.income', 'build_existing_model.ashrae_iecc_climate_zone_2004', 'build_existing_model.state', 'build_existing_model.geometry_building_type_recs', 'build_existing_model.heating_fuel', 'build_existing_model.hvac_cooling_type', 'build_existing_model.tenure', 'build_existing_model.water_heater_fuel', 'build_existing_model.vintage_acs', 'build_existing_model.geometry_floor_area_bin', 'build_existing_model.hvac_heating_type', 'build_existing_model.federal_poverty_level', 'build_existing_model.vacancy_status']
2023-06-27 09:07:48,751 - INFO - 
 -> Step 3 : Weight Normalization
2023-06-27 09:07:48,753 - INFO - Checking marginals from weight_map of n=1605...
2023-06-27 09:07:48,762 - INFO -  [[ build_existing_model.income ]] 
2023-06-27 09:07:48,771 - INFO - 
                matched     truth  pct_diff
10000-14999    0.050000  0.050000       0.0
100000-119999  0.088235  0.088235       0.0
120000-139999  0.067647  0.067647       0.0
140000-159999  0.041176  0.041176       0.0
15000-19999    0.038235  0.038235      -0.0
160000-179999  0.050000  0.050000       0.0
180000-199999  0.023529  0.023529       0.0
20000-24999    0.023529  0.023529       0.0
200000+        0.200000  0.200000       0.0
25000-29999    0.035294  0.035294       0.0
30000-34999    0.020588  0.020588       0.0
35000-39999    0.014706  0.014706       0.0
40000-44999    0.020588  0.020588       0.0
45000-49999    0.017647  0.017647       0.0
50000-59999    0.050000  0.050000       0.0
60000-69999    0.047059  0.047059       0.0
70000-79999    0.047059  0.047059       0.0
80000-99999    0.135294  0.135294       0.0
<10000         0.029412  0.029412       0.0

2023-06-27 09:07:48,775 - INFO -  [[ build_existing_model.ashrae_iecc_climate_zone_2004 ]] 
2023-06-27 09:07:48,778 - INFO - 
    matched  truth  pct_diff
3C      1.0    1.0       0.0

2023-06-27 09:07:48,782 - INFO -  [[ build_existing_model.state ]] 
2023-06-27 09:07:48,786 - INFO - 
    matched  truth  pct_diff
CA      1.0    1.0       0.0

2023-06-27 09:07:48,790 - INFO -  [[ build_existing_model.geometry_building_type_recs ]] 
2023-06-27 09:07:48,794 - INFO - 
                                matched     truth  pct_diff
Mobile Home                    0.061765  0.061765       0.0
Multi-Family with 2 - 4 Units  0.067647  0.067647       0.0
Multi-Family with 5+ Units     0.282353  0.282353       0.0
Single-Family Attached         0.135294  0.135294       0.0
Single-Family Detached         0.452941  0.452941       0.0

2023-06-27 09:07:48,798 - INFO -  [[ build_existing_model.heating_fuel ]] 
2023-06-27 09:07:48,802 - INFO - 
              matched     truth  pct_diff
Electricity  0.400000  0.400000       0.0
Natural Gas  0.597059  0.597059       0.0
Other Fuel   0.002941  0.002941       0.0

2023-06-27 09:07:48,805 - INFO -  [[ build_existing_model.hvac_cooling_type ]] 
2023-06-27 09:07:48,809 - INFO - 
             matched     truth  pct_diff
Central AC  0.167647  0.167647       0.0
None        0.717647  0.717647       0.0
Room AC     0.114706  0.114706       0.0

2023-06-27 09:07:48,813 - INFO -  [[ build_existing_model.tenure ]] 
2023-06-27 09:07:48,816 - INFO - 
         matched     truth  pct_diff
Owner   0.529412  0.529412       0.0
Renter  0.470588  0.470588       0.0

2023-06-27 09:07:48,821 - INFO -  [[ build_existing_model.water_heater_fuel ]] 
2023-06-27 09:07:48,826 - INFO - 
              matched     truth  pct_diff
Electricity  0.138235  0.138235      -0.0
Natural Gas  0.835294  0.835294      -0.0
Propane      0.026471  0.026471      -0.0

2023-06-27 09:07:48,831 - INFO -  [[ build_existing_model.vintage_acs ]] 
2023-06-27 09:07:48,835 - INFO - 
          matched     truth  pct_diff
1940-59  0.173529  0.173529       0.0
1960-79  0.411765  0.411765       0.0
1980-99  0.217647  0.217647      -0.0
2000-09  0.108824  0.108824      -0.0
2010s    0.044118  0.044118      -0.0
<1940    0.044118  0.044118      -0.0

2023-06-27 09:07:48,839 - INFO -  [[ build_existing_model.geometry_floor_area_bin ]] 
2023-06-27 09:07:48,842 - INFO - 
            matched     truth  pct_diff
0-1499     0.597059  0.597059       0.0
1500-2499  0.267647  0.267647       0.0
2500-3999  0.114706  0.114706       0.0
4000+      0.020588  0.020588       0.0

2023-06-27 09:07:48,846 - INFO -  [[ build_existing_model.hvac_heating_type ]] 
2023-06-27 09:07:48,850 - INFO - 
                     matched     truth  pct_diff
Ducted Heating      0.632353  0.632353       0.0
Non-Ducted Heating  0.367647  0.367647      -0.0

2023-06-27 09:07:48,855 - INFO -  [[ build_existing_model.federal_poverty_level ]] 
2023-06-27 09:07:48,859 - INFO - 
           matched     truth  pct_diff
0-100%    0.088235  0.088235       0.0
100-150%  0.052941  0.052941       0.0
150-200%  0.061765  0.061765       0.0
200-300%  0.094118  0.094118       0.0
300-400%  0.094118  0.094118       0.0
400%+     0.608824  0.608824       0.0

2023-06-27 09:07:48,862 - INFO -  [[ build_existing_model.vacancy_status ]] 
2023-06-27 09:07:48,866 - INFO - 
           matched     truth  pct_diff
Occupied  0.970588  0.970588       0.0
Vacant    0.029412  0.029412       0.0

2023-06-27 09:07:48,866 - INFO - No unmatched HC
2023-06-27 09:07:48,877 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-27 09:07:48,881 - INFO - 
                                    matched      truth  pct_diff
energy_use_total_m_btu            46.294273  46.043071  0.545581
fuel_use_electricity_total_m_btu  21.384173  21.632291 -1.146981
fuel_use_fuel_oil_total_m_btu      0.000000   0.000000       NaN
fuel_use_natural_gas_total_m_btu  24.590888  24.095976  2.053917
fuel_use_propane_total_m_btu       0.319193   0.314738  1.415509

2023-06-27 09:07:48,894 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-27 09:07:48,899 - INFO - 
                                                                        matched      truth  pct_diff
build_existing_model.vacancy_status                                                                 
Occupied                            energy_use_total_m_btu            47.472821  47.214006  0.548173
                                    fuel_use_electricity_total_m_btu  21.953514  22.209152 -1.151044
                                    fuel_use_fuel_oil_total_m_btu      0.000000   0.000000       NaN
                                    fuel_use_natural_gas_total_m_btu  25.190421  24.680512  2.066038
                                    fuel_use_propane_total_m_btu       0.328866   0.324276  1.415509
Vacant                              energy_use_total_m_btu             7.402200   7.402200  0.000000
                                    fuel_use_electricity_total_m_btu   2.595900   2.595900  0.000000
                                    fuel_use_fuel_oil_total_m_btu      0.000000   0.000000       NaN
                                    fuel_use_natural_gas_total_m_btu   4.806300   4.806300  0.000000
                                    fuel_use_propane_total_m_btu       0.000000   0.000000       NaN

2023-06-27 09:07:48,909 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-27 09:07:48,913 - INFO - 
                                                                matched      truth  pct_diff
build_existing_model.tenure                                                                 
Owner                       energy_use_total_m_btu            56.058756  54.886050  2.136620
                            fuel_use_electricity_total_m_btu  24.462485  24.477828 -0.062680
                            fuel_use_fuel_oil_total_m_btu      0.000000   0.000000       NaN
                            fuel_use_natural_gas_total_m_btu  31.258409  30.075444  3.933324
                            fuel_use_propane_total_m_btu       0.337839   0.332717  1.539515
Renter                      energy_use_total_m_btu            35.309229  36.094719 -2.176190
                            fuel_use_electricity_total_m_btu  17.921072  18.431062 -2.767019
                            fuel_use_fuel_oil_total_m_btu      0.000000   0.000000       NaN
                            fuel_use_natural_gas_total_m_btu  17.089926  17.369075 -1.607159
                            fuel_use_propane_total_m_btu       0.298217   0.294513  1.257905

2023-06-27 09:07:48,922 - INFO - truth vs. matched - per dwelling unit energy:
2023-06-27 09:07:48,927 - INFO - 
                                                                               matched      truth  pct_diff
build_existing_model.federal_poverty_level                                                                 
0-100%                                     energy_use_total_m_btu            33.018296  34.554267 -4.445098
                                           fuel_use_electricity_total_m_btu  14.825846  15.450200 -4.041073
                                           fuel_use_fuel_oil_total_m_btu      0.000000   0.000000       NaN
                                           fuel_use_natural_gas_total_m_btu  17.882828  18.814200 -4.950366
                                           fuel_use_propane_total_m_btu       0.309558   0.289800  6.817920
100-150%                                   energy_use_total_m_btu            28.167831  26.209278  7.472750
                                           fuel_use_electricity_total_m_btu  12.638559  11.535556  9.561774
                                           fuel_use_fuel_oil_total_m_btu      0.000000   0.000000       NaN
                                           fuel_use_natural_gas_total_m_btu  15.082904  14.227167  6.014810
                                           fuel_use_propane_total_m_btu       0.446389   0.446389 -0.000000
150-200%                                   energy_use_total_m_btu            32.922068  33.283952 -1.087264
                                           fuel_use_electricity_total_m_btu  16.384565  17.426714 -5.980181
                                           fuel_use_fuel_oil_total_m_btu      0.000000   0.000000       NaN
                                           fuel_use_natural_gas_total_m_btu  15.090207  14.410000  4.720381
                                           fuel_use_propane_total_m_btu       1.447286   1.447286  0.000000
200-300%                                   energy_use_total_m_btu            56.982899  59.939094 -4.931997
                                           fuel_use_electricity_total_m_btu  25.501274  27.062531 -5.769073
                                           fuel_use_fuel_oil_total_m_btu      0.000000   0.000000       NaN
                                           fuel_use_natural_gas_total_m_btu  31.481543  32.876438 -4.242839
                                           fuel_use_propane_total_m_btu       0.000000   0.000000       NaN
300-400%                                   energy_use_total_m_btu            54.850716  55.280375 -0.777236
                                           fuel_use_electricity_total_m_btu  25.202628  25.690906 -1.900587
                                           fuel_use_fuel_oil_total_m_btu      0.000000   0.000000       NaN
                                           fuel_use_natural_gas_total_m_btu  29.150066  29.091375  0.201748
                                           fuel_use_propane_total_m_btu       0.497969   0.497969  0.000000
400%+                                      energy_use_total_m_btu            48.176057  47.151029  2.173925
                                           fuel_use_electricity_total_m_btu  22.375597  22.366000  0.042909
                                           fuel_use_fuel_oil_total_m_btu      0.000000   0.000000       NaN
                                           fuel_use_natural_gas_total_m_btu  25.583666  24.572643  4.114428
                                           fuel_use_propane_total_m_btu       0.216792   0.212338  2.097648

2023-06-27 09:07:48,940 - INFO - >> Database down-selected to 1605 buildings, based on input data of 340 buildings, result outputs to: 
/Users/lliu2/Documents/GitHub/ResStock/euss_cleap/data_/downsampled_buildings_id/euss1_2018_results_up00__downsampled_method1__san_jose.csv

